(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[6338,9230],{"./src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{HlsPlayerInner:()=>HlsPlayerInner,default:()=>HlsPlayer});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.parse-float.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.timers.js");var chakra_ui_alert_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+alert@1.3.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/alert/dist/chakra-ui-alert.esm.js"),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),chakra_ui_close_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+close-button@1.2.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/close-button/dist/chakra-ui-close-button.esm.js"),chakra_ui_system_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+system@1.10.3_922a85da57e3646a57465b7970b0de85/node_modules/@chakra-ui/system/dist/chakra-ui-system.esm.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_error_boundary_umd=__webpack_require__("../node_modules/.pnpm/react-error-boundary@3.1.4_react@17.0.2/node_modules/react-error-boundary/dist/react-error-boundary.umd.js"),video_es=__webpack_require__("../node_modules/.pnpm/video.js@7.17.0/node_modules/video.js/dist/video.es.js"),videojs_hls_quality_selector_es=(__webpack_require__("../node_modules/.pnpm/video.js@7.17.0/node_modules/video.js/dist/video-js.css"),__webpack_require__("../node_modules/.pnpm/videojs-contrib-quality-levels@2.1.0/node_modules/videojs-contrib-quality-levels/dist/videojs-contrib-quality-levels.es.js"),__webpack_require__("../node_modules/.pnpm/videojs-hls-quality-selector@1.1.4/node_modules/videojs-hls-quality-selector/dist/videojs-hls-quality-selector.es.js")),useRestorableState=__webpack_require__("./src/aspects/Hooks/useRestorableState.ts"),useTrackView=__webpack_require__("./src/aspects/Realtime/Analytics/useTrackView.tsx"),injectStylesIntoStyleTag=__webpack_require__("../node_modules/.pnpm/style-loader@2.0.0_webpack@5.69.0/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),hls_player=__webpack_require__("../node_modules/.pnpm/css-loader@5.2.7_webpack@5.69.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/aspects/Conference/Attend/Room/Video/hls-player.css"),options={insert:"head",singleton:!1};injectStylesIntoStyleTag_default()(hls_player.Z,options);hls_player.Z.locals;__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.now.js");var chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),FAIcon=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function HlsPlayerError(props){var now=_slicedToArray((0,react.useState)(Date.now()),1)[0];return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{height:"100%",width:"100%",borderColor:"black",borderWidth:2,p:4,children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"file-video",fontSize:"6xl",color:"red.500"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"The video player encountered an issue. Please refresh the page."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{pb:"6px",children:"If you report this error, please include the following details:"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{alignItems:"left",p:"8px",bgColor:"#eee",maxH:"40em",maxW:"100%",overflow:"auto",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.EK,{children:["[HlsPlayer] ",props.error.name,": ",props.error.message]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.EK,{children:["Time: ",now]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.EK,{children:["Location: ",window.location.href]}),(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.pre,{my:"4px",fontSize:"0.8em",children:props.error.stack})]}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){return window.location.reload()},bgColor:"#eee",p:"12px",border:"1px solid black",borderRadius:"4px",fontSize:"1.2em",children:"Refresh"})]})}HlsPlayerError.displayName="HlsPlayerError";try{HlsPlayerError.displayName="HlsPlayerError",HlsPlayerError.__docgenInfo={description:"",displayName:"HlsPlayerError",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Video/HlsPlayerError.tsx#HlsPlayerError"]={docgenInfo:HlsPlayerError.__docgenInfo,name:"HlsPlayerError",path:"src/aspects/Conference/Attend/Room/Video/HlsPlayerError.tsx#HlsPlayerError"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["onReload","onDismiss"];function HlsPlayer_slicedToArray(arr,i){return function HlsPlayer_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function HlsPlayer_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function HlsPlayer_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return HlsPlayer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HlsPlayer_arrayLikeToArray(o,minLen)}(arr,i)||function HlsPlayer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HlsPlayer_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var VideoJSInner=react.forwardRef((function VideoJSInner(props,ref){var _props$style;return(0,jsx_runtime.jsx)("div",Object.assign({"data-vjs-player":!0},props,{style:Object.assign({position:"relative"},null!==(_props$style=props.style)&&void 0!==_props$style?_props$style:{}),children:(0,jsx_runtime.jsx)("video",{ref,className:"video-js vjs-big-play-centered",crossOrigin:"anonymous"})}))}));function PlayerAnalytics(_ref){var isPlaying=_ref.isPlaying,roomId=_ref.roomId;return(0,useTrackView.Z)(isPlaying,roomId,"Room.HLSStream"),null}function NonLiveAlert(_ref2){var onReload=_ref2.onReload,onDismiss=_ref2.onDismiss,props=_objectWithoutProperties(_ref2,_excluded);return(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,Object.assign({status:"warning",p:1,display:"flex",flexDir:"row"},props,{children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{ml:2}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.X,{fontSize:"sm",children:"You may need to reload this video to get the latest content."}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{ml:"auto",mr:2,size:"sm",onClick:onReload,children:"Reload"}),(0,jsx_runtime.jsx)(chakra_ui_close_button_esm.P,{onClick:onDismiss})]}))}function HlsPlayerInner(_ref3){var roomId=_ref3.roomId,hlsUri=_ref3.hlsUri,canPlay=_ref3.canPlay,forceMute=_ref3.forceMute,initialMute=_ref3.initialMute,expectLivestream=_ref3.expectLivestream,onAspectRatioChange=_ref3.onAspectRatioChange,playerRef=(0,react.useRef)(null),_useState2=HlsPlayer_slicedToArray((0,react.useState)(!1),2),isPlaying=_useState2[0],setIsPlaying=_useState2[1],_useState4=HlsPlayer_slicedToArray((0,react.useState)(!0),2),intendPlayStream=_useState4[0],setIntendPlayStream=_useState4[1],_useSessionState2=HlsPlayer_slicedToArray((0,useRestorableState.jj)("StreamPlayer_IntendMuted",!1,(function(x){return x?"true":"false"}),(function(x){return"true"===x})),2),intendMuted=_useSessionState2[0],setIntendMuted=_useSessionState2[1],_useRestorableState2=HlsPlayer_slicedToArray((0,useRestorableState.aX)("StreamPlayer_Volume",1,(function(x){return x.toString()}),(function(x){return parseFloat(x)})),2),volume=_useRestorableState2[0],setVolume=_useRestorableState2[1],_useState6=HlsPlayer_slicedToArray((0,react.useState)(!1),2),isLive=_useState6[0],setIsLive=_useState6[1],_useState8=HlsPlayer_slicedToArray((0,react.useState)(!1),2),dismissAlert=_useState8[0],setDismissAlert=_useState8[1];(0,react.useEffect)((function(){setDismissAlert(!1)}),[expectLivestream]);var videoRef=(0,react.useRef)(null),_useState10=HlsPlayer_slicedToArray((0,react.useState)(0),2),videoKey=_useState10[0],setVideoKey=_useState10[1],options=(0,react.useMemo)((function(){return{autoplay:initialMute?"muted":"play",bigPlayButton:!0,controls:!0,fluid:!0,liveui:!0,preload:"auto",src:hlsUri,html5:{vhs:{parse708captions:!1}}}}),[hlsUri,initialMute]);(0,react.useEffect)((function(){var _videoRef$current;canPlay&&intendPlayStream&&(null==videoRef||null===(_videoRef$current=videoRef.current)||void 0===_videoRef$current||_videoRef$current.play())}),[canPlay,intendPlayStream]),(0,react.useEffect)((function(){videoRef.current&&(videoRef.current.muted=intendMuted)}),[intendMuted]),(0,react.useEffect)((function(){videoRef.current&&(videoRef.current.muted=forceMute||videoRef.current.muted)}),[forceMute]),(0,react.useEffect)((function(){videoRef.current&&videoRef.current.volume!==volume&&(videoRef.current.volume=volume)}),[volume]);var addListeners=(0,react.useCallback)((function(videoElement){var onPlay=function onPlay(){setIntendPlayStream(!0)};videoElement.addEventListener("play",onPlay);var onPlaying=function onPlaying(){setIsPlaying(!0)};videoElement.addEventListener("playing",onPlaying);var onPause=function onPause(){setIsPlaying(!1),setIntendPlayStream(!1)};videoElement.addEventListener("pause",onPause);var onEnded=function onEnded(){setIsPlaying(!1)};videoElement.addEventListener("ended",onEnded);var onError=function onError(){setIsPlaying(!1)};videoElement.addEventListener("error",onError);var onWaiting=function onWaiting(){setIsPlaying(!1)};videoElement.addEventListener("waiting",onWaiting);var onVolumeChange=function onVolumeChange(){var _videoElement$muted;videoElement&&(setIntendMuted(null!==(_videoElement$muted=videoElement.muted)&&void 0!==_videoElement$muted&&_videoElement$muted),setVolume(videoElement.volume))};videoElement.addEventListener("volumechange",onVolumeChange);var onResize=function onResize(){videoElement&&0!==videoElement.videoWidth&&0!==videoElement.videoHeight&&(null==onAspectRatioChange||onAspectRatioChange(videoElement.videoWidth/videoElement.videoHeight))};return videoElement.addEventListener("resize",onResize),function(){null==videoElement||videoElement.removeEventListener("play",onPlay),null==videoElement||videoElement.removeEventListener("playing",onPlaying),null==videoElement||videoElement.removeEventListener("pause",onPause),null==videoElement||videoElement.removeEventListener("ended",onEnded),null==videoElement||videoElement.removeEventListener("error",onError),null==videoElement||videoElement.removeEventListener("waiting",onWaiting),null==videoElement||videoElement.removeEventListener("volumechange",onVolumeChange),null==videoElement||videoElement.removeEventListener("resize",onResize)}}),[onAspectRatioChange,setIntendMuted,setVolume]);(0,react.useEffect)((function(){return function(){var player=playerRef.current;playerRef.current=null,setVideoKey((function(i){return i+1})),setTimeout((function(){player&&!player.isDisposed()&&player.dispose()}),0)}}),[]);var initialisePlayer=(0,react.useCallback)((function(options){video_es.Z.getPlugin("hlsQualitySelector")||video_es.Z.registerPlugin("hlsQualitySelector",videojs_hls_quality_selector_es.Z);var removeListeners=videoRef.current?addListeners(videoRef.current):null,targetVideoEl=videoRef.current,player=playerRef.current=targetVideoEl?(0,video_es.Z)(targetVideoEl,Object.assign({},options,{muted:!(!forceMute&&!intendMuted)||void 0,defaultVolume:volume}),(function onReady(){var _this=this;if(this===playerRef.current){options.src&&this.src(options.src),"function"==typeof this.hlsQualitySelector?this.hlsQualitySelector({displayCurrentQuality:!0}):console.warn("hlsQualitySelector plugin was not registered, skipping initialisation");var onLoadedMetadata=function onLoadedMetadata(){for(var tracks=_this.textTracks(),i=0;i<tracks.length;i++)tracks[i].mode="disabled";0!==_this.videoWidth()&&0!==_this.videoHeight()&&(null==onAspectRatioChange||onAspectRatioChange(_this.videoWidth()/_this.videoHeight())),setDismissAlert(!1),setIsLive(_this.duration()===1/0)};this.on("loadedmetadata",onLoadedMetadata),this.one("playerreset",(function(){_this.off("loadedmetadata",onLoadedMetadata)}))}})):null;return function(){player&&player===playerRef.current&&!player.isDisposed()&&(null==removeListeners||removeListeners(),targetVideoEl&&targetVideoEl===videoRef.current&&player.reset())}}),[addListeners,forceMute,intendMuted,onAspectRatioChange,volume]);(0,react.useEffect)((function(){return initialisePlayer(options)}),[options,videoKey]);var handleReload=(0,react.useCallback)((function(){setDismissAlert(!0),initialisePlayer(options)}),[initialisePlayer,options]),handleDismiss=(0,react.useCallback)((function(){setDismissAlert(!0)}),[setDismissAlert]);return(0,jsx_runtime.jsxs)(chakra_ui_system_esm.m$.div,{h:"100%",w:"100%",position:"relative",children:[roomId?(0,jsx_runtime.jsx)(PlayerAnalytics,{isPlaying,roomId}):void 0,(0,jsx_runtime.jsx)(VideoJSInner,{ref:videoRef,style:{zIndex:1}},videoKey),isLive||!expectLivestream||dismissAlert?void 0:(0,jsx_runtime.jsx)(NonLiveAlert,{position:"absolute",width:"100%",zIndex:2,top:0,onReload:handleReload,onDismiss:handleDismiss})]})}function HlsPlayer(props){return(0,jsx_runtime.jsx)(react_error_boundary_umd.ErrorBoundary,{FallbackComponent:HlsPlayerError,children:(0,jsx_runtime.jsx)(HlsPlayerInner,Object.assign({},props))})}NonLiveAlert.displayName="NonLiveAlert",HlsPlayerInner.displayName="HlsPlayerInner",HlsPlayer.displayName="HlsPlayer";try{HlsPlayerInner.displayName="HlsPlayerInner",HlsPlayerInner.__docgenInfo={description:"",displayName:"HlsPlayerInner",props:{roomId:{defaultValue:null,description:"",name:"roomId",required:!1,type:{name:"string"}},hlsUri:{defaultValue:null,description:"",name:"hlsUri",required:!0,type:{name:"string"}},canPlay:{defaultValue:null,description:"",name:"canPlay",required:!0,type:{name:"boolean"}},forceMute:{defaultValue:null,description:"",name:"forceMute",required:!1,type:{name:"boolean"}},initialMute:{defaultValue:null,description:"",name:"initialMute",required:!1,type:{name:"boolean"}},expectLivestream:{defaultValue:null,description:"",name:"expectLivestream",required:!1,type:{name:"boolean"}},onAspectRatioChange:{defaultValue:null,description:"",name:"onAspectRatioChange",required:!1,type:{name:"((aspectRatio: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx#HlsPlayerInner"]={docgenInfo:HlsPlayerInner.__docgenInfo,name:"HlsPlayerInner",path:"src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx#HlsPlayerInner"})}catch(__react_docgen_typescript_loader_error){}try{HlsPlayer.displayName="HlsPlayer",HlsPlayer.__docgenInfo={description:"",displayName:"HlsPlayer",props:{roomId:{defaultValue:null,description:"",name:"roomId",required:!1,type:{name:"string"}},hlsUri:{defaultValue:null,description:"",name:"hlsUri",required:!0,type:{name:"string"}},canPlay:{defaultValue:null,description:"",name:"canPlay",required:!0,type:{name:"boolean"}},forceMute:{defaultValue:null,description:"",name:"forceMute",required:!1,type:{name:"boolean"}},initialMute:{defaultValue:null,description:"",name:"initialMute",required:!1,type:{name:"boolean"}},expectLivestream:{defaultValue:null,description:"",name:"expectLivestream",required:!1,type:{name:"boolean"}},onAspectRatioChange:{defaultValue:null,description:"",name:"onAspectRatioChange",required:!1,type:{name:"((aspectRatio: number) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx#HlsPlayer"]={docgenInfo:HlsPlayer.__docgenInfo,name:"HlsPlayer",path:"src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx#HlsPlayer"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Realtime/Analytics/useTrackView.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>useTrackView});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.now.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js");var react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),_Hooks_usePolling__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/aspects/Hooks/usePolling.ts"),_RealtimeServiceProvider__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./src/aspects/Realtime/RealtimeServiceProvider.tsx");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useTrackView(isActive,identifier,contentType){var requiredViewTimeMs=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15e3,_useState=(0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(null),_useState2=_slicedToArray(_useState,2),activatedAt=_useState2[0],setActivatedAt=_useState2[1],submitted=(0,react__WEBPACK_IMPORTED_MODULE_13__.useRef)(!1);(0,react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){null===activatedAt&&isActive?setActivatedAt(Date.now()):null===activatedAt||isActive||setActivatedAt(null)}),[activatedAt,isActive]);var rts=(0,_RealtimeServiceProvider__WEBPACK_IMPORTED_MODULE_15__.GT)(),_useState3=(0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(null),_useState4=_slicedToArray(_useState3,2),socket=_useState4[0],setSocket=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(-1),_useState6=_slicedToArray(_useState5,2),now=_useState6[0],setNow=_useState6[1],pollF=(0,react__WEBPACK_IMPORTED_MODULE_13__.useCallback)((function(){setNow(Date.now())}),[]),polling=(0,_Hooks_usePolling__WEBPACK_IMPORTED_MODULE_14__.Z)(pollF,requiredViewTimeMs,!1);(0,react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){null!==activatedAt?now-activatedAt>requiredViewTimeMs&&socket&&socket.connected?(polling.stop(),submitted.current||(socket.emit("analytics.view.count",{identifier,contentType}),submitted.current=!0)):polling.isPolling||polling.start():polling.isPolling&&polling.stop()}),[activatedAt,contentType,identifier,now,polling,requiredViewTimeMs,socket]),(0,react__WEBPACK_IMPORTED_MODULE_13__.useEffect)((function(){var offSocketAvailable=rts.onSocketAvailable("useTrackView.useEffect",(function(socket){setSocket(socket)})),offSocketUnavailable=rts.onSocketUnavailable("useTrackView.useEffect",(function(socket){setSocket((function(s){return s===socket?null:s}))}));return function(){offSocketAvailable(),offSocketUnavailable()}}),[rts])}},"../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/number-parse-float.js":(module,__unused_webpack_exports,__webpack_require__)=>{var global=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/global.js"),fails=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/fails.js"),uncurryThis=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/function-uncurry-this.js"),toString=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/to-string.js"),trim=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/string-trim.js").trim,whitespaces=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/whitespaces.js"),charAt=uncurryThis("".charAt),n$ParseFloat=global.parseFloat,Symbol=global.Symbol,ITERATOR=Symbol&&Symbol.iterator,FORCED=1/n$ParseFloat(whitespaces+"-0")!=-1/0||ITERATOR&&!fails((function(){n$ParseFloat(Object(ITERATOR))}));module.exports=FORCED?function parseFloat(string){var trimmedString=trim(toString(string)),result=n$ParseFloat(trimmedString);return 0===result&&"-"==charAt(trimmedString,0)?-0:result}:n$ParseFloat},"../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.parse-float.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/export.js"),$parseFloat=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/number-parse-float.js");$({global:!0,forced:parseFloat!=$parseFloat},{parseFloat:$parseFloat})},"../node_modules/.pnpm/css-loader@5.2.7_webpack@5.69.0/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!./src/aspects/Conference/Attend/Room/Video/hls-player.css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_5_2_7_webpack_5_69_0_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/css-loader@5.2.7_webpack@5.69.0/node_modules/css-loader/dist/runtime/cssWithMappingToString.js"),_node_modules_pnpm_css_loader_5_2_7_webpack_5_69_0_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_5_2_7_webpack_5_69_0_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_5_2_7_webpack_5_69_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/css-loader@5.2.7_webpack@5.69.0/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_5_2_7_webpack_5_69_0_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_5_2_7_webpack_5_69_0_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".vjs-modal-dialog input,\n.vjs-modal-dialog select {\n    color: black;\n}\n","",{version:3,sources:["webpack://./src/aspects/Conference/Attend/Room/Video/hls-player.css"],names:[],mappings:"AAAA;;IAEI,YAAY;AAChB",sourcesContent:[".vjs-modal-dialog input,\n.vjs-modal-dialog select {\n    color: black;\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"?e1c4":()=>{}}]);