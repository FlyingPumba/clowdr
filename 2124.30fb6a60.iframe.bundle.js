"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[2124],{"./src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>UnsavedChangesWarning});var react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function LeavePageWarning(_ref){var message=_ref.message,hasUnsavedChanges=_ref.hasUnsavedChanges;return(0,react.useEffect)((function(){var unloadHandler=function(){if(hasUnsavedChanges){var _unloadHandler=function _unloadHandler(ev){return ev.preventDefault(),ev.returnValue=message,!0};return window.addEventListener("beforeunload",_unloadHandler),_unloadHandler}return null}();return function(){unloadHandler&&window.removeEventListener("beforeunload",unloadHandler)}}),[hasUnsavedChanges,message]),(0,jsx_runtime.jsx)(react_router.NL,{when:hasUnsavedChanges,message})}LeavePageWarning.displayName="LeavePageWarning";try{LeavePageWarning.displayName="LeavePageWarning",LeavePageWarning.__docgenInfo={description:"",displayName:"LeavePageWarning",props:{hasUnsavedChanges:{defaultValue:null,description:"",name:"hasUnsavedChanges",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/LeavingPageWarnings/LeavePageWarning.tsx#LeavePageWarning"]={docgenInfo:LeavePageWarning.__docgenInfo,name:"LeavePageWarning",path:"src/aspects/LeavingPageWarnings/LeavePageWarning.tsx#LeavePageWarning"})}catch(__react_docgen_typescript_loader_error){}function UnsavedChangesWarning(_ref){var hasUnsavedChanges=_ref.hasUnsavedChanges;return(0,jsx_runtime.jsx)(LeavePageWarning,{hasUnsavedChanges,message:"You have unsaved changes, are you sure you wish to leave the page?"})}UnsavedChangesWarning.displayName="UnsavedChangesWarning";try{UnsavedChangesWarning.displayName="UnsavedChangesWarning",UnsavedChangesWarning.__docgenInfo={description:"",displayName:"UnsavedChangesWarning",props:{hasUnsavedChanges:{defaultValue:null,description:"",name:"hasUnsavedChanges",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx#UnsavedChangesWarning"]={docgenInfo:UnsavedChangesWarning.__docgenInfo,name:"UnsavedChangesWarning",path:"src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx#UnsavedChangesWarning"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Submissions/Elements/RenderElement.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RenderElement});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),amazon_s3_uri__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(amazon_s3_uri__WEBPACK_IMPORTED_MODULE_1__),_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),__webpack_require__("./src/aspects/Chakra/FAIcon.tsx")),_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),_Chakra_Markdown__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/aspects/Chakra/Markdown.tsx"),_Conference_Attend_Content_Element_VideoElement__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/aspects/Conference/Attend/Content/Element/VideoElement.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function RenderElement(_ref){var data=_ref.data,latestVersion=data&&data.length>0?data[data.length-1]:null;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xu,{border:"1px solid",borderColor:"gray.400",w:"100%",p:2,borderRadius:"md",overflow:"auto",children:function content(){var _latestVersion$data$a,_latestVersion$data$t,s3Url,_AmazonS3Uri;if(!latestVersion)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{mt:5,children:"No content available to render."});switch(latestVersion.data.baseType){case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.File:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_4__.bd,{to:(s3Url=latestVersion.data.s3Url,_AmazonS3Uri=amazon_s3_uri__WEBPACK_IMPORTED_MODULE_1___default()(s3Url),"https://"+_AmazonS3Uri.bucket+".s3.eu-west-1.amazonaws.com/"+_AmazonS3Uri.key),isExternal:!0,size:"lg",height:"auto","aria-label":"Download previously submitted file",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.gC,{m:4,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_3__.Z,{iconStyle:"s",icon:"download"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:"Previously submitted file"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:["Alternative text:"," ",null!==(_latestVersion$data$a=latestVersion.data.altText)&&void 0!==_latestVersion$data$a&&_latestVersion$data$a.length?latestVersion.data.altText:"None provided"]})]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.Link:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:["URL: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("a",{href:latestVersion.data.url,children:latestVersion.data.url})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:["Text: ",latestVersion.data.text]})]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.Text:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.W2,{maxW:"container.md",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Chakra_Markdown__WEBPACK_IMPORTED_MODULE_5__.U,{children:latestVersion.data.text})});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.URL:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:["URL: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("a",{href:latestVersion.data.url,children:latestVersion.data.url})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:["Title: ",null!==(_latestVersion$data$t=latestVersion.data.title)&&void 0!==_latestVersion$data$t&&_latestVersion$data$t.length?latestVersion.data.title:"None provided"]})]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.Video:var _latestVersion$data,_latestVersion$data$t2,_latestVersion$data$t3;return"FAILED"===(null===(_latestVersion$data=latestVersion.data)||void 0===_latestVersion$data||null===(_latestVersion$data$t2=_latestVersion$data.transcode)||void 0===_latestVersion$data$t2?void 0:_latestVersion$data$t2.status)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:["Failed to process this item: ",latestVersion.data.transcode.message]}):null!==(_latestVersion$data$t3=latestVersion.data.transcode)&&void 0!==_latestVersion$data$t3&&_latestVersion$data$t3.s3Url?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Conference_Attend_Content_Element_VideoElement__WEBPACK_IMPORTED_MODULE_6__.q,{elementData:latestVersion.data}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:"This item is still being processed. Please check back in 15 minutes."});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.Audio:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Conference_Attend_Content_Element_VideoElement__WEBPACK_IMPORTED_MODULE_6__.q,{elementData:latestVersion.data});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_0__.bN.Component:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xv,{children:"This item type cannot be submitted."})}}()})}RenderElement.displayName="RenderElement";try{RenderElement.displayName="RenderElement",RenderElement.__docgenInfo={description:"",displayName:"RenderElement",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ElementDataBlob"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/RenderElement.tsx#RenderElement"]={docgenInfo:RenderElement.__docgenInfo,name:"RenderElement",path:"src/aspects/Submissions/Elements/RenderElement.tsx#RenderElement"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Submissions/SubmitElementPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>SubmitElementPage});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js");var chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),chakra_ui_spinner_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js"),auth=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),react=(__webpack_require__("../node_modules/.pnpm/@uppy+core@2.1.4/node_modules/@uppy/core/dist/style.css"),__webpack_require__("../node_modules/.pnpm/@uppy+progress-bar@2.0.4_@uppy+core@2.1.4/node_modules/@uppy/progress-bar/dist/style.css"),__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js")),urql_core=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),graphql=__webpack_require__("./src/generated/graphql.tsx"),FAIcon=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),LinkButton=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),make_context=__webpack_require__("./src/aspects/GQL/make-context.ts"),useQueryErrorToast=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx"),useTitle=__webpack_require__("./src/aspects/Hooks/useTitle.tsx"),chakra_ui_tooltip_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.timers.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+tooltip@1.4.6_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/tooltip/dist/chakra-ui-tooltip.esm.js")),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),content=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),chakra_ui_toast_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.create.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+toast@1.5.4_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/toast/dist/chakra-ui-toast.esm.js")),chakra_ui_popover_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+popover@1.11.4_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/popover/dist/chakra-ui-popover.esm.js"),esm=__webpack_require__("../packages/shared/assert/build/esm/index.js"),amazon_s3_uri=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri_default=__webpack_require__.n(amazon_s3_uri),es=__webpack_require__("../node_modules/.pnpm/ramda@0.28.0/node_modules/ramda/es/index.js"),react_router=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js"),srtValidator=__webpack_require__("../node_modules/.pnpm/srt-validator@3.2.4/node_modules/srt-validator/dist/srtValidator.js"),srtValidator_default=__webpack_require__.n(srtValidator),use_file_picker_esm=__webpack_require__("../node_modules/.pnpm/use-file-picker@1.4.1_react@17.0.2/node_modules/use-file-picker/dist/use-file-picker.esm.js"),dist_esm=__webpack_require__("../node_modules/.pnpm/use-http@1.0.26_react-dom@17.0.2+react@17.0.2/node_modules/use-http/dist/esm/index.js"),UnsavedChangesWarning=__webpack_require__("./src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx"),src=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.split.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.parse-float.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.pad-start.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.math.trunc.js"),__webpack_require__("../node_modules/.pnpm/srt-parser-2@1.1.7/node_modules/srt-parser-2/dist/src/index.js"));function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var anyDecimalSeparator=/[,.٫⎖]/;function timecodeToTenths(timecode){var _timecode$split$rever2=_slicedToArray(timecode.split(":").reverse(),3),secondsFloatStr=_timecode$split$rever2[0],minutesStr=_timecode$split$rever2[1],hoursStr=_timecode$split$rever2[2],secondsFloat=parseFloat(secondsFloatStr.replace(anyDecimalSeparator,".")),minutes=minutesStr?parseInt(minutesStr,10):0;return 600*(60*(hoursStr?parseInt(hoursStr,10):0)+minutes)+Math.round(10*secondsFloat)}var toDigits=function toDigits(n,d){return Math.trunc(n).toString().padStart(d,"0")};function tenthsToSRTTimecode(tenthsTotal){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$minusEpsilon=_ref.minusEpsilon,minusEpsilon=void 0!==_ref$minusEpsilon&&_ref$minusEpsilon,millisecondsTotal=100*tenthsTotal-(minusEpsilon?1:0),hoursStr=toDigits(millisecondsTotal/36e5,2),minutesStr=toDigits(millisecondsTotal/6e4%60,2),secondsStr=toDigits(millisecondsTotal/1e3%60,2),millisecondsStr=toDigits(millisecondsTotal%1e3,3);return hoursStr+":"+minutesStr+":"+secondsStr+","+millisecondsStr}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.every.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js");var index_esm=__webpack_require__("../node_modules/.pnpm/react-window@1.8.6_react-dom@17.0.2+react@17.0.2/node_modules/react-window/dist/index.esm.js"),chakra_ui_textarea_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+textarea@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/textarea/dist/chakra-ui-textarea.esm.js")),chakra_ui_number_input_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+number-input@1.4.2_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/number-input/dist/chakra-ui-number-input.esm.js"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js"),secondsDisplayFormat=new Intl.NumberFormat(void 0,{minimumIntegerDigits:2,minimumFractionDigits:1,maximumFractionDigits:1}),hoursMinutesDisplayFormat=new Intl.NumberFormat(void 0,{minimumIntegerDigits:2,maximumFractionDigits:0});function TimecodeInput(_ref){var tenthsTotal,secondsStr,minutesStr,value=_ref.value,onInput=_ref.onInput;return(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{value:(tenthsTotal=value,secondsStr=secondsDisplayFormat.format(tenthsTotal%600/10),minutesStr=hoursMinutesDisplayFormat.format(Math.trunc(tenthsTotal/600)%60),hoursMinutesDisplayFormat.format(Math.trunc(tenthsTotal/36e3))+":"+minutesStr+":"+secondsStr),children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{readOnly:!0}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{onClick:function onClick(){return onInput(value+1)}}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{onClick:function onClick(){return onInput(value-1)}})]})]})}TimecodeInput.displayName="TimecodeInput";try{TimecodeInput.displayName="TimecodeInput",TimecodeInput.__docgenInfo={description:"",displayName:"TimecodeInput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"number"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!0,type:{name:"(newValue: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/TranscriptEditor/TimecodeInput.tsx#TimecodeInput"]={docgenInfo:TimecodeInput.__docgenInfo,name:"TimecodeInput",path:"src/aspects/Submissions/Elements/TranscriptEditor/TimecodeInput.tsx#TimecodeInput"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["startTenths","endTenths","text","onTextInput","onStartTenthsInput","onEndTenthsInput","onDelete"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function SubtitleBlock(_ref){var startTenths=_ref.startTenths,endTenths=_ref.endTenths,text=_ref.text,onTextInput=_ref.onTextInput,onStartTenthsInput=_ref.onStartTenthsInput,onEndTenthsInput=_ref.onEndTenthsInput,onDelete=_ref.onDelete,flexProps=_objectWithoutProperties(_ref,_excluded);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,Object.assign({},Object.assign({style:{padding:"8px 1ch",fontFamily:"monospace"}},flexProps),{children:[(0,jsx_runtime.jsx)(chakra_ui_textarea_esm.g,{width:"59ch",height:"96px",rows:3,cols:47,resize:"none",value:text,onInput:function onInput(e){onTextInput(e.target.value)}}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{resize:"none",height:"auto","aria-label":"Delete subtitle block",title:"Delete subtitle block",backgroundColor:"var(--chakra-colors-AppPage-pageBackground-light)",color:"var(--chakra-colors-gray-100)",_hover:{backgroundColor:"var(--chakra-colors-gray-100)",color:"DestructiveActionButton.400"},onClick:onDelete,children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"trash "})}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{shrink:0,width:"20ch",flexDirection:"column",justifyContent:"space-between",children:[(0,jsx_runtime.jsx)(TimecodeInput,{value:startTenths,onInput:onStartTenthsInput}),(0,jsx_runtime.jsx)(TimecodeInput,{value:endTenths,onInput:onEndTenthsInput})]})]}))}SubtitleBlock.displayName="SubtitleBlock";try{SubtitleBlock.displayName="SubtitleBlock",SubtitleBlock.__docgenInfo={description:"",displayName:"SubtitleBlock",props:{startTenths:{defaultValue:null,description:"",name:"startTenths",required:!0,type:{name:"number"}},endTenths:{defaultValue:null,description:"",name:"endTenths",required:!0,type:{name:"number"}},text:{defaultValue:null,description:"",name:"text",required:!0,type:{name:"string"}},onTextInput:{defaultValue:null,description:"",name:"onTextInput",required:!0,type:{name:"(newText: string) => void"}},onStartTenthsInput:{defaultValue:null,description:"",name:"onStartTenthsInput",required:!0,type:{name:"(newStartTenths: number) => void"}},onEndTenthsInput:{defaultValue:null,description:"",name:"onEndTenthsInput",required:!0,type:{name:"(newEndTenths: number) => void"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"As<any>"}},_hover:{defaultValue:null,description:"Styles for CSS selector `&:hover`",name:"_hover",required:!1,type:{name:"CSSObject"}},_active:{defaultValue:null,description:"Styles for CSS Selector `&:active`",name:"_active",required:!1,type:{name:"CSSObject"}},_focus:{defaultValue:null,description:"Styles for CSS selector `&:focus`",name:"_focus",required:!1,type:{name:"CSSObject"}},_highlighted:{defaultValue:null,description:"Styles for the highlighted state.",name:"_highlighted",required:!1,type:{name:"CSSObject"}},_focusWithin:{defaultValue:null,description:"Styles to apply when a child of this element has received focus\n- CSS Selector `&:focus-within`",name:"_focusWithin",required:!1,type:{name:"CSSObject"}},_focusVisible:{defaultValue:null,description:"Styles to apply when this element has received focus via tabbing\n- CSS Selector `&:focus-visible`",name:"_focusVisible",required:!1,type:{name:"CSSObject"}},_disabled:{defaultValue:null,description:"Styles to apply when this element is disabled. The passed styles are applied to these CSS selectors:\n- `&[aria-disabled=true]`\n- `&:disabled`\n- `&[data-disabled]`",name:"_disabled",required:!1,type:{name:"CSSObject"}},_readOnly:{defaultValue:null,description:"Styles for CSS Selector `&:readonly`",name:"_readOnly",required:!1,type:{name:"CSSObject"}},_before:{defaultValue:null,description:'Styles for CSS selector `&::before`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _before={{content:`""` }}/>\n```',name:"_before",required:!1,type:{name:"CSSObject"}},_after:{defaultValue:null,description:'Styles for CSS selector `&::after`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _after={{content:`""` }}/>\n```',name:"_after",required:!1,type:{name:"CSSObject"}},_empty:{defaultValue:null,description:"Styles for CSS selector `&:empty`",name:"_empty",required:!1,type:{name:"CSSObject"}},_expanded:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-expanded` is `true`\n- CSS selector `&[aria-expanded=true]`",name:"_expanded",required:!1,type:{name:"CSSObject"}},_checked:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `true`\n- CSS selector `&[aria-checked=true]`",name:"_checked",required:!1,type:{name:"CSSObject"}},_grabbed:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-grabbed` is `true`\n- CSS selector `&[aria-grabbed=true]`",name:"_grabbed",required:!1,type:{name:"CSSObject"}},_pressed:{defaultValue:null,description:'Styles for CSS Selector `&[aria-pressed=true]`\nTypically used to style the current "pressed" state of toggle buttons',name:"_pressed",required:!1,type:{name:"CSSObject"}},_invalid:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-invalid` is `true`\n- CSS selector `&[aria-invalid=true]`",name:"_invalid",required:!1,type:{name:"CSSObject"}},_valid:{defaultValue:null,description:"Styles for the valid state\n- CSS selector `&[data-valid], &[data-state=valid]`",name:"_valid",required:!1,type:{name:"CSSObject"}},_loading:{defaultValue:null,description:"Styles for CSS Selector `&[aria-busy=true]` or `&[data-loading=true]`.\nUseful for styling loading states",name:"_loading",required:!1,type:{name:"CSSObject"}},_selected:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-selected` is `true`\n\n- CSS selector `&[aria-selected=true]`",name:"_selected",required:!1,type:{name:"CSSObject"}},_hidden:{defaultValue:null,description:"Styles for CSS Selector `[hidden=true]`",name:"_hidden",required:!1,type:{name:"CSSObject"}},_autofill:{defaultValue:null,description:"Styles for CSS Selector `&:-webkit-autofill`",name:"_autofill",required:!1,type:{name:"CSSObject"}},_even:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(even)`",name:"_even",required:!1,type:{name:"CSSObject"}},_odd:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(odd)`",name:"_odd",required:!1,type:{name:"CSSObject"}},_first:{defaultValue:null,description:"Styles for CSS Selector `&:first-of-type`",name:"_first",required:!1,type:{name:"CSSObject"}},_last:{defaultValue:null,description:"Styles for CSS Selector `&:last-of-type`",name:"_last",required:!1,type:{name:"CSSObject"}},_notFirst:{defaultValue:null,description:"Styles for CSS Selector `&:not(:first-of-type)`",name:"_notFirst",required:!1,type:{name:"CSSObject"}},_notLast:{defaultValue:null,description:"Styles for CSS Selector `&:not(:last-of-type)`",name:"_notLast",required:!1,type:{name:"CSSObject"}},_visited:{defaultValue:null,description:"Styles for CSS Selector `&:visited`",name:"_visited",required:!1,type:{name:"CSSObject"}},_activeLink:{defaultValue:null,description:"Used to style the active link in a navigation\nStyles for CSS Selector `&[aria-current=page]`",name:"_activeLink",required:!1,type:{name:"CSSObject"}},_activeStep:{defaultValue:null,description:"Used to style the current step within a process\nStyles for CSS Selector `&[aria-current=step]`",name:"_activeStep",required:!1,type:{name:"CSSObject"}},_indeterminate:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `mixed`\n- CSS selector `&[aria-checked=mixed]`",name:"_indeterminate",required:!1,type:{name:"CSSObject"}},_groupHover:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is hovered",name:"_groupHover",required:!1,type:{name:"CSSObject"}},_peerHover:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is hovered",name:"_peerHover",required:!1,type:{name:"CSSObject"}},_groupFocus:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is focused",name:"_groupFocus",required:!1,type:{name:"CSSObject"}},_peerFocus:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is focused",name:"_peerFocus",required:!1,type:{name:"CSSObject"}},_groupFocusVisible:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has visible focus",name:"_groupFocusVisible",required:!1,type:{name:"CSSObject"}},_peerFocusVisible:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer`or `data-peer` has visible focus",name:"_peerFocusVisible",required:!1,type:{name:"CSSObject"}},_groupActive:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is active",name:"_groupActive",required:!1,type:{name:"CSSObject"}},_peerActive:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is active",name:"_peerActive",required:!1,type:{name:"CSSObject"}},_groupDisabled:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is disabled",name:"_groupDisabled",required:!1,type:{name:"CSSObject"}},_peerDisabled:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is disabled",name:"_peerDisabled",required:!1,type:{name:"CSSObject"}},_groupInvalid:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is invalid",name:"_groupInvalid",required:!1,type:{name:"CSSObject"}},_peerInvalid:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is invalid",name:"_peerInvalid",required:!1,type:{name:"CSSObject"}},_groupChecked:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is checked",name:"_groupChecked",required:!1,type:{name:"CSSObject"}},_peerChecked:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is checked",name:"_peerChecked",required:!1,type:{name:"CSSObject"}},_groupFocusWithin:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has focus within",name:"_groupFocusWithin",required:!1,type:{name:"CSSObject"}},_peerFocusWithin:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has focus within",name:"_peerFocusWithin",required:!1,type:{name:"CSSObject"}},_peerPlaceholderShown:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has placeholder shown",name:"_peerPlaceholderShown",required:!1,type:{name:"CSSObject"}},_placeholder:{defaultValue:null,description:"Styles for CSS Selector `&::placeholder`.",name:"_placeholder",required:!1,type:{name:"CSSObject"}},_placeholderShown:{defaultValue:null,description:"Styles for CSS Selector `&:placeholder-shown`.",name:"_placeholderShown",required:!1,type:{name:"CSSObject"}},_fullScreen:{defaultValue:null,description:"Styles for CSS Selector `&:fullscreen`.",name:"_fullScreen",required:!1,type:{name:"CSSObject"}},_selection:{defaultValue:null,description:"Styles for CSS Selector `&::selection`",name:"_selection",required:!1,type:{name:"CSSObject"}},_rtl:{defaultValue:null,description:'Styles for CSS Selector `[dir=rtl] &`\nIt is applied when a parent element or this element has `dir="rtl"`',name:"_rtl",required:!1,type:{name:"CSSObject"}},_ltr:{defaultValue:null,description:'Styles for CSS Selector `[dir=ltr] &`\nIt is applied when a parent element or this element has `dir="ltr"`',name:"_ltr",required:!1,type:{name:"CSSObject"}},_mediaDark:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-color-scheme: dark)`\nIt is used when the user has requested the system use a light or dark color theme.",name:"_mediaDark",required:!1,type:{name:"CSSObject"}},_mediaReduceMotion:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-reduced-motion: reduce)`\nIt is used when the user has requested the system to reduce the amount of animations.",name:"_mediaReduceMotion",required:!1,type:{name:"CSSObject"}},_dark:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_dark",required:!1,type:{name:"CSSObject"}},_light:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_light",required:!1,type:{name:"CSSObject"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/TranscriptEditor/SubtitleBlock.tsx#SubtitleBlock"]={docgenInfo:SubtitleBlock.__docgenInfo,name:"SubtitleBlock",path:"src/aspects/Submissions/Elements/TranscriptEditor/SubtitleBlock.tsx#SubtitleBlock"})}catch(__react_docgen_typescript_loader_error){}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return Transcript_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function Transcript_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Transcript_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Transcript_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Transcript_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _templateObject;function SubtitleBlockJITRenderer(_ref){var _ref$data=_ref.data,value=_ref$data.value,onInput=_ref$data.onInput,index=_ref.index,style=_ref.style,_value$index=value[index],startTenths=_value$index.startTenths,endTenths=_value$index.endTenths,text=_value$index.text;return _value$index.deleted?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{style,alignItems:"center",justifyContent:"center",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"PrimaryActionButton",leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"undo"}),onClick:function onClick(){return onInput((function(oldTranscript){return[].concat(_toConsumableArray(oldTranscript.slice(0,index)),[{startTenths,endTenths,text}],_toConsumableArray(oldTranscript.slice(index+1)))}))},children:"Restore deleted subtitle block"})}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{direction:"column",style,children:[(0,jsx_runtime.jsx)(SubtitleBlock,{startTenths,endTenths,text,onTextInput:function onTextInput(newText){return onInput((function(oldTranscript){return function validateNewText(newText){var lines=newText.split(/\r?\n/);return lines.length<=3&&lines.every((function(line,i){return line.length<=47&&(i===lines.length-1||line.length>0)}))}(newText)?[].concat(_toConsumableArray(oldTranscript.slice(0,index)),[{startTenths,endTenths,text:newText}],_toConsumableArray(oldTranscript.slice(index+1))):oldTranscript}))},onStartTenthsInput:function onStartTenthsInput(newStartTenths){return onInput((function(oldTranscript){return function validateNewStartTenths(oldTranscript,index,newStartTenths){return newStartTenths<oldTranscript[index].startTenths?0===index?newStartTenths>=0:newStartTenths>=oldTranscript[index-1].endTenths:newStartTenths<oldTranscript[index].endTenths}(oldTranscript,index,newStartTenths)?[].concat(_toConsumableArray(oldTranscript.slice(0,index)),[{startTenths:newStartTenths,endTenths,text}],_toConsumableArray(oldTranscript.slice(index+1))):oldTranscript}))},onEndTenthsInput:function onEndTenthsInput(newEndTenths){return onInput((function(oldTranscript){return function validateNewEndTenths(oldTranscript,index,newEndTenths){return newEndTenths>oldTranscript[index].endTenths?index===oldTranscript.length||newEndTenths<=oldTranscript[index+1].startTenths:newEndTenths>oldTranscript[index].startTenths}(oldTranscript,index,newEndTenths)?[].concat(_toConsumableArray(oldTranscript.slice(0,index)),[{startTenths,endTenths:newEndTenths,text}],_toConsumableArray(oldTranscript.slice(index+1))):oldTranscript}))},onDelete:function onDelete(){return onInput((function(oldTranscript){return[].concat(_toConsumableArray(oldTranscript.slice(0,index)),[{startTenths,endTenths,text,deleted:!0}],_toConsumableArray(oldTranscript.slice(index+1)))}))}}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{height:"16px",shrink:0,alignItems:"center",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{minWidth:"0px",paddingInline:"0px",height:"16px",lineHeight:"15px","aria-label":"Insert new subtitle block after this one",title:"Insert new subtitle block",color:"var(--chakra-colors-PrimaryActionButton-500)",background:"var(--chakra-colors-AppPage-pageBackground-light)",verticalAlign:"center",onClick:function onClick(){return onInput((function(oldTranscript){var newBlock=function getNewBlockAfter(oldTranscript,index){var prevEndTenths=index<0?0:oldTranscript[index].endTenths,nextStartTenths=index===oldTranscript.length-1?prevEndTenths+20:oldTranscript[index+1].startTenths;if(!(nextStartTenths<=prevEndTenths)){var midpointTenths=Math.trunc((prevEndTenths+nextStartTenths)/2);return{startTenths:Math.max(prevEndTenths,midpointTenths-10),endTenths:Math.min(nextStartTenths,midpointTenths+10),text:""}}alert("Adjust timecodes in surrounding subtitle blocks to make room for a new block.")}(oldTranscript,index);return newBlock?[].concat(_toConsumableArray(oldTranscript.slice(0,index+1)),[newBlock],_toConsumableArray(oldTranscript.slice(index+1))):oldTranscript}))},children:(0,jsx_runtime.jsx)(FAIcon.Z,{height:"16px",iconStyle:"s",icon:"plus-circle"})})})]})}function Transcript(_ref2){var value=_ref2.value,onInput=_ref2.onInput;return(0,jsx_runtime.jsx)(index_esm.t7,{height:400,width:"93ch",style:{margin:4},itemCount:value.length,itemData:{value,onInput},itemKey:function itemKey(i,_ref3){return _ref3.value[i].startTenths},itemSize:128,children:SubtitleBlockJITRenderer})}Transcript.displayName="Transcript";try{Transcript.displayName="Transcript",Transcript.__docgenInfo={description:"",displayName:"Transcript",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"SubtitlesArray"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!0,type:{name:"(transform: (oldTranscript: SubtitlesArray) => SubtitlesArray) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/TranscriptEditor/Transcript.tsx#Transcript"]={docgenInfo:Transcript.__docgenInfo,name:"Transcript",path:"src/aspects/Submissions/Elements/TranscriptEditor/Transcript.tsx#Transcript"})}catch(__react_docgen_typescript_loader_error){}function TranscriptEditor_slicedToArray(arr,i){return function TranscriptEditor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function TranscriptEditor_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function TranscriptEditor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return TranscriptEditor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TranscriptEditor_arrayLikeToArray(o,minLen)}(arr,i)||function TranscriptEditor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TranscriptEditor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function TranscriptEditor(_ref){var srtTranscript=_ref.srtTranscript,mediaUrl=_ref.mediaUrl,handleSaveEditor=_ref.handleSaveEditor,handleChange=_ref.handleChange,readOnly=_ref.readOnly,children=_ref.children,_useState=(0,react.useState)(function SRTParse(srtTranscript){return(new src.Z).fromSrt(srtTranscript).map((function(_ref2){var startTime=_ref2.startTime,endTime=_ref2.endTime,text=_ref2.text;return{startTenths:timecodeToTenths(startTime),endTenths:timecodeToTenths(endTime),text}}))}(srtTranscript)),_useState2=TranscriptEditor_slicedToArray(_useState,2),transcriptWIP=_useState2[0],setTranscriptWIP=_useState2[1];return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDirection:"row",justifyContent:"center",alignItems:"start",flexWrap:"wrap-reverse",children:[(0,jsx_runtime.jsx)(Transcript,{value:transcriptWIP,onInput:function onInput(transform){readOnly||(handleChange(),setTranscriptWIP(transform))}}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[(0,jsx_runtime.jsx)("video",{style:{width:"93ch",margin:0},src:mediaUrl,controls:!0,children:"This is a video"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{justifyContent:"flex-start",w:"100%",mt:2,children:[children,(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{colorScheme:"green",onClick:function onClick(){return handleSaveEditor(function SRTStringify(transcript){return(new src.Z).toSrt(transcript.filter((function(b){return!b.deleted})).map((function(_ref3,index){var startTenths=_ref3.startTenths,endTenths=_ref3.endTenths,text=_ref3.text;return{id:(index+1).toString(),startTime:tenthsToSRTTimecode(startTenths),endTime:tenthsToSRTTimecode(endTenths,{minusEpsilon:!0}),text}})))}(transcriptWIP))},children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"save",mr:2}),"Save Subtitles"]})]})]})]})}TranscriptEditor.displayName="TranscriptEditor";try{TranscriptEditor.displayName="TranscriptEditor",TranscriptEditor.__docgenInfo={description:"",displayName:"TranscriptEditor",props:{srtTranscript:{defaultValue:null,description:"",name:"srtTranscript",required:!0,type:{name:"string"}},mediaUrl:{defaultValue:null,description:"",name:"mediaUrl",required:!0,type:{name:"string"}},handleSaveEditor:{defaultValue:null,description:"",name:"handleSaveEditor",required:!0,type:{name:"(srtTranscript: any) => void"}},handleChange:{defaultValue:null,description:"",name:"handleChange",required:!0,type:{name:"() => void"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/TranscriptEditor/index.tsx#TranscriptEditor"]={docgenInfo:TranscriptEditor.__docgenInfo,name:"TranscriptEditor",path:"src/aspects/Submissions/Elements/TranscriptEditor/index.tsx#TranscriptEditor"})}catch(__react_docgen_typescript_loader_error){}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function EditSubtitles_slicedToArray(arr,i){return function EditSubtitles_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EditSubtitles_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function EditSubtitles_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EditSubtitles_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditSubtitles_arrayLikeToArray(o,minLen)}(arr,i)||function EditSubtitles_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditSubtitles_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}(0,urql_core.Ps)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation UpdateSubtitles($elementId: String!, $magicToken: String!, $subtitleText: String!) {\n        updateSubtitles(elementId: $elementId, magicToken: $magicToken, subtitleText: $subtitleText) {\n            message\n            success\n        }\n    }\n"])));var ValidationError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(ValidationError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(ValidationError);function ValidationError(message,errors){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ValidationError),(_this=_super.call(this,message)).name="ValidationError",_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ValidationError)}(_wrapNativeSuper(Error));function EditSubtitles(_ref){var videoS3URL=_ref.videoS3URL,data=_ref.data,elementId=_ref.elementId,magicToken=_ref.magicToken,refresh=_ref.refresh,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.MagicToken]=magicToken,_makeContext))}),[magicToken]),_useUpdateSubtitlesMu2=EditSubtitles_slicedToArray((0,graphql.yBO)(),2),updateSubtitles=(_useUpdateSubtitlesMu2[0],_useUpdateSubtitlesMu2[1]),toast=(0,chakra_ui_toast_esm.pm)(),_useState2=EditSubtitles_slicedToArray((0,react.useState)(!1),2),hasUnsavedChanges=_useState2[0],setHasUnsavedChanges=_useState2[1],_useState4=EditSubtitles_slicedToArray((0,react.useState)(!1),2),saveInProgress=_useState4[0],setSaveInProgress=_useState4[1],history=(0,react_router.k6)(),_AmazonS3Uri=amazon_s3_uri_default()(data.s3Url),_srtBucket=_AmazonS3Uri.bucket,_srtKey=_AmazonS3Uri.key,_AmazonS3Uri2=amazon_s3_uri_default()(videoS3URL),videoBucket=_AmazonS3Uri2.bucket,videoKey=_AmazonS3Uri2.key;esm.h.truthy(videoKey);var _validateAfterParsing,_validateBeforeParsing,videoUrl="https://"+videoBucket+".s3-eu-west-1.amazonaws.com/"+videoKey,subtitlesUrl="https://"+_srtBucket+".s3.eu-west-1.amazonaws.com/"+_srtKey,_useFetch=(0,dist_esm.ZP)(subtitlesUrl,{},[subtitlesUrl]),loading=_useFetch.loading,error=_useFetch.error,_useFetch$data=_useFetch.data,subtitlesData=void 0===_useFetch$data?"":_useFetch$data,validator={validateBeforeParsing:(_validateBeforeParsing=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_config,_plainFiles){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),_callee)}))),function validateBeforeParsing(_x,_x2){return _validateBeforeParsing.apply(this,arguments)}),validateAfterParsing:(_validateAfterParsing=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_config,file,_reader){var text,errors;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,file.text();case 2:if(text=_context2.sent,!(errors=srtValidator_default()(text)).length){_context2.next=6;break}throw new ValidationError("Invalid SRT file",errors);case 6:case"end":return _context2.stop()}}),_callee2)}))),function validateAfterParsing(_x3,_x4,_x5){return _validateAfterParsing.apply(this,arguments)})},_useFilePicker2=EditSubtitles_slicedToArray((0,use_file_picker_esm.s)({accept:".srt",limitFilesConfig:{max:1},validators:[validator]}),2),openFileSelector=_useFilePicker2[0],_useFilePicker2$=_useFilePicker2[1],filesContent=_useFilePicker2$.filesContent,clear=_useFilePicker2$.clear,errors=_useFilePicker2$.errors,_useState6=EditSubtitles_slicedToArray((0,react.useState)(!1),2),uploadingSrt=_useState6[0],setUploadingSrt=_useState6[1],validationErrors=(0,react.useMemo)((function(){return es.xHg(errors.filter((function(error){return"ValidationError"===error.name})).map((function(error){var _errors;return null!==(_errors=error.errors)&&void 0!==_errors?_errors:[]})))}),[errors]),saveSubtitles=(0,react.useCallback)(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(srtTranscript){var _result$data,_result$data$updateSu,result,_result$data$updateSu2,_result$data2,_result$data2$updateS;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,setSaveInProgress(!0),_context3.next=4,updateSubtitles({elementId,magicToken,subtitleText:srtTranscript},context);case 4:if(result=_context3.sent,null===(_result$data=result.data)||void 0===_result$data||null===(_result$data$updateSu=_result$data.updateSubtitles)||void 0===_result$data$updateSu||!_result$data$updateSu.success){_context3.next=9;break}toast({description:"Saved subtitles",status:"success"}),_context3.next=10;break;case 9:throw new Error(null!==(_result$data$updateSu2=null===(_result$data2=result.data)||void 0===_result$data2||null===(_result$data2$updateS=_result$data2.updateSubtitles)||void 0===_result$data2$updateS?void 0:_result$data2$updateS.message)&&void 0!==_result$data$updateSu2?_result$data$updateSu2:"Failed for unknown reason");case 10:return setHasUnsavedChanges(!1),_context3.next=13,refresh();case 13:_context3.next=19;break;case 15:_context3.prev=15,_context3.t0=_context3.catch(0),console.error("Failed to save subtitles",_context3.t0),toast({title:"Failed to save subtitles",description:_context3.t0.message,status:"error"});case 19:return _context3.prev=19,setSaveInProgress(!1),_context3.finish(19);case 22:case"end":return _context3.stop()}}),_callee3,null,[[0,15,19,22]])})));return function(_x6){return _ref2.apply(this,arguments)}}(),[context,elementId,magicToken,refresh,toast,updateSubtitles]);return(0,jsx_runtime.jsxs)(react.Fragment,{children:[loading?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):void 0,error||!loading&&!error&&!subtitlesData?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Could not load subtitles."}):void 0,subtitlesData?(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges}),(0,jsx_runtime.jsxs)(TranscriptEditor,{srtTranscript:subtitlesData,mediaUrl:videoUrl,handleSaveEditor:saveSubtitles,handleChange:function handleChange(){return setHasUnsavedChanges(!0)},readOnly:saveInProgress,children:[(0,jsx_runtime.jsx)(LinkButton.o6,{to:subtitlesUrl,colorScheme:"SecondaryActionButton",w:"100%",children:"Download .SRT file"}),filesContent.length?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{maxWidth:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{bgColor:"gray.100",p:2,flex:1,overflow:"hidden",children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{noOfLines:1,maxWidth:"100%",minWidth:0,title:filesContent[0].name,"aria-label":"Chosen file: "+filesContent[0].name,children:filesContent[0].name})}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{"aria-label":"Reset chosen .SRT file",title:"Reset chosen .SRT file",color:"DestructiveActionButton.400",onClick:clear,children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times"})}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{"aria-label":"Finish uploading chosen .SRT file",title:"Finish uploading chosen .SRT file",colorScheme:"ConfirmButton",isLoading:uploadingSrt,onClick:_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,setUploadingSrt(!0),_context4.next=4,saveSubtitles(filesContent[0].content);case 4:clear(),history.go(0),_context4.next=12;break;case 8:_context4.prev=8,_context4.t0=_context4.catch(0),console.error("Failed to save subtitles",_context4.t0),toast({status:"error",title:"Failed to save uploaded subtitles",description:_context4.t0.message});case 12:return _context4.prev=12,setUploadingSrt(!1),_context4.finish(12);case 15:case"end":return _context4.stop()}}),_callee4,null,[[0,8,12,15]])}))),children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"file-upload"})})]}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"PrimaryActionButton",leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"file-upload"}),onClick:openFileSelector,flex:1,children:"Upload .SRT file"}),errors.length?(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{title:"Problems found with .SRT file",color:"red.400","aria-label":"Problems found with .SRT file",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"exclamation-circle"})})}),(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.yk,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.QH,{}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.us,{}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.Yt,{children:"Errors found in .SRT file"}),(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.b,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{my:1,size:"sm",color:"DestructiveActionButton.400",onClick:clear,leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times"}),children:"Reset chosen file"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{children:validationErrors.map((function(problem,idx){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["Error (",problem.errorCode,") on line ",problem.lineNumber,": ",problem.message]})},idx)}))})]})]})]}):void 0]})]},subtitlesData)]}):void 0]})}EditSubtitles.displayName="EditSubtitles";try{EditSubtitles.displayName="EditSubtitles",EditSubtitles.__docgenInfo={description:"",displayName:"EditSubtitles",props:{videoS3URL:{defaultValue:null,description:"",name:"videoS3URL",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"SubtitleDetails"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},refresh:{defaultValue:null,description:"",name:"refresh",required:!0,type:{name:"() => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/EditSubtitles.tsx#EditSubtitles"]={docgenInfo:EditSubtitles.__docgenInfo,name:"EditSubtitles",path:"src/aspects/Submissions/Elements/EditSubtitles.tsx#EditSubtitles"})}catch(__react_docgen_typescript_loader_error){}function EditElement(_ref){var _latestVersion$data$t,_latestSubtitles$s3Ur,data=_ref.data,elementId=_ref.elementId,magicToken=_ref.magicToken,refresh=_ref.refresh,latestVersion=data&&data.length>0?data[data.length-1]:null,latestSubtitles=(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video?null==latestVersion?void 0:latestVersion.data.subtitles.en_US:null,latestTranscodeURL=(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video?null==latestVersion||null===(_latestVersion$data$t=latestVersion.data.transcode)||void 0===_latestVersion$data$t?void 0:_latestVersion$data$t.s3Url:null;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:latestTranscodeURL&&null!=latestSubtitles&&null!==(_latestSubtitles$s3Ur=latestSubtitles.s3Url)&&void 0!==_latestSubtitles$s3Ur&&_latestSubtitles$s3Ur.length?(0,jsx_runtime.jsx)(EditSubtitles,{videoS3URL:latestTranscodeURL,data:latestSubtitles,elementId,magicToken,refresh}):(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Subtitles are still being processed for this item. Please check back in 15 minutes."}):void 0})}try{EditElement.displayName="EditElement",EditElement.__docgenInfo={description:"",displayName:"EditElement",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ElementDataBlob"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},refresh:{defaultValue:null,description:"",name:"refresh",required:!0,type:{name:"() => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/EditElement.tsx#EditElement"]={docgenInfo:EditElement.__docgenInfo,name:"EditElement",path:"src/aspects/Submissions/Elements/EditElement.tsx#EditElement"})}catch(__react_docgen_typescript_loader_error){}var RenderElement=__webpack_require__("./src/aspects/Submissions/Elements/RenderElement.tsx");function UploadedElement_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadedElement_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadedElement_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadedElement_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function UploadedElement_slicedToArray(arr,i){return function UploadedElement_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadedElement_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UploadedElement_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UploadedElement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UploadedElement_arrayLikeToArray(o,minLen)}(arr,i)||function UploadedElement_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadedElement_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UploadedElement(_ref){var _data$content_Element,_data$content_Element2,magicToken=_ref.magicToken,loading=_ref.loading,error=_ref.error,data=_ref.data,refetch=_ref.refetch,_useState2=UploadedElement_slicedToArray((0,react.useState)(!1),2),disableRefresh=_useState2[0],setDisableRefresh=_useState2[1];(0,react.useEffect)((function(){disableRefresh&&UploadedElement_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,new Promise((function(resolve){return setTimeout(resolve,6e4)}));case 2:setDisableRefresh(!1);case 3:case"end":return _context.stop()}}),_callee)})))()}),[disableRefresh]);var refreshItem=function(){var _ref3=UploadedElement_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return setDisableRefresh(!0),_context2.next=3,refetch();case 3:case"end":return _context2.stop()}}),_callee2)})));return function refreshItem(){return _ref3.apply(this,arguments)}}();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[loading?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):void 0,error?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Could not load item."}):void 0,null!=data&&null!==(_data$content_Element=data.content_Element)&&void 0!==_data$content_Element&&_data$content_Element.length?null==data||null===(_data$content_Element2=data.content_Element)||void 0===_data$content_Element2?void 0:_data$content_Element2.map((function(item){var _item$data,_item$data2,_item$data3,_item$data3$data$subt,_item$data3$data$subt2;return item?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,alignItems:"flex-start",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:disableRefresh?"Please wait before refreshing again":"Refresh submitted item",children:(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{"aria-label":"Refresh submitted item",onClick:refreshItem,isDisabled:disableRefresh,size:"md",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"sync",mr:2})," Refresh"]})})}),null!=item&&item.data&&0!==(null==item?void 0:item.data.length)&&"video"===(null==item||null===(_item$data=item.data[item.data.length-1])||void 0===_item$data?void 0:_item$data.data.baseType)&&null!=item&&null!==(_item$data2=item.data[item.data.length-1])&&void 0!==_item$data2&&_item$data2.data.subtitles.en_US&&null!=item&&null!==(_item$data3=item.data[item.data.length-1])&&void 0!==_item$data3&&null!==(_item$data3$data$subt=_item$data3.data.subtitles.en_US)&&void 0!==_item$data3$data$subt&&null!==(_item$data3$data$subt2=_item$data3$data$subt.s3Url)&&void 0!==_item$data3$data$subt2&&_item$data3$data$subt2.length?void 0:(0,jsx_runtime.jsx)(RenderElement.Z,{data:item.data}),(0,jsx_runtime.jsx)(EditElement,{data:item.data,elementId:item.id,magicToken,refresh:refreshItem})]},item.id):void 0})):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{mt:5,children:"No item has been submitted yet."})]})}try{UploadedElement.displayName="UploadedElement",UploadedElement.__docgenInfo={description:"",displayName:"UploadedElement",props:{magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!0,type:{name:"boolean"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"GetElementQuery | undefined"}},refetch:{defaultValue:null,description:"",name:"refetch",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/UploadedElement.tsx#UploadedElement"]={docgenInfo:UploadedElement.__docgenInfo,name:"UploadedElement",path:"src/aspects/Submissions/Elements/UploadedElement.tsx#UploadedElement"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.join.js");var chakra_ui_form_control_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+form-control@1.5.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js"),chakra_ui_input_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+input@1.4.1_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/input/dist/chakra-ui-input.esm.js"),lib=__webpack_require__("../node_modules/.pnpm/@uppy+aws-s3-multipart@2.2.0_@uppy+core@2.1.4/node_modules/@uppy/aws-s3-multipart/lib/index.js"),lib_default=__webpack_require__.n(lib),core_lib=__webpack_require__("../node_modules/.pnpm/@uppy+core@2.1.4/node_modules/@uppy/core/lib/index.js"),core_lib_default=__webpack_require__.n(core_lib),formik_esm=(__webpack_require__("../node_modules/.pnpm/@uppy+drag-drop@2.0.6_@uppy+core@2.1.4/node_modules/@uppy/drag-drop/dist/style.css"),__webpack_require__("../node_modules/.pnpm/@uppy+status-bar@2.1.2_@uppy+core@2.1.4/node_modules/@uppy/status-bar/dist/style.css"),__webpack_require__("../node_modules/.pnpm/formik@2.2.9_react@17.0.2/node_modules/formik/dist/formik.esm.js")),chakra_ui_icons_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js"),chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_checkbox_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+checkbox@1.6.5_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/checkbox/dist/chakra-ui-checkbox.esm.js");function UploadAgreementField(_ref){var uploadAgreementText=_ref.uploadAgreementText,uploadAgreementUrl=_ref.uploadAgreementUrl,color=(0,chakra_ui_color_mode_esm.ff)("black","white");return uploadAgreementText||uploadAgreementUrl?(0,jsx_runtime.jsx)(formik_esm.gN,{name:"agree",validate:function validate(inValue){var error;return inValue||(error="Please agree to the upload conditions."),error},children:function children(_ref2){var form=_ref2.form,field=_ref2.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.agree&&!!form.touched.agree,isRequired:!0,mb:4,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"agree",fontWeight:"bold",children:"Submission agreement"}),uploadAgreementUrl?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{mb:1,children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",fontSize:"sm",mr:2,mb:1,verticalAlign:"middle"}),"Read the agreement at:"," ",(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.rU,{isExternal:!0,href:uploadAgreementUrl,children:[uploadAgreementUrl,(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ExternalLinkIcon,{})]})]}):void 0,uploadAgreementText?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:uploadAgreementText}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{mt:4,children:[(0,jsx_runtime.jsx)(chakra_ui_checkbox_esm.XZ,Object.assign({},field,{id:"agree"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{color,children:"I agree to the upload conditions."})]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.agree})]})}}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}try{UploadAgreementField.displayName="UploadAgreementField",UploadAgreementField.__docgenInfo={description:"",displayName:"UploadAgreementField",props:{uploadAgreementText:{defaultValue:null,description:"",name:"uploadAgreementText",required:!1,type:{name:"string"}},uploadAgreementUrl:{defaultValue:null,description:"",name:"uploadAgreementUrl",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/UploadAgreementField.tsx#UploadAgreementField"]={docgenInfo:UploadAgreementField.__docgenInfo,name:"UploadAgreementField",path:"src/aspects/Submissions/Elements/UploadAgreementField.tsx#UploadAgreementField"})}catch(__react_docgen_typescript_loader_error){}function UploadFileForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadFileForm_slicedToArray(arr,i){return function UploadFileForm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadFileForm_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||UploadFileForm_unsupportedIterableToArray(arr,i)||function UploadFileForm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadFileForm_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return UploadFileForm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UploadFileForm_arrayLikeToArray(o,minLen):void 0}}function UploadFileForm_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DragDrop=react.lazy((function(){return __webpack_require__.e(6256).then(__webpack_require__.bind(__webpack_require__,"../node_modules/.pnpm/@uppy+react@2.1.2_@uppy+core@2.1.4+react@17.0.2/node_modules/@uppy/react/index.mjs")).then((function(x){return{default:x.DragDrop}}))})),StatusBar=react.lazy((function(){return __webpack_require__.e(6256).then(__webpack_require__.bind(__webpack_require__,"../node_modules/.pnpm/@uppy+react@2.1.2_@uppy+core@2.1.4+react@17.0.2/node_modules/@uppy/react/index.mjs")).then((function(x){return{default:x.StatusBar}}))}));function UploadFileForm(_ref){var elementId=_ref.elementId,magicToken=_ref.magicToken,allowedFileTypes=_ref.allowedFileTypes,uploadAgreementText=_ref.uploadAgreementText,uploadAgreementUrl=_ref.uploadAgreementUrl,handleFormSubmitted=_ref.handleFormSubmitted,existingAltText=_ref.existingAltText,isVideo=_ref.isVideo,toast=(0,chakra_ui_toast_esm.pm)(),_useState2=UploadFileForm_slicedToArray((0,react.useState)([]),2),files=_useState2[0],setFiles=_useState2[1],context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.MagicToken]=magicToken,_makeContext))}),[magicToken]),submitUploadableElement=UploadFileForm_slicedToArray((0,graphql.$T9)(),2)[1],uppy=(0,react.useMemo)((function(){var uppy=new(core_lib_default())({id:"required-content-item-upload",meta:{uploadableId:elementId},allowMultipleUploads:!1,restrictions:{allowedFileTypes,maxNumberOfFiles:1,minNumberOfFiles:1},autoProceed:!1});return null==uppy||uppy.use(lib_default(),{limit:4,companionUrl:"string"==typeof(void 0).VITE_COMPANION_BASE_URL?(void 0).VITE_COMPANION_BASE_URL:""}),uppy}),[allowedFileTypes,elementId]),updateFiles=(0,react.useCallback)((function(){var validNameRegex=/^[a-zA-Z0-9.!*'()\-_ ]+$/;if(uppy){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=UploadFileForm_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(null==uppy?void 0:uppy.getFiles().filter((function(file){return!validNameRegex.test(file.name)})));try{for(_iterator.s();!(_step=_iterator.n()).done;){var invalidFile=_step.value;toast({status:"error",description:"Invalid file name. File names must only contain letters, numbers, spaces and the following special characters: !*'()-_"}),uppy.removeFile(invalidFile.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}setFiles(uppy.getFiles())}}),[toast,uppy]);return(0,react.useEffect)((function(){null==uppy||uppy.on("file-added",updateFiles),null==uppy||uppy.on("file-removed",updateFiles)}),[toast,updateFiles,uppy]),(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}),children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{agree:!1,altText:isVideo?"":existingAltText},onSubmit:function(){var _ref2=function UploadFileForm_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadFileForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadFileForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values){var result,_submitResult$data,_submitResult$data$su,submitResult,_ref3,_submitResult$data$su2,_submitResult$data2,_submitResult$data2$s,_submitResult$error,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(uppy){_context.next=2;break}throw new Error("No Uppy instance");case 2:return _context.prev=2,_context.next=5,uppy.upload();case 5:result=_context.sent,_context.next=14;break;case 8:return _context.prev=8,_context.t0=_context.catch(2),console.error("Failed to upload file",_context.t0),toast({status:"error",description:"Failed to upload file. Please try again."}),uppy.reset(),_context.abrupt("return");case 14:if(!(result.failed.length>0||result.successful.length<1)){_context.next=19;break}return console.error("Failed to upload file",result.failed),toast({status:"error",description:"Failed to upload file. Please try again later."}),uppy.reset(),_context.abrupt("return");case 19:return _context.prev=19,_context.next=22,submitUploadableElement({elementData:{s3Url:result.successful[0].uploadURL,altText:values.altText},magicToken,elementId},context);case 22:if(!(submitResult=_context.sent).error&&null!==(_submitResult$data=submitResult.data)&&void 0!==_submitResult$data&&null!==(_submitResult$data$su=_submitResult$data.submitUploadableElement)&&void 0!==_submitResult$data$su&&_submitResult$data$su.success){_context.next=25;break}throw new Error(null!==(_ref3=null!==(_submitResult$data$su2=null===(_submitResult$data2=submitResult.data)||void 0===_submitResult$data2||null===(_submitResult$data2$s=_submitResult$data2.submitUploadableElement)||void 0===_submitResult$data2$s?void 0:_submitResult$data2$s.message)&&void 0!==_submitResult$data$su2?_submitResult$data$su2:null===(_submitResult$error=submitResult.error)||void 0===_submitResult$error?void 0:_submitResult$error.message)&&void 0!==_ref3?_ref3:"Unknown reason for failure.");case 25:toast({status:"success",description:"Uploaded item successfully."}),uppy.reset(),handleFormSubmitted&&handleFormSubmitted(),_context.next=36;break;case 30:return _context.prev=30,_context.t1=_context.catch(19),console.error("Failed to submit item",_context.t1),toast({status:"error",title:"Failed to submit item.",description:null!==(_e$message=null===_context.t1||void 0===_context.t1?void 0:_context.t1.message)&&void 0!==_e$message?_e$message:"Please try again later."}),uppy.reset(),_context.abrupt("return");case 36:case"end":return _context.stop()}}),_callee,null,[[2,8],[19,30]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref4){var dirty=_ref4.dirty,isSubmitting=_ref4.isSubmitting,isValid=_ref4.isValid;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges:dirty}),(0,jsx_runtime.jsxs)(formik_esm.l0,{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",marginTop:"2em"},children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!files,isRequired:!0,children:[(0,jsx_runtime.jsx)(DragDrop,{uppy,allowMultipleFiles:!1}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.Q6,{children:["File types: ",allowedFileTypes.join(", ")]})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{mb:4,children:files.map((function(file){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[file.name," ",(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){return null==uppy?void 0:uppy.removeFile(file.id)},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times",color:"DestructiveActionButton.400"})})]},file.id)}))}),isVideo?void 0:(0,jsx_runtime.jsx)(formik_esm.gN,{name:"altText",validate:function validate(inValue){return null!=inValue&&inValue.length?void 0:"Missing alternative text for accessibility"},children:function children(_ref5){var form=_ref5.form,field=_ref5.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.altText&&!!form.touched.altText,isRequired:!0,mt:5,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"altText",children:"Alternative text (for accessibility)"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},field,{id:"altText"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.altText})]})}}),(0,jsx_runtime.jsx)(UploadAgreementField,{uploadAgreementText,uploadAgreementUrl}),(0,jsx_runtime.jsx)(StatusBar,{uppy,hideAfterFinish:!0,hideUploadButton:!0}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{alignSelf:"flex-start",colorScheme:"ConfirmButton",isLoading:isSubmitting,type:"submit",isDisabled:!isValid||1!==files.length,children:"Submit"})]})]})}})})}UploadFileForm.displayName="UploadFileForm";try{UploadFileForm.displayName="UploadFileForm",UploadFileForm.__docgenInfo={description:"",displayName:"UploadFileForm",props:{elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},allowedFileTypes:{defaultValue:null,description:"",name:"allowedFileTypes",required:!0,type:{name:"string[]"}},uploadAgreementText:{defaultValue:null,description:"",name:"uploadAgreementText",required:!1,type:{name:"string"}},uploadAgreementUrl:{defaultValue:null,description:"",name:"uploadAgreementUrl",required:!1,type:{name:"string"}},existingAltText:{defaultValue:null,description:"",name:"existingAltText",required:!1,type:{name:"string"}},handleFormSubmitted:{defaultValue:null,description:"",name:"handleFormSubmitted",required:!1,type:{name:"(() => void)"}},isVideo:{defaultValue:null,description:"",name:"isVideo",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/UploadFileForm.tsx#UploadFileForm"]={docgenInfo:UploadFileForm.__docgenInfo,name:"UploadFileForm",path:"src/aspects/Submissions/Elements/UploadFileForm.tsx#UploadFileForm"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.js");var UploadLinkForm_excluded=["dirty"];function UploadLinkForm_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function UploadLinkForm_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function UploadLinkForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadLinkForm_slicedToArray(arr,i){return function UploadLinkForm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadLinkForm_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UploadLinkForm_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UploadLinkForm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UploadLinkForm_arrayLikeToArray(o,minLen)}(arr,i)||function UploadLinkForm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadLinkForm_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UploadLinkForm(_ref){var _existingLink$text,_existingLink$url,elementId=_ref.elementId,magicToken=_ref.magicToken,uploadAgreementText=_ref.uploadAgreementText,uploadAgreementUrl=_ref.uploadAgreementUrl,handleFormSubmitted=_ref.handleFormSubmitted,existingLink=_ref.existingLink,toast=(0,chakra_ui_toast_esm.pm)(),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.MagicToken]=magicToken,_makeContext))}),[magicToken]),_useSubmitUploadableE2=UploadLinkForm_slicedToArray((0,graphql.$T9)(),2),submitUploadableElement=(_useSubmitUploadableE2[0],_useSubmitUploadableE2[1]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{text:null!==(_existingLink$text=null==existingLink?void 0:existingLink.text)&&void 0!==_existingLink$text?_existingLink$text:null,url:null!==(_existingLink$url=null==existingLink?void 0:existingLink.url)&&void 0!==_existingLink$url?_existingLink$url:null,agree:null},onSubmit:function(){var _ref2=function UploadLinkForm_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadLinkForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadLinkForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values){var _submitResult$data,_submitResult$data$su,submitResult,_ref3,_submitResult$data$su2,_submitResult$data2,_submitResult$data2$s,_submitResult$error,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,submitUploadableElement({elementData:{text:values.text,url:values.url},magicToken,elementId},context);case 3:if(!(submitResult=_context.sent).error&&null!==(_submitResult$data=submitResult.data)&&void 0!==_submitResult$data&&null!==(_submitResult$data$su=_submitResult$data.submitUploadableElement)&&void 0!==_submitResult$data$su&&_submitResult$data$su.success){_context.next=6;break}throw new Error(null!==(_ref3=null!==(_submitResult$data$su2=null===(_submitResult$data2=submitResult.data)||void 0===_submitResult$data2||null===(_submitResult$data2$s=_submitResult$data2.submitUploadableElement)||void 0===_submitResult$data2$s?void 0:_submitResult$data2$s.message)&&void 0!==_submitResult$data$su2?_submitResult$data$su2:null===(_submitResult$error=submitResult.error)||void 0===_submitResult$error?void 0:_submitResult$error.message)&&void 0!==_ref3?_ref3:"Unknown reason for failure.");case 6:toast({status:"success",description:"Submitted item successfully."}),handleFormSubmitted&&handleFormSubmitted(),_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(0),console.error("Failed to submit item",_context.t0),toast({status:"error",title:"Failed to submit item.",description:null!==(_e$message=null===_context.t0||void 0===_context.t0?void 0:_context.t0.message)&&void 0!==_e$message?_e$message:"Please try again later."});case 14:case"end":return _context.stop()}}),_callee,null,[[0,10]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref4){var dirty=_ref4.dirty,props=UploadLinkForm_objectWithoutProperties(_ref4,UploadLinkForm_excluded);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges:dirty}),(0,jsx_runtime.jsxs)(formik_esm.l0,{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",marginTop:"2em"},children:[(0,jsx_runtime.jsx)(formik_esm.gN,{name:"text",children:function children(_ref5){var form=_ref5.form,field=_ref5.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.text&&!!form.touched.text,isRequired:!0,mt:5,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"text",children:"Text"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},field,{id:"text"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Display text for the link."}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.text})]})}}),(0,jsx_runtime.jsx)(formik_esm.gN,{name:"url",validate:function validate(inValue){if(!inValue)return"Missing URL";try{new URL(inValue)}catch(e){return"Invalid URL"}},children:function children(_ref6){var form=_ref6.form,field=_ref6.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.url&&!!form.touched.url,isRequired:!0,mt:5,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"url",children:"URL"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},field,{id:"url"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"URL of the link."}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.url})]})}}),(0,jsx_runtime.jsx)(UploadAgreementField,{uploadAgreementText,uploadAgreementUrl}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mt:4,colorScheme:"ConfirmButton",isLoading:props.isSubmitting,type:"submit",isDisabled:!props.isValid||!dirty,children:"Submit"})]})]})}})})}try{UploadLinkForm.displayName="UploadLinkForm",UploadLinkForm.__docgenInfo={description:"",displayName:"UploadLinkForm",props:{elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},uploadAgreementText:{defaultValue:null,description:"",name:"uploadAgreementText",required:!1,type:{name:"string"}},uploadAgreementUrl:{defaultValue:null,description:"",name:"uploadAgreementUrl",required:!1,type:{name:"string"}},handleFormSubmitted:{defaultValue:null,description:"",name:"handleFormSubmitted",required:!1,type:{name:"(() => void)"}},existingLink:{defaultValue:null,description:"",name:"existingLink",required:!0,type:{name:"{ text: string; url: string; } | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/UploadLinkForm.tsx#UploadLinkForm"]={docgenInfo:UploadLinkForm.__docgenInfo,name:"UploadLinkForm",path:"src/aspects/Submissions/Elements/UploadLinkForm.tsx#UploadLinkForm"})}catch(__react_docgen_typescript_loader_error){}var Markdown=__webpack_require__("./src/aspects/Chakra/Markdown.tsx"),UploadTextForm_excluded=["dirty"];function UploadTextForm_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function UploadTextForm_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function UploadTextForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadTextForm_slicedToArray(arr,i){return function UploadTextForm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadTextForm_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UploadTextForm_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UploadTextForm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UploadTextForm_arrayLikeToArray(o,minLen)}(arr,i)||function UploadTextForm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadTextForm_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UploadTextForm(_ref){var _existingText$text,elementId=_ref.elementId,magicToken=_ref.magicToken,uploadAgreementText=_ref.uploadAgreementText,uploadAgreementUrl=_ref.uploadAgreementUrl,existingText=_ref.existingText,handleFormSubmitted=_ref.handleFormSubmitted,toast=(0,chakra_ui_toast_esm.pm)(),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.MagicToken]=magicToken,_makeContext))}),[magicToken]),_useSubmitUploadableE2=UploadTextForm_slicedToArray((0,graphql.$T9)(),2),submitUploadableElement=(_useSubmitUploadableE2[0],_useSubmitUploadableE2[1]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{text:null!==(_existingText$text=null==existingText?void 0:existingText.text)&&void 0!==_existingText$text?_existingText$text:null},onSubmit:function(){var _ref2=function UploadTextForm_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadTextForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadTextForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values){var _submitResult$data,_submitResult$data$su,submitResult,_ref3,_submitResult$data$su2,_submitResult$data2,_submitResult$data2$s,_submitResult$error,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,submitUploadableElement({elementData:{text:values.text},magicToken,elementId},context);case 3:if(!(submitResult=_context.sent).error&&null!==(_submitResult$data=submitResult.data)&&void 0!==_submitResult$data&&null!==(_submitResult$data$su=_submitResult$data.submitUploadableElement)&&void 0!==_submitResult$data$su&&_submitResult$data$su.success){_context.next=6;break}throw new Error(null!==(_ref3=null!==(_submitResult$data$su2=null===(_submitResult$data2=submitResult.data)||void 0===_submitResult$data2||null===(_submitResult$data2$s=_submitResult$data2.submitUploadableElement)||void 0===_submitResult$data2$s?void 0:_submitResult$data2$s.message)&&void 0!==_submitResult$data$su2?_submitResult$data$su2:null===(_submitResult$error=submitResult.error)||void 0===_submitResult$error?void 0:_submitResult$error.message)&&void 0!==_ref3?_ref3:"Unknown reason for failure.");case 6:toast({status:"success",description:"Submitted item successfully."}),handleFormSubmitted&&handleFormSubmitted(),_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(0),console.error("Failed to submit item",_context.t0),toast({status:"error",title:"Failed to submit item.",description:null!==(_e$message=null===_context.t0||void 0===_context.t0?void 0:_context.t0.message)&&void 0!==_e$message?_e$message:"Please try again later."});case 14:case"end":return _context.stop()}}),_callee,null,[[0,10]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref4){var dirty=_ref4.dirty,props=UploadTextForm_objectWithoutProperties(_ref4,UploadTextForm_excluded);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges:dirty}),(0,jsx_runtime.jsxs)(formik_esm.l0,{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",marginTop:"2em"},children:[(0,jsx_runtime.jsx)(formik_esm.gN,{name:"text",children:function children(_ref5){var form=_ref5.form,field=_ref5.field;return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{justifyContent:"center",alignItems:"flex-start",w:"100%",flexWrap:"wrap",spacing:6,mb:3,children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.text&&!!form.touched.text,isRequired:!0,mb:10,maxW:"40em",children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"text",fontWeight:"bold",children:"Text"}),(0,jsx_runtime.jsx)(chakra_ui_textarea_esm.g,Object.assign({transition:"none"},field,{id:"text"})),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.Q6,{children:["Text may be formatted using"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{isExternal:!0,href:"https://daringfireball.net/projects/markdown/basics",children:"Markdown"}),".",(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("br",{}),"Using Markdown you can bold text, create bulleted or numbered lists, link to another website, embed external images and more.",(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("br",{}),"On Midspace, you can also use Markdown to embed YouTube videos, using the same syntax as for images."]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.text})]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{maxW:"40em",alignItems:"flex-start",mb:10,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h4",fontSize:"md",textAlign:"left",children:"Preview"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontStyle:"italic",fontSize:"sm",children:[(0,jsx_runtime.jsx)(chakra_ui_icons_esm.InfoIcon,{mr:1,mb:1}),"Please note, as per any ordinary website, text will reflow automatically to fit the size of the reader's screen."]}),(0,jsx_runtime.jsx)(Markdown.U,{children:field.value})]})]})}}),(0,jsx_runtime.jsx)(UploadAgreementField,{uploadAgreementText,uploadAgreementUrl}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{my:4,colorScheme:"ConfirmButton",isLoading:props.isSubmitting,type:"submit",isDisabled:!props.isValid||!dirty,children:"Submit"})]})]})}})})}try{UploadTextForm.displayName="UploadTextForm",UploadTextForm.__docgenInfo={description:"",displayName:"UploadTextForm",props:{elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},uploadAgreementText:{defaultValue:null,description:"",name:"uploadAgreementText",required:!1,type:{name:"string"}},uploadAgreementUrl:{defaultValue:null,description:"",name:"uploadAgreementUrl",required:!1,type:{name:"string"}},existingText:{defaultValue:null,description:"",name:"existingText",required:!0,type:{name:"{ text: string; } | null"}},handleFormSubmitted:{defaultValue:null,description:"",name:"handleFormSubmitted",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/UploadTextForm.tsx#UploadTextForm"]={docgenInfo:UploadTextForm.__docgenInfo,name:"UploadTextForm",path:"src/aspects/Submissions/Elements/UploadTextForm.tsx#UploadTextForm"})}catch(__react_docgen_typescript_loader_error){}var SubmitElementPage_templateObject,UploadUrlForm_excluded=["dirty"];function UploadUrlForm_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function UploadUrlForm_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function UploadUrlForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadUrlForm_slicedToArray(arr,i){return function UploadUrlForm_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadUrlForm_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UploadUrlForm_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UploadUrlForm_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UploadUrlForm_arrayLikeToArray(o,minLen)}(arr,i)||function UploadUrlForm_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadUrlForm_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UploadUrlForm(_ref){var _existingUrl$url,_existingUrl$title,elementId=_ref.elementId,magicToken=_ref.magicToken,uploadAgreementText=_ref.uploadAgreementText,uploadAgreementUrl=_ref.uploadAgreementUrl,handleFormSubmitted=_ref.handleFormSubmitted,existingUrl=_ref.existingUrl,toast=(0,chakra_ui_toast_esm.pm)(),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.MagicToken]=magicToken,_makeContext))}),[magicToken]),_useSubmitUploadableE2=UploadUrlForm_slicedToArray((0,graphql.$T9)(),2),submitUploadableElement=(_useSubmitUploadableE2[0],_useSubmitUploadableE2[1]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{url:null!==(_existingUrl$url=null==existingUrl?void 0:existingUrl.url)&&void 0!==_existingUrl$url?_existingUrl$url:null,title:null!==(_existingUrl$title=null==existingUrl?void 0:existingUrl.title)&&void 0!==_existingUrl$title?_existingUrl$title:null,agree:null},onSubmit:function(){var _ref2=function UploadUrlForm_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadUrlForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadUrlForm_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values){var _submitResult$data,_submitResult$data$su,submitResult,_ref3,_submitResult$data$su2,_submitResult$data2,_submitResult$data2$s,_submitResult$error,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,submitUploadableElement({elementData:{url:values.url,title:values.title},magicToken,elementId},context);case 3:if(!(submitResult=_context.sent).error&&null!==(_submitResult$data=submitResult.data)&&void 0!==_submitResult$data&&null!==(_submitResult$data$su=_submitResult$data.submitUploadableElement)&&void 0!==_submitResult$data$su&&_submitResult$data$su.success){_context.next=6;break}throw new Error(null!==(_ref3=null!==(_submitResult$data$su2=null===(_submitResult$data2=submitResult.data)||void 0===_submitResult$data2||null===(_submitResult$data2$s=_submitResult$data2.submitUploadableElement)||void 0===_submitResult$data2$s?void 0:_submitResult$data2$s.message)&&void 0!==_submitResult$data$su2?_submitResult$data$su2:null===(_submitResult$error=submitResult.error)||void 0===_submitResult$error?void 0:_submitResult$error.message)&&void 0!==_ref3?_ref3:"Unknown reason for failure.");case 6:toast({status:"success",description:"Submitted item successfully."}),handleFormSubmitted&&handleFormSubmitted(),_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(0),console.error("Failed to submit item",_context.t0),toast({status:"error",title:"Failed to submit item.",description:null!==(_e$message=null===_context.t0||void 0===_context.t0?void 0:_context.t0.message)&&void 0!==_e$message?_e$message:"Please try again later."});case 14:case"end":return _context.stop()}}),_callee,null,[[0,10]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref4){var dirty=_ref4.dirty,props=UploadUrlForm_objectWithoutProperties(_ref4,UploadUrlForm_excluded);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges:dirty}),(0,jsx_runtime.jsxs)(formik_esm.l0,{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",marginTop:"2em"},children:[(0,jsx_runtime.jsx)(formik_esm.gN,{name:"url",validate:function validate(inValue){if(!inValue)return"Missing URL";try{new URL(inValue)}catch(e){return"Invalid URL"}},children:function children(_ref5){var form=_ref5.form,field=_ref5.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.url&&!!form.touched.url,isRequired:!0,mt:5,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"url",children:"URL"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},field,{id:"url"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"URL."}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.url})]})}}),(0,jsx_runtime.jsx)(formik_esm.gN,{name:"title",validate:function validate(inValue){return null!=inValue&&inValue.length?void 0:"Missing title for accessibility"},children:function children(_ref6){var form=_ref6.form,field=_ref6.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.title&&!!form.touched.title,isRequired:!0,mt:5,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"title",children:"URL Title (for accessibility)"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},field,{id:"title"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Title."}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.title})]})}}),(0,jsx_runtime.jsx)(UploadAgreementField,{uploadAgreementText,uploadAgreementUrl}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mt:4,colorScheme:"ConfirmButton",isLoading:props.isSubmitting,type:"submit",isDisabled:!props.isValid||!dirty,children:"Submit"})]})]})}})})}try{UploadUrlForm.displayName="UploadUrlForm",UploadUrlForm.__docgenInfo={description:"",displayName:"UploadUrlForm",props:{elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},uploadAgreementText:{defaultValue:null,description:"",name:"uploadAgreementText",required:!1,type:{name:"string"}},uploadAgreementUrl:{defaultValue:null,description:"",name:"uploadAgreementUrl",required:!1,type:{name:"string"}},handleFormSubmitted:{defaultValue:null,description:"",name:"handleFormSubmitted",required:!1,type:{name:"(() => void)"}},existingUrl:{defaultValue:null,description:"",name:"existingUrl",required:!0,type:{name:"{ url: string; title?: string | undefined; } | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/Elements/UploadUrlForm.tsx#UploadUrlForm"]={docgenInfo:UploadUrlForm.__docgenInfo,name:"UploadUrlForm",path:"src/aspects/Submissions/Elements/UploadUrlForm.tsx#UploadUrlForm"})}catch(__react_docgen_typescript_loader_error){}function SubmitElementPage_slicedToArray(arr,i){return function SubmitElementPage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SubmitElementPage_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function SubmitElementPage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SubmitElementPage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SubmitElementPage_arrayLikeToArray(o,minLen)}(arr,i)||function SubmitElementPage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SubmitElementPage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SubmitElementPage(_ref){var _uploadableElement$it,magicToken=_ref.magicToken,itemId=_ref.itemId,elementId=_ref.elementId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.Submitter,_makeContext[auth.k.MagicToken]=magicToken,_makeContext))}),[magicToken]),_useGetUploadAgreemen3=SubmitElementPage_slicedToArray((0,graphql.d7s)({requestPolicy:"network-only",context}),1)[0],uploadAgreementLoading=_useGetUploadAgreemen3.fetching,uploadAgreementError=_useGetUploadAgreemen3.error,uploadAgreementData=_useGetUploadAgreemen3.data;(0,useQueryErrorToast.Z)(uploadAgreementError,!1,"SubmitItemPage -- upload agreement");var _useGetElementQuery2=SubmitElementPage_slicedToArray((0,graphql.YF7)({variables:{accessToken:magicToken,elementId},context,requestPolicy:"network-only"}),2),_useGetElementQuery2$=_useGetElementQuery2[0],loading=_useGetElementQuery2$.fetching,error=_useGetElementQuery2$.error,data=_useGetElementQuery2$.data,_refetch=_useGetElementQuery2[1];(0,useQueryErrorToast.Z)(error,!1,"SubmitItemPage -- content item");var uploadableElement=(0,react.useMemo)((function(){return null!=data&&data.content_Element&&1===data.content_Element.length?data.content_Element[0]:null}),[data]),title=(0,useTitle.Z)("Content Submission"),uploadAgreementText=(0,react.useMemo)((function(){var _uploadAgreementData$,_uploadAgreementData$2;return null!==(_uploadAgreementData$=null==uploadAgreementData||null===(_uploadAgreementData$2=uploadAgreementData.getUploadAgreement)||void 0===_uploadAgreementData$2?void 0:_uploadAgreementData$2.agreementText)&&void 0!==_uploadAgreementData$?_uploadAgreementData$:void 0}),[uploadAgreementData]),uploadAgreementUrl=(0,react.useMemo)((function(){var _uploadAgreementData$3,_uploadAgreementData$4;return null!==(_uploadAgreementData$3=null==uploadAgreementData||null===(_uploadAgreementData$4=uploadAgreementData.getUploadAgreement)||void 0===_uploadAgreementData$4?void 0:_uploadAgreementData$4.agreementUrl)&&void 0!==_uploadAgreementData$3?_uploadAgreementData$3:void 0}),[uploadAgreementData]),formSubmitted=(0,react.useCallback)((function(){_refetch()}),[_refetch]),form=(0,react.useMemo)((function(){var _ref2,_uploadableElement$da,_uploadableElement$da2;if(!uploadableElement)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"No matching item found."});var existingData=null!==(_ref2=uploadableElement&&null!==(_uploadableElement$da=uploadableElement.data)&&void 0!==_uploadableElement$da&&_uploadableElement$da.length?null===(_uploadableElement$da2=uploadableElement.data[uploadableElement.data.length-1])||void 0===_uploadableElement$da2?void 0:_uploadableElement$da2.data:void 0)&&void 0!==_ref2?_ref2:null;switch(uploadableElement.typeName){case graphql.bK7.Abstract:case graphql.bK7.Text:return(0,jsx_runtime.jsx)(UploadTextForm,{elementId,magicToken,uploadAgreementText,uploadAgreementUrl,existingText:existingData,handleFormSubmitted:formSubmitted});case graphql.bK7.ImageFile:case graphql.bK7.PaperFile:case graphql.bK7.PosterFile:return(0,jsx_runtime.jsx)(UploadFileForm,{magicToken,elementId:uploadableElement.id,allowedFileTypes:[".pdf",".png",".jpg"],uploadAgreementText,uploadAgreementUrl,handleFormSubmitted:formSubmitted,existingAltText:null==existingData?void 0:existingData.altText,isVideo:!1});case graphql.bK7.Link:case graphql.bK7.LinkButton:case graphql.bK7.PaperLink:case graphql.bK7.VideoLink:case graphql.bK7.AudioLink:return(0,jsx_runtime.jsx)(UploadLinkForm,{elementId,magicToken,uploadAgreementText,uploadAgreementUrl,handleFormSubmitted:formSubmitted,existingLink:existingData});case graphql.bK7.ImageUrl:case graphql.bK7.PaperUrl:case graphql.bK7.PosterUrl:case graphql.bK7.VideoUrl:case graphql.bK7.AudioUrl:case graphql.bK7.ExternalEventLink:return(0,jsx_runtime.jsx)(UploadUrlForm,{elementId,magicToken,uploadAgreementText,uploadAgreementUrl,handleFormSubmitted:formSubmitted,existingUrl:existingData});case graphql.bK7.VideoBroadcast:case graphql.bK7.VideoCountdown:case graphql.bK7.VideoFile:case graphql.bK7.VideoFiller:case graphql.bK7.VideoPrepublish:case graphql.bK7.VideoSponsorsFiller:case graphql.bK7.VideoTitles:return(0,jsx_runtime.jsx)(UploadFileForm,{magicToken,elementId:uploadableElement.id,allowedFileTypes:[".mp4",".mkv",".webm"],uploadAgreementText,uploadAgreementUrl,handleFormSubmitted:formSubmitted,existingAltText:null==existingData?void 0:existingData.altText,isVideo:!0});case graphql.bK7.AudioFile:return(0,jsx_runtime.jsx)(UploadFileForm,{magicToken,elementId:uploadableElement.id,allowedFileTypes:[".mp3",".wav",".ogg",".flac"],uploadAgreementText,uploadAgreementUrl,handleFormSubmitted:formSubmitted,existingAltText:null==existingData?void 0:existingData.altText,isVideo:!1});default:return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Unrecognised upload type."})}}),[elementId,uploadableElement,magicToken,uploadAgreementText,uploadAgreementUrl,formSubmitted]),person=null!=data&&data.collection_ProgramPerson.length?null==data?void 0:data.collection_ProgramPerson[0]:void 0;return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.M5,{pt:6,children:[title,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:6,alignItems:"flex-start",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h1",id:"page-heading",fontSize:"4xl",textAlign:"left",children:person?"Welcome "+person.name:"Submission"}),(0,jsx_runtime.jsxs)(LinkButton.Qj,{to:"/submissions/"+magicToken+"/item/"+itemId,colorScheme:"PrimaryActionButton",size:"md",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-left",mr:2})," Back to submission"]}),uploadableElement&&(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",fontSize:"2xl",textAlign:"left",children:null!==(_uploadableElement$it=uploadableElement.item)&&void 0!==_uploadableElement$it&&_uploadableElement$it.title&&uploadableElement.name?uploadableElement.item.title+": "+uploadableElement.name:"Content Submission"}),loading&&!data||uploadAgreementLoading&&!uploadAgreementData?(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{})}):error||uploadAgreementError?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{mt:4,children:"An error occurred while loading data."}):uploadableElement?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[0===uploadableElement.uploadsRemaining?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{mt:4,children:"No upload attempts remaining for this item. Please contact your conference organisers if you need to upload another version."}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[uploadableElement.typeName===graphql.bK7.VideoBroadcast?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.QI,{children:[uploadableElement.uploadsRemaining?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[uploadableElement.uploadsRemaining," upload attempt",uploadableElement.uploadsRemaining>1?"s":""," remaining."]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Your conference organisers should have sent instructions regarding the maximum duration of your video."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Maximum 1080p video quality"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:["Please refer to"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{href:"https://resources.midspace.app/video-subtitles/uploading-videos/",isExternal:!0,children:"these instructions"})," ","for further information."]})]})}):void 0,uploadableElement.typeName===graphql.bK7.VideoPrepublish||uploadableElement.typeName===graphql.bK7.VideoFile?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.QI,{children:[uploadableElement.uploadsRemaining?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[uploadableElement.uploadsRemaining," upload attempt",uploadableElement.uploadsRemaining>1?"s":""," remaining."]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Your conference organisers should have sent instructions regarding the maximum duration of your video."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Maximum 1080p video quality"})]})}):void 0,uploadableElement.typeName===graphql.bK7.AudioFile?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.QI,{children:[uploadableElement.uploadsRemaining?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[uploadableElement.uploadsRemaining," upload attempt",uploadableElement.uploadsRemaining>1?"s":""," remaining."]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Your conference organisers should have sent instructions regarding the maximum duration of your audio file."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Accepted file types are MP3, OGG/VORBIS, WAV and FLAC. For others to be able to listen in-browser (i.e. without downloading the file) please use MP3 format."})]})}):void 0,form]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.iz,{}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,alignItems:"flex-start",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"xl",textAlign:"left",children:"Previously submitted"}),(0,jsx_runtime.jsx)(UploadedElement,{magicToken,data,error:!!error,loading,refetch:function refetch(){return _refetch()}})]})]}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{mt:4,children:"No matching item."})]})]})}(0,urql_core.Ps)(SubmitElementPage_templateObject||(SubmitElementPage_templateObject=function SubmitElementPage_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query GetElement($accessToken: String!, $elementId: uuid!) {\n        content_Element(where: { id: { _eq: $elementId } }) {\n            typeName\n            data\n            name\n            id\n            uploadsRemaining\n            itemId\n            item {\n                id\n                title\n            }\n        }\n        collection_ProgramPerson(where: { accessToken: { _eq: $accessToken } }) {\n            id\n            name\n        }\n    }\n\n    mutation submitUploadableElement($elementData: jsonb!, $magicToken: String!, $elementId: uuid!) {\n        submitUploadableElement(data: $elementData, magicToken: $magicToken, elementId: $elementId) {\n            message\n            success\n        }\n    }\n\n    query GetUploadAgreement {\n        getUploadAgreement {\n            agreementText\n            agreementUrl\n        }\n    }\n"]))),SubmitElementPage.displayName="SubmitElementPage";try{SubmitElementPage.displayName="SubmitElementPage",SubmitElementPage.__docgenInfo={description:"",displayName:"SubmitElementPage",props:{magicToken:{defaultValue:null,description:"",name:"magicToken",required:!0,type:{name:"string"}},itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Submissions/SubmitElementPage.tsx#SubmitElementPage"]={docgenInfo:SubmitElementPage.__docgenInfo,name:"SubmitElementPage",path:"src/aspects/Submissions/SubmitElementPage.tsx#SubmitElementPage"})}catch(__react_docgen_typescript_loader_error){}}}]);