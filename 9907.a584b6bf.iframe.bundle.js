"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[9907],{"./src/aspects/Conference/Manage/Broadcast/ManageBroadcasts.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ManageBroadcast});var _templateObject,chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),chakra_ui_tabs_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+tabs@1.6.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/tabs/dist/chakra-ui-tabs.esm.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),PageNotFound=__webpack_require__("./src/aspects/Errors/PageNotFound.tsx"),useTitle=__webpack_require__("./src/aspects/Hooks/useTitle.tsx"),RequireRole=__webpack_require__("./src/aspects/Conference/RequireRole.tsx"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx"),chakra_ui_hooks_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+hooks@1.8.2_react@17.0.2/node_modules/@chakra-ui/hooks/dist/chakra-ui-hooks.esm.js")),chakra_ui_spinner_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js"),chakra_ui_alert_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+alert@1.3.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/alert/dist/chakra-ui-alert.esm.js"),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),chakra_ui_table_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+table@1.3.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/table/dist/chakra-ui-table.esm.js"),chakra_ui_modal_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+modal@1.10.7_d24435ba52f1f88b08cc54a1f1d4e56f/node_modules/@chakra-ui/modal/dist/chakra-ui-modal.esm.js"),auth=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),lib=__webpack_require__("../node_modules/.pnpm/react-player@2.9.0_react@17.0.2/node_modules/react-player/lib/index.js"),urql_core=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),graphql=__webpack_require__("./src/generated/graphql.tsx"),FAIcon=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),make_context=__webpack_require__("./src/aspects/GQL/make-context.ts"),useQueryErrorToast=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BroadcastRooms(_ref){var conferenceId=_ref.conferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.ConferenceOrganizer,_makeContext),["room_Room"])}),[]),_useGetChannelStacksQ2=_slicedToArray((0,graphql.lhK)({variables:{conferenceId},context}),2),_useGetChannelStacksQ3=_useGetChannelStacksQ2[0],data=_useGetChannelStacksQ3.data,loading=_useGetChannelStacksQ3.fetching,error=_useGetChannelStacksQ3.error,refetch=_useGetChannelStacksQ2[1];(0,useQueryErrorToast.Z)(error,!1);var toStreamingEndpoint=(0,react.useCallback)((function(endpointUri,cloudFrontDomain){var url=new URL(endpointUri);return url.hostname=cloudFrontDomain,url.toString()}),[]),_useState2=_slicedToArray((0,react.useState)(null),2),streamUri=_useState2[0],setStreamUri=_useState2[1],streamDisclosure=(0,chakra_ui_hooks_esm.qY)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[loading?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):void 0,error?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"error",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{mr:2,children:"Failed to load data"}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{children:[error.name,": ",error.message]})]}):void 0,(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{"aria-label":"Refresh rooms",onClick:function onClick(){return refetch()},size:"sm",children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"sync",iconStyle:"s"})}),(0,jsx_runtime.jsxs)(chakra_ui_table_esm.iA,{variant:"simple",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Rn,{children:"Rooms that are set up for broadcast"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.hr,{children:(0,jsx_runtime.jsxs)(chakra_ui_table_esm.Tr,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Name"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"HLS URL"})]})}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.p3,{children:null==data?void 0:data.room_Room.map((function(room){return(0,jsx_runtime.jsxs)(chakra_ui_table_esm.Tr,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:room.name}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{isDisabled:!room.channelStack,onClick:function onClick(){room.channelStack&&(setStreamUri(toStreamingEndpoint(room.channelStack.endpointUri,room.channelStack.cloudFrontDomain)),streamDisclosure.onOpen())},children:"Preview stream"})})]},room.id)}))})]}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isCentered:!0,isOpen:streamDisclosure.isOpen,onClose:streamDisclosure.onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Stream preview"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:streamUri?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{mb:2,fontSize:"sm",children:streamUri}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{mb:2,children:(0,jsx_runtime.jsx)(lib.Z,{width:"600",height:"auto",url:streamUri,config:{file:{hlsOptions:{}}},controls:!0})})]}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"No stream preview available."})})]})]})]})}(0,urql_core.Ps)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query GetChannelStacks($conferenceId: uuid!) {\n        room_Room(where: { channelStack: {}, conferenceId: { _eq: $conferenceId } }) {\n            channelStack {\n                cloudFrontDomain\n                endpointUri\n                id\n                roomId\n            }\n            name\n            id\n            conferenceId\n        }\n    }\n"])));try{BroadcastRooms.displayName="BroadcastRooms",BroadcastRooms.__docgenInfo={description:"",displayName:"BroadcastRooms",props:{conferenceId:{defaultValue:null,description:"",name:"conferenceId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Broadcast/BroadcastRooms.tsx#BroadcastRooms"]={docgenInfo:BroadcastRooms.__docgenInfo,name:"BroadcastRooms",path:"src/aspects/Conference/Manage/Broadcast/BroadcastRooms.tsx#BroadcastRooms"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js");var ConferenceConfiguration_templateObject,amazon_s3_uri=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri_default=__webpack_require__.n(amazon_s3_uri),QueryWrapper=__webpack_require__("./src/aspects/GQL/QueryWrapper.tsx");function ConferenceConfiguration_slicedToArray(arr,i){return function ConferenceConfiguration_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ConferenceConfiguration_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ConferenceConfiguration_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ConferenceConfiguration_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ConferenceConfiguration_arrayLikeToArray(o,minLen)}(arr,i)||function ConferenceConfiguration_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ConferenceConfiguration_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function Configuration(_ref){var conferenceId=_ref.conferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.ConferenceOrganizer,_makeContext),["conference_Configuration"])}),[]),conferenceConfigurationsResult=ConferenceConfiguration_slicedToArray((0,graphql.ACO)({variables:{conferenceId},context}),1)[0];return(0,jsx_runtime.jsx)(QueryWrapper.Z,{queryResult:conferenceConfigurationsResult,getter:function getter(result){return result.conference_Configuration},children:function children(configurations){var _configurations$find$,_configurations$find;return(0,jsx_runtime.jsx)(FillerVideoConfiguration,{fillerVideos:null!==(_configurations$find$=null===(_configurations$find=configurations.find((function(x){return x.key===graphql.jbg.FillerVideos})))||void 0===_configurations$find?void 0:_configurations$find.value)&&void 0!==_configurations$find$?_configurations$find$:null,update:function update(){}})}})}function FillerVideoConfiguration(_ref2){var fillerVideos=_ref2.fillerVideos,fillerVideoUrl=(0,react.useMemo)((function(){try{if(!fillerVideos)return null;var _AmazonS3URI=new(amazon_s3_uri_default())(fillerVideos[0]),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key;return"https://s3."+(void 0).VITE_AWS_REGION+".amazonaws.com/"+bucket+"/"+key}catch(_unused){return null}}),[fillerVideos]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{minW:"50vw",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",size:"md",textAlign:"left",mb:3,children:"Filler video"}),fillerVideoUrl?(0,jsx_runtime.jsx)(lib.Z,{url:fillerVideoUrl,controls:!0,width:"300px",height:"auto",maxHeight:"400px",style:{borderRadius:"10px",overflow:"hidden"}}):(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"error",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{mr:2,children:"No video selected yet."})]})]})}(0,urql_core.Ps)(ConferenceConfiguration_templateObject||(ConferenceConfiguration_templateObject=function ConferenceConfiguration_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query ConferenceConfiguration_GetConferenceConfigurations($conferenceId: uuid!) {\n        conference_Configuration(where: { conferenceId: { _eq: $conferenceId } }) {\n            ...ConferenceConfiguration_ConferenceConfigurations\n        }\n    }\n\n    fragment ConferenceConfiguration_ConferenceConfigurations on conference_Configuration {\n        conferenceId\n        key\n        value\n    }\n"]))),Configuration.displayName="Configuration",FillerVideoConfiguration.displayName="FillerVideoConfiguration";try{Configuration.displayName="Configuration",Configuration.__docgenInfo={description:"",displayName:"Configuration",props:{conferenceId:{defaultValue:null,description:"",name:"conferenceId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Broadcast/ConferenceConfiguration.tsx#Configuration"]={docgenInfo:Configuration.__docgenInfo,name:"Configuration",path:"src/aspects/Conference/Manage/Broadcast/ConferenceConfiguration.tsx#Configuration"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js");var EventVonageControls_templateObject,chakra_ui_toast_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+toast@1.5.4_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/toast/dist/chakra-ui-toast.esm.js"),chakra_ui_form_control_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+form-control@1.5.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js"),chakra_ui_select_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+select@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/select/dist/chakra-ui-select.esm.js"),formik_esm=__webpack_require__("../node_modules/.pnpm/formik@2.2.9_react@17.0.2/node_modules/formik/dist/formik.esm.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function EventVonageControls_slicedToArray(arr,i){return function EventVonageControls_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EventVonageControls_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function EventVonageControls_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EventVonageControls_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EventVonageControls_arrayLikeToArray(o,minLen)}(arr,i)||function EventVonageControls_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EventVonageControls_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EventVonageControls(_ref){var conferenceId=_ref.conferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.ConferenceOrganizer,_makeContext),[])}),[]),data=EventVonageControls_slicedToArray((0,graphql.QMQ)({variables:{conferenceId},context}),1)[0].data,stopEventBroadcastMutation=EventVonageControls_slicedToArray((0,graphql.fPu)(),2)[1],toast=(0,chakra_ui_toast_esm.pm)(),options=(0,react.useMemo)((function(){return null==data?void 0:data.schedule_Event.map((function(event){var _objectObject;return null!==(_objectObject=(0,jsx_runtime.jsx)("option",{value:event.id,children:event.item?event.item.title+" ("+event.name+")":event.name},event.id))&&void 0!==_objectObject?_objectObject:[]}))}),[null==data?void 0:data.schedule_Event]);return(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{eventId:null},onSubmit:function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values){var _headers,_result$data,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,values.eventId){_context.next=3;break}throw new Error("No event selected");case 3:return _context.next=5,stopEventBroadcastMutation({eventId:values.eventId},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=auth.Z.ConferenceOrganizer,_headers)}});case 5:if(result=_context.sent,null===(_result$data=result.data)||void 0===_result$data||!_result$data.stopEventBroadcast){_context.next=10;break}toast({status:"success",title:"Stopped "+result.data.stopEventBroadcast.broadcastsStopped+" broadcasts"}),_context.next=11;break;case 10:throw new Error("No response from server");case 11:_context.next=16;break;case 13:_context.prev=13,_context.t0=_context.catch(0),toast({status:"error",title:"Failed to stop broadcasts",description:_context.t0.toString()});case 16:case"end":return _context.stop()}}),_callee,null,[[0,13]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref3){var isSubmitting=_ref3.isSubmitting;return(0,jsx_runtime.jsx)(formik_esm.l0,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{alignItems:"center",children:[(0,jsx_runtime.jsx)(formik_esm.gN,{name:"eventId",children:function children(_ref4){var field=_ref4.field,form=_ref4.form;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{w:"auto",maxW:"400px",isInvalid:!!form.errors.eventId&&!!form.touched.eventId,isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"eventId",children:"Event"}),(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,Object.assign({},field,{id:"eventId",placeholder:"Choose event",children:options}))]})}}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{type:"submit",isLoading:isSubmitting,mt:4,children:"Stop any ongoing broadcasts"})]})})}})}(0,urql_core.Ps)(EventVonageControls_templateObject||(EventVonageControls_templateObject=function EventVonageControls_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query EventVonageControls_GetEvents($conferenceId: uuid!) {\n        schedule_Event(where: { conferenceId: { _eq: $conferenceId }, modeName: { _eq: LIVESTREAM } }) {\n            id\n            name\n            conferenceId\n            modeName\n            itemId\n            item {\n                id\n                title\n            }\n        }\n    }\n    mutation EventVonageControls_StopEventBroadcast($eventId: uuid!) {\n        stopEventBroadcast(eventId: $eventId) {\n            broadcastsStopped\n        }\n    }\n"]))),EventVonageControls.displayName="EventVonageControls";try{EventVonageControls.displayName="EventVonageControls",EventVonageControls.__docgenInfo={description:"",displayName:"EventVonageControls",props:{conferenceId:{defaultValue:null,description:"",name:"conferenceId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Broadcast/EventVonageControls.tsx#EventVonageControls"]={docgenInfo:EventVonageControls.__docgenInfo,name:"EventVonageControls",path:"src/aspects/Conference/Manage/Broadcast/EventVonageControls.tsx#EventVonageControls"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.some.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.set.js");var LivestreamMonitoring_templateObject,chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_tooltip_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+tooltip@1.4.6_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/tooltip/dist/chakra-ui-tooltip.esm.js"),chakra_ui_system_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+system@1.10.3_922a85da57e3646a57465b7970b0de85/node_modules/@chakra-ui/system/dist/chakra-ui-system.esm.js"),chakra_ui_progress_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+progress@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/progress/dist/chakra-ui-progress.esm.js"),es=__webpack_require__("../node_modules/.pnpm/ramda@0.28.0/node_modules/ramda/es/index.js"),react_router_dom=__webpack_require__("../node_modules/.pnpm/react-router-dom@5.3.0_react@17.0.2/node_modules/react-router-dom/esm/react-router-dom.js"),AuthParameters=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),useRealTime=__webpack_require__("./src/aspects/Hooks/useRealTime.tsx"),PresenceStateProvider=__webpack_require__("./src/aspects/Realtime/PresenceStateProvider.tsx"),MathUtils=__webpack_require__("./src/aspects/Utils/MathUtils.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return LivestreamMonitoring_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||LivestreamMonitoring_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LivestreamMonitoring_slicedToArray(arr,i){return function LivestreamMonitoring_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LivestreamMonitoring_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||LivestreamMonitoring_unsupportedIterableToArray(arr,i)||function LivestreamMonitoring_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LivestreamMonitoring_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return LivestreamMonitoring_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LivestreamMonitoring_arrayLikeToArray(o,minLen):void 0}}function LivestreamMonitoring_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var HlsPlayer=react.lazy((function(){return Promise.all([__webpack_require__.e(2138),__webpack_require__.e(6338)]).then(__webpack_require__.bind(__webpack_require__,"./src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx"))}));function LivestreamMonitoring(){var _response$data2,_response$data5,_response$data6,conference=(0,useConference.fk)(),conferencePath=(0,AuthParameters.h)().conferencePath,now=(0,useRealTime.$)(1e3),nowRoundedDown=(0,MathUtils.N4)(now,6e4),nowRoundedUp=(0,MathUtils.FG)(now,6e4),nowStr=(0,react.useMemo)((function(){return new Date(nowRoundedDown+3e3).toISOString()}),[nowRoundedDown]),laterStr=(0,react.useMemo)((function(){return new Date((0,MathUtils.FG)(now+12e5,6e4)).toISOString()}),[now]),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.ConferenceOrganizer,_makeContext),[])}),[]),response=LivestreamMonitoring_slicedToArray((0,graphql.i0u)({variables:{conferenceId:conference.id,now:nowStr,later:laterStr},context}),1)[0],shadow=(0,chakra_ui_color_mode_esm.ff)("md","light-md"),bgColor=(0,chakra_ui_color_mode_esm.ff)("gray.200","gray.600"),_useState2=LivestreamMonitoring_slicedToArray((0,react.useState)([]),2),liveEvents=_useState2[0],setLiveEvents=_useState2[1];(0,react.useEffect)((function(){var _response$data;if(null!==(_response$data=response.data)&&void 0!==_response$data&&_response$data.liveEvents){var newData=response.data.liveEvents;setLiveEvents((function(oldLiveEvents){return es.HCG([function(x,y){return x.scheduledStartTimeMs-y.scheduledStartTimeMs},function(x,y){return x.event.room.priority-y.event.room.priority},function(x,y){return x.event.room.name.localeCompare(y.event.room.name)}],newData.map((function(event){var currentSeverityLevel,people=event.eventPeople.map((function(eventPerson){var _eventPerson$person$r,_eventPerson$person$r2,_eventPerson$person$r3,_eventPerson$person$r4,_event$eventVonageSes,_event$eventVonageSes2,registrantId=null!==(_eventPerson$person$r=null===(_eventPerson$person$r2=eventPerson.person.registrant)||void 0===_eventPerson$person$r2?void 0:_eventPerson$person$r2.id)&&void 0!==_eventPerson$person$r?_eventPerson$person$r:void 0,userId=null!==(_eventPerson$person$r3=null===(_eventPerson$person$r4=eventPerson.person.registrant)||void 0===_eventPerson$person$r4?void 0:_eventPerson$person$r4.userId)&&void 0!==_eventPerson$person$r3?_eventPerson$person$r3:void 0,isCameraOrMicConnected=!!registrantId&&!(null===(_event$eventVonageSes=event.eventVonageSession)||void 0===_event$eventVonageSes||!_event$eventVonageSes.participantStreams.some((function(x){return x.registrantId===registrantId&&"camera"===x.vonageStreamType}))),isScreenshareConnected=!!registrantId&&!(null===(_event$eventVonageSes2=event.eventVonageSession)||void 0===_event$eventVonageSes2||!_event$eventVonageSes2.participantStreams.some((function(x){return x.registrantId===registrantId&&"screen"===x.vonageStreamType})));return{person:eventPerson,registrantId,userId,isCameraOrMicConnected,isScreenshareConnected}})),scheduledStartTimeMs=Date.parse(event.scheduledStartTime),endTimeMs=Date.parse(event.scheduledEndTime),peopleForSeverity=people.filter((function(x){return!!x.userId})),oldEvent=oldLiveEvents.find((function(x){return x.event.id===event.id})),previouslyIsLive=!(null==oldEvent||!oldEvent.isLive),isLive=scheduledStartTimeMs<=nowRoundedUp&&nowRoundedUp<=endTimeMs,previousSeverityLevel=null==oldEvent?void 0:oldEvent.severityLevel,atLeastOnePersonListed=peopleForSeverity.length>0,atLeastOnePresenterListed=peopleForSeverity.some((function(x){return x.person.roleName===graphql.hQl.Presenter})),atLeastOneChairListed=peopleForSeverity.some((function(x){return x.person.roleName===graphql.hQl.Chair})),atLeastOnePresenterMicOrCamOn=peopleForSeverity.some((function(x){return x.person.roleName===graphql.hQl.Presenter&&x.isCameraOrMicConnected})),atLeastOneChairMicOrCamOn=peopleForSeverity.some((function(x){return x.person.roleName===graphql.hQl.Chair&&x.isCameraOrMicConnected})),severityLevel=currentSeverityLevel=!atLeastOnePersonListed||atLeastOnePresenterListed&&!atLeastOnePresenterMicOrCamOn||atLeastOneChairListed&&!atLeastOneChairMicOrCamOn?atLeastOnePresenterMicOrCamOn&&atLeastOneChairListed&&!atLeastOneChairMicOrCamOn?1:atLeastOnePresenterListed&&!atLeastOnePresenterMicOrCamOn&&atLeastOneChairMicOrCamOn?2:!atLeastOnePersonListed||atLeastOnePresenterMicOrCamOn||atLeastOneChairMicOrCamOn?4:3:0;return previouslyIsLive&&void 0!==previousSeverityLevel&&previousSeverityLevel<=0&&3===currentSeverityLevel?severityLevel=-2:previouslyIsLive&&void 0!==previousSeverityLevel&&previousSeverityLevel<=2&&1===currentSeverityLevel&&(severityLevel=-1),{event,scheduledStartTimeMs,endTimeMs,isLive,severityLevel,previousSeverityLevel,people}})))}))}}),[nowRoundedUp,null===(_response$data2=response.data)||void 0===_response$data2?void 0:_response$data2.liveEvents]);var listEl=(0,react.useMemo)((function(){var eventsByRoom=es.vMG((function(x){return x.event.room.id}),liveEvents.filter((function(x){return x.endTimeMs>nowRoundedUp}))),sortedRooms=es.HCG([function(x,y){return x.priority-y.priority},function(x,y){return x.name.localeCompare(y.name)}],es.mNm((function(x){return x.id}),liveEvents.map((function(x){return x.event.room}))));return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rj,{w:"100%",templateColumns:"repeat(auto-fit, 300px)",gap:2,justifyContent:"center",children:sortedRooms.map((function(room){var events=eventsByRoom[room.id];if(events){var _sortedEvents$,sortedEvents=es.MRu((function(x){return x.scheduledStartTimeMs}),events),shouldHighlight=events.some((function(x){return x.scheduledStartTimeMs<nowRoundedDown+6e5&&x.severityLevel>=2}));return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.P4,{bgColor,shadow,p:2,border:shouldHighlight?"3px solid":void 0,borderColor:shouldHighlight?"red.400":void 0,children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{w:"100%",alignItems:"flex-start",spacing:1,children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"sm",mr:"auto",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",mb:1,fontSize:"80%"})," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{as:react_router_dom.rU,to:conferencePath+"/room/"+room.id,children:room.name})]}),shouldHighlight?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Urgent: An event in this room is not ready.",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"exclamation-triangle",color:"red.400",mb:1,pr:1,fontSize:"xl"})}):void 0]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{w:"100%",p:0,m:0,pl:3,overflowX:"auto",overflowY:"hidden",children:[null!==(_sortedEvents$=sortedEvents[0])&&void 0!==_sortedEvents$&&_sortedEvents$.isLive?void 0:(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"No currently live backstage",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"r",icon:"dot-circle",color:"gray.400",fontSize:"4xl",lineHeight:0})}),sortedEvents.map((function(event,idx){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{href:"#"+event.event.id,children:(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{mb:1,children:[(0,jsx_runtime.jsxs)(chakra_ui_system_esm.m$.span,{fontWeight:"bold",mr:3,children:[new Date(event.event.scheduledStartTime).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})," to ",new Date(event.event.scheduledEndTime).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})]}),-2===event.severityLevel?"Backstage appears to have ended early.":-1===event.severityLevel?"Backstage appears to be ok. Chair may have chosen to leave.":0===event.severityLevel?"Backstage is ok.":1===event.severityLevel?"Presenter is ready but the chair is not.":2===event.severityLevel?"No presenter is available but the chair is ready.":3===event.severityLevel?"Neither a presenter nor a chair is ready.":"No registered people are listed!"]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:event.event.name+(event.event.item?": "+event.event.item.title:"")})]}),children:(0,jsx_runtime.jsx)(FAIcon.Z,{lineHeight:0,iconStyle:"s",icon:-2===event.severityLevel?"stop-circle":-1===event.severityLevel?"play-circle":0===event.severityLevel?"check-circle":1===event.severityLevel?"question-circle":2===event.severityLevel?"exclamation-triangle":3===event.severityLevel?"times-circle":"exclamation",color:-2===event.severityLevel?"gray.400":-1===event.severityLevel||0===event.severityLevel?"green.400":1===event.severityLevel||2===event.severityLevel?"yellow.600":(event.severityLevel,"red.400"),fontSize:0===idx&&event.isLive?"4xl":"lg"})})},event.event.id)}))]}),shouldHighlight?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{pt:1,color:"red",fontSize:"sm",textAlign:"center",w:"100%",children:"Urgent: An event in this room is not ready."}):void 0]})},room.id)}return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}))}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{spacing:4,children:liveEvents.map((function(event){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{bgColor,shadow,p:4,children:(0,jsx_runtime.jsx)(BackstageTile,{event:event.event})},event.event.id)}))})]})}),[bgColor,conferencePath,liveEvents,nowRoundedDown,nowRoundedUp,shadow]),secondsToNextRefresh=Math.round((nowRoundedUp-now)/1e3),_useState4=LivestreamMonitoring_slicedToArray((0,react.useState)([]),2),liveRooms=_useState4[0],setLiveRooms=_useState4[1];(0,react.useEffect)((function(){var _response$data3,_response$data4;if(null!==(_response$data3=response.data)&&void 0!==_response$data3&&_response$data3.liveEvents&&null!==(_response$data4=response.data)&&void 0!==_response$data4&&_response$data4.prerecordedEvents){var newLiveRoomsIds=es.HCG([function(x,y){return x.priority-y.priority},function(x,y){return x.name.localeCompare(y.name)}],es.jj$([].concat(_toConsumableArray(response.data.liveEvents.filter((function(x){return Date.parse(x.scheduledStartTime)<=nowRoundedUp+6e5})).map((function(x){return x.room}))),_toConsumableArray(response.data.prerecordedEvents.filter((function(x){return Date.parse(x.scheduledStartTime)<=nowRoundedUp+6e5})).map((function(x){return x.room}))))));setLiveRooms((function(oldIds){return!oldIds||oldIds.length!==newLiveRoomsIds.length||newLiveRoomsIds.some((function(x,idx){return idx>=oldIds.length||oldIds[idx].id!==x.id}))?newLiveRoomsIds:oldIds}))}}),[nowRoundedUp,null===(_response$data5=response.data)||void 0===_response$data5?void 0:_response$data5.liveEvents,null===(_response$data6=response.data)||void 0===_response$data6?void 0:_response$data6.prerecordedEvents]);var roomTiles=(0,react.useMemo)((function(){return liveRooms.map((function(room){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.P4,{children:(0,jsx_runtime.jsx)(RoomTile,{id:room.id,name:room.name})},room.id)}))}),[liveRooms]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{w:"100%",spacing:4,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Stream previews will show here 10 minutes before the stream is live."})}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rj,{w:"100%",templateColumns:"repeat(auto-fit, 300px)",gap:1,justifyContent:"center",children:roomTiles}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.iz,{}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{h:"60px",children:response.fetching?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading backstage info",size:"sm"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_progress_esm.D8,{value:secondsToNextRefresh+1,max:60,min:0,size:"50px",mr:2,mt:1,children:(0,jsx_runtime.jsx)(chakra_ui_progress_esm.ip,{children:secondsToNextRefresh+1})}),"seconds till next refresh"]})}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.M5,{children:["Your local time: ",(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{fontWeight:"bold",children:new Date(now).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Backstage statuses will show here 20 minutes before they are live (i.e. when they are open for people to join)."})}),listEl]})}function RoomTile(_ref){var _roomChannelStackResp3,id=_ref.id,name=_ref.name,conferencePath=(0,AuthParameters.h)().conferencePath,context=(0,react.useMemo)((function(){var _makeContext2;return(0,make_context.f)(((_makeContext2={})[auth.k.Role]=auth.Z.ConferenceOrganizer,_makeContext2),[])}),[]),roomChannelStackResponse=LivestreamMonitoring_slicedToArray((0,graphql.ft$)({variables:{roomId:id},context}),1)[0],hlsUri=(0,react.useMemo)((function(){var _roomChannelStackResp,_roomChannelStackResp2;if(null===(_roomChannelStackResp=roomChannelStackResponse.data)||void 0===_roomChannelStackResp||null===(_roomChannelStackResp2=_roomChannelStackResp.video_ChannelStack)||void 0===_roomChannelStackResp2||!_roomChannelStackResp2[0])return null;var finalUri=new URL(roomChannelStackResponse.data.video_ChannelStack[0].endpointUri);return finalUri.hostname=roomChannelStackResponse.data.video_ChannelStack[0].cloudFrontDomain,finalUri.toString()}),[null===(_roomChannelStackResp3=roomChannelStackResponse.data)||void 0===_roomChannelStackResp3?void 0:_roomChannelStackResp3.video_ChannelStack]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{pos:"relative",maxW:"300px",border:"3px solid",borderColor:"gray.400",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{p:1,fontSize:"sm",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",mb:1,fontSize:"80%"})," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{as:react_router_dom.rU,to:conferencePath+"/room/"+id,children:name})]}),(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}),children:hlsUri?(0,jsx_runtime.jsx)(HlsPlayer,{roomId:id,canPlay:!0,hlsUri,initialMute:!0,expectLivestream:!0}):(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{})})]})}function BackstageTile(_ref2){var event=_ref2.event,conference=(0,useConference.fk)(),conferencePath=(0,AuthParameters.h)().conferencePath,_useClipboard=(0,chakra_ui_hooks_esm.VP)(event.id),hasCopied=_useClipboard.hasCopied,onCopy=_useClipboard.onCopy,now=(0,useRealTime.$)(6e4),startDate=(0,react.useMemo)((function(){return new Date(event.scheduledStartTime)}),[event.scheduledStartTime]),endDate=(0,react.useMemo)((function(){return new Date(event.scheduledEndTime)}),[event.scheduledEndTime]),isFuture=startDate.getTime()>now,isLive=startDate.getTime()<=now&&now<endDate.getTime()-5e3,presence=(0,PresenceStateProvider.bZ)(),_useState6=LivestreamMonitoring_slicedToArray((0,react.useState)(new Set),2),presences=_useState6[0],setPresences=_useState6[1];return(0,react.useEffect)((function(){var unobserve=presence.observePage(conferencePath+"/room/"+event.room.id,conference.slug,(function(newPresences){setPresences(new Set(newPresences))}));return function(){unobserve()}}),[conferencePath,conference.slug,event.room.id,presence]),(0,react.useMemo)((function(){return isLive||isFuture?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:2,justifyContent:"flex-start",alignItems:"flex-start",id:event.id,children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"sm",children:[isLive?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"broadcast-tower",iconStyle:"s",fontSize:"sm",color:"red.400",mb:1,mr:2})," ","Now"]}):startDate.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})," ","until"," ",endDate.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})," ","in"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{as:react_router_dom.rU,to:conferencePath+"/room/"+event.room.id,children:event.room.name})]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"lg",children:[event.eventVonageSession&&event.eventVonageSession.sessionId?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Vonage session ready",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"video",mb:1,mr:2})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"No Vonage session!",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"circle-cross",color:"red.400",mb:1,mr:2})}),event.name,event.item?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[": ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{as:react_router_dom.rU,to:conferencePath+"/item/"+event.item.id,children:event.item.title})]}):void 0]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"xs",children:["Event: ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:event.id}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:onCopy,ml:2,size:"xs",colorScheme:"purple",children:hasCopied?"Copied":"Copy"})]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"sm",children:[0===event.eventPeople.length?(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"exclamation-triangle",color:"red.400",mb:1,mr:2}):void 0,"Expecting ",event.eventPeople.length," people",0===event.eventPeople.length?"!":""]}),event.eventPeople.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.iz,{borderColor:"gray.400"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{spacing:2,w:"100%",children:es.HCG([function(x,y){return y.roleName.localeCompare(x.roleName)},function(x,y){return x.person.name.localeCompare(y.person.name)}],event.eventPeople).map((function(eventPerson){var _eventPerson$person$r5,_eventPerson$person$r6,_event$eventVonageSes3,_event$eventVonageSes4,registrantId=null===(_eventPerson$person$r5=eventPerson.person.registrant)||void 0===_eventPerson$person$r5?void 0:_eventPerson$person$r5.id,userId=null===(_eventPerson$person$r6=eventPerson.person.registrant)||void 0===_eventPerson$person$r6?void 0:_eventPerson$person$r6.userId,isPresent=userId&&presences.has(userId),isCameraOrMicConnected=!!registrantId&&!(null===(_event$eventVonageSes3=event.eventVonageSession)||void 0===_event$eventVonageSes3||!_event$eventVonageSes3.participantStreams.some((function(x){return x.registrantId===registrantId&&"camera"===x.vonageStreamType}))),isScreenshareConnected=!!registrantId&&!(null===(_event$eventVonageSes4=event.eventVonageSession)||void 0===_event$eventVonageSes4||!_event$eventVonageSes4.participantStreams.some((function(x){return x.registrantId===registrantId&&"screen"===x.vonageStreamType})));return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{w:"100%",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{justifyContent:"flex-start",alignItems:"flex-start",w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:[registrantId&&userId&&isCameraOrMicConnected?(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"check-circle",color:"green.400",mb:1,mr:2}):(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times-circle",color:"red.400",mb:1,mr:2}),eventPerson.person.name," (",eventPerson.person.affiliation?eventPerson.person.affiliation:"<No affiliation>",") as"," ",eventPerson.roleName[0]+eventPerson.roleName.substr(1).toLowerCase()]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{ml:"auto",justifyContent:"flex-start",alignItems:"flex-start",spacing:4,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:registrantId?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Person is linked to registrant",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",color:"green.400"})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Not linked to registrant!",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"unlink",color:"red.400"})})}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:userId?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Completed registration",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"check-circle",color:"green.400"})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Has not completed registration!",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times-circle",color:registrantId?"red.400":"gray.400"})})}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:isPresent||isCameraOrMicConnected?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Present on the room page",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"street-view",color:"green.400"})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Might not be present on the room page",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"mask",color:userId?"yellow.600":"gray.400"})})}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:isCameraOrMicConnected?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Camera or microphone is enabled",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{color:"green.400",spacing:0,children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"video"}),(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"microphone"})]})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Has not enabled camera or microphone",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{color:userId?"red.400":"gray.400",spacing:0,children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"video-slash"}),(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"microphone-slash"})]})})}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:isScreenshareConnected?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Screenshare is enabled",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"desktop",color:"green.400"})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Has not enabled screenshare",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"desktop",color:"gray.400"})})})]})]})},eventPerson.id)}))})]}):void 0]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Ended"})}),[conferencePath,isLive,isFuture,event.id,event.room.id,event.room.name,event.eventVonageSession,event.name,event.item,event.eventPeople,startDate,endDate,onCopy,hasCopied,presences])}(0,urql_core.Ps)(LivestreamMonitoring_templateObject||(LivestreamMonitoring_templateObject=function LivestreamMonitoring_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query MonitorLivestreams($conferenceId: uuid!, $now: timestamptz!, $later: timestamptz!) {\n        liveEvents: schedule_Event(\n            where: {\n                conferenceId: { _eq: $conferenceId }\n                scheduledStartTime: { _lte: $later }\n                scheduledEndTime: { _gte: $now }\n                modeName: { _eq: LIVESTREAM }\n            }\n            order_by: [{ scheduledStartTime: asc }, { scheduledEndTime: asc }, { room: { name: asc } }]\n        ) {\n            ...MonitorLivestreams_Event\n        }\n        prerecordedEvents: schedule_Event(\n            where: {\n                conferenceId: { _eq: $conferenceId }\n                scheduledStartTime: { _lte: $later }\n                scheduledEndTime: { _gte: $now }\n                modeName: { _eq: LIVESTREAM }\n                autoPlayElementId: { _is_null: false }\n            }\n            order_by: [{ scheduledStartTime: asc }, { scheduledEndTime: asc }, { room: { name: asc } }]\n        ) {\n            ...MonitorLivestreams_PrerecEvent\n        }\n    }\n\n    fragment MonitorLivestreams_PrerecEvent on schedule_Event {\n        id\n        conferenceId\n        scheduledStartTime\n        scheduledEndTime\n        modeName\n        roomId\n        room {\n            id\n            name\n            priority\n        }\n    }\n\n    fragment MonitorLivestreams_Person on schedule_EventProgramPerson {\n        id\n        roleName\n        personId\n        eventId\n        person {\n            id\n            name\n            affiliation\n            registrantId\n            registrant {\n                id\n                userId\n            }\n        }\n    }\n\n    fragment MonitorLivestreams_Event on schedule_Event {\n        id\n        conferenceId\n        modeName\n        name\n        scheduledStartTime\n        scheduledEndTime\n        roomId\n        room {\n            id\n            name\n            priority\n        }\n        itemId\n        item {\n            id\n            title\n        }\n        eventPeople {\n            ...MonitorLivestreams_Person\n        }\n        eventVonageSession {\n            id\n            sessionId\n            eventId\n            participantStreams(where: { stopped_at: { _is_null: true } }) {\n                id\n                registrantId\n                vonageStreamType\n                vonageSessionId\n            }\n        }\n    }\n"]))),LivestreamMonitoring.displayName="LivestreamMonitoring",RoomTile.displayName="RoomTile";var PrepareJobsList_templateObject,ExtractActualError=__webpack_require__("./src/aspects/GQL/ExtractActualError.ts");function PrepareJobsList_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function PrepareJobsList_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){PrepareJobsList_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){PrepareJobsList_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function PrepareJobsList_slicedToArray(arr,i){return function PrepareJobsList_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PrepareJobsList_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function PrepareJobsList_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PrepareJobsList_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PrepareJobsList_arrayLikeToArray(o,minLen)}(arr,i)||function PrepareJobsList_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PrepareJobsList_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PrepareJobsList(_ref){var _jobs$data,conferenceId=_ref.conferenceId,conference=(0,useConference.fk)(),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.ConferenceOrganizer,_makeContext[auth.k.ConferenceId]=conference.id,_makeContext[auth.k.SubconferenceId]=void 0,_makeContext),["job_queues_PrepareJob"])}),[conference.id]),_useGetConferencePrep2=PrepareJobsList_slicedToArray((0,graphql.pvB)({variables:{conferenceId},context}),2),jobs=_useGetConferencePrep2[0],getJobs=_useGetConferencePrep2[1];(0,useQueryErrorToast.Z)(jobs.error,!1);var _useCreateConferenceP2=PrepareJobsList_slicedToArray((0,graphql.VgA)(),2),createJobResult=_useCreateConferenceP2[0],createJob=_useCreateConferenceP2[1];(0,useQueryErrorToast.Z)(createJobResult.error,!1);var toast=(0,chakra_ui_toast_esm.pm)();return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{w:"100%",alignItems:"left",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{justifyContent:"space-between",children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mt:5,"aria-label":"Prepare broadcasts",isLoading:createJobResult.fetching,onClick:PrepareJobsList_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,createJob({conferenceId:conference.id},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=auth.Z.ConferenceOrganizer,_headers[auth.k.ConferenceId]=conference.id,_headers[auth.k.SubconferenceId]=void 0,_headers)}});case 3:if(!(result=_context.sent).error){_context.next=6;break}throw new Error((0,ExtractActualError.Z)(result.error));case 6:getJobs(),toast({status:"success",description:"Started preparing broadcasts."}),_context.next=14;break;case 10:_context.prev=10,_context.t0=_context.catch(0),console.error("Failed to start preparing broadcasts",_context.t0),toast({status:"error",description:"Failed to start preparing broadcasts."});case 14:case"end":return _context.stop()}}),_callee,null,[[0,10]])}))),children:"Prepare broadcasts"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mt:5,"aria-label":"Refresh job list",onClick:PrepareJobsList_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",getJobs());case 1:case"end":return _context2.stop()}}),_callee2)}))),children:"Refresh"})]}),jobs.error?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"error",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{mr:2,children:"Failed to load data"}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{children:[jobs.error.name,": ",jobs.error.message]})]}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_table_esm.iA,{variant:"simple",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Rn,{children:"Ongoing and past broadcast preparation jobs"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.hr,{children:(0,jsx_runtime.jsxs)(chakra_ui_table_esm.Tr,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Started at"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Status"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Last updated"})]})}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.p3,{children:null===(_jobs$data=jobs.data)||void 0===_jobs$data?void 0:_jobs$data.job_queues_PrepareJob.map((function(job){return(0,jsx_runtime.jsxs)(chakra_ui_table_esm.Tr,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:job.createdAt}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:job.message,children:job.jobStatusName})}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:job.updatedAt})]},job.id)}))})]})]})}(0,urql_core.Ps)(PrepareJobsList_templateObject||(PrepareJobsList_templateObject=function PrepareJobsList_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation CreateConferencePrepareJob($conferenceId: uuid!) {\n        insert_job_queues_PrepareJob_one(object: { conferenceId: $conferenceId }) {\n            id\n            conferenceId\n        }\n    }\n\n    query GetConferencePrepareJobs($conferenceId: uuid!) {\n        job_queues_PrepareJob(\n            where: { conferenceId: { _eq: $conferenceId } }\n            order_by: { createdAt: desc }\n            limit: 10\n        ) {\n            id\n            jobStatusName\n            message\n            updatedAt\n            createdAt\n            videoRenderJobs {\n                id\n                jobStatusName\n                updated_at\n                created_at\n            }\n        }\n    }\n"]))),PrepareJobsList.displayName="PrepareJobsList";try{PrepareJobsList.displayName="PrepareJobsList",PrepareJobsList.__docgenInfo={description:"",displayName:"PrepareJobsList",props:{conferenceId:{defaultValue:null,description:"",name:"conferenceId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Broadcast/PrepareJobsList.tsx#PrepareJobsList"]={docgenInfo:PrepareJobsList.__docgenInfo,name:"PrepareJobsList",path:"src/aspects/Conference/Manage/Broadcast/PrepareJobsList.tsx#PrepareJobsList"})}catch(__react_docgen_typescript_loader_error){}function ManageBroadcast(){var conference=(0,useConference.fk)(),title=(0,useTitle.Z)("Manage broadcasts at "+conference.shortName);return(0,jsx_runtime.jsxs)(RequireRole.Z,{organizerRole:!0,componentIfDenied:(0,jsx_runtime.jsx)(PageNotFound.default,{}),children:[title,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.X6,{mt:4,as:"h1",fontSize:"2.3rem",lineHeight:"3rem",children:["Manage ",conference.shortName]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",id:"page-heading",fontSize:"1.7rem",lineHeight:"2.4rem",fontStyle:"italic",children:"Broadcasts"}),(0,jsx_runtime.jsxs)(chakra_ui_tabs_esm.mQ,{isLazy:!0,w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_tabs_esm.td,{children:[(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.OK,{children:"Monitor streams"}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.OK,{children:"Configuration"}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.OK,{children:"Prepare broadcasts"}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.OK,{children:"Rooms"}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.OK,{children:"RTMP broadcast recovery"})]}),(0,jsx_runtime.jsxs)(chakra_ui_tabs_esm.nP,{children:[(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.x4,{children:(0,jsx_runtime.jsx)(LivestreamMonitoring,{})}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.x4,{children:(0,jsx_runtime.jsx)(Configuration,{conferenceId:conference.id})}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.x4,{children:(0,jsx_runtime.jsx)(PrepareJobsList,{conferenceId:conference.id})}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.x4,{children:(0,jsx_runtime.jsx)(BroadcastRooms,{conferenceId:conference.id})}),(0,jsx_runtime.jsx)(chakra_ui_tabs_esm.x4,{children:(0,jsx_runtime.jsx)(EventVonageControls,{conferenceId:conference.id})})]})]})]})}ManageBroadcast.displayName="ManageBroadcast"},"./src/aspects/GQL/QueryWrapper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>QueryWrapper});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/aspects/Chakra/CenteredSpinner.tsx"),_useQueryErrorToast__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function QueryWrapper(_ref){var queryResult=_ref.queryResult,getter=_ref.getter,children=_ref.children,childrenNoData=_ref.childrenNoData,_ref$noSpinner=_ref.noSpinner,noSpinner=void 0!==_ref$noSpinner&&_ref$noSpinner,innerData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return"data"in queryResult&&queryResult.data?getter(queryResult.data):void 0}),[getter,queryResult]);return(0,_useQueryErrorToast__WEBPACK_IMPORTED_MODULE_2__.Z)("error"in queryResult?null==queryResult?void 0:queryResult.error:void 0,!1,"QueryWrapper"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[queryResult.fetching||queryResult.stale&&!innerData?noSpinner?void 0:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_1__.Z,{caller:"QueryWrapper:35"}):queryResult&&"error"in queryResult&&queryResult.error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"An error occurred loading in data - please see further information in notifications."}):void 0,queryResult.fetching||queryResult.stale&&!innerData?void 0:innerData?children(innerData):childrenNoData?childrenNoData():(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"No data found"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"(You might not have permission to access this. Please contact your conference organisers if you think this is a mistake.)"})]})]})}try{QueryWrapper.displayName="QueryWrapper",QueryWrapper.__docgenInfo={description:"",displayName:"QueryWrapper",props:{queryResult:{defaultValue:null,description:"",name:"queryResult",required:!0,type:{name:"UseQueryState<TData, TVariables> | (OperationResult<TData, TVariables> & { fetching: boolean; stale: boolean; }) | { ...; }"}},getter:{defaultValue:null,description:"",name:"getter",required:!0,type:{name:"(data: TData) => TInnerData | null | undefined"}},childrenNoData:{defaultValue:null,description:"",name:"childrenNoData",required:!1,type:{name:"(() => ReactNode | ReactNode[])"}},noSpinner:{defaultValue:{value:"false"},description:"",name:"noSpinner",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/GQL/QueryWrapper.tsx#QueryWrapper"]={docgenInfo:QueryWrapper.__docgenInfo,name:"QueryWrapper",path:"src/aspects/GQL/QueryWrapper.tsx#QueryWrapper"})}catch(__react_docgen_typescript_loader_error){}}}]);