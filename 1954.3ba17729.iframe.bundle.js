(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[1954],{"./src/aspects/Conference/Attend/Exhibition/ExhibitionLayout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>ExhibitionLayout,v:()=>ExhibitionLayoutWrapper});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js");var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),react__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js"),_generated_graphql__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./src/generated/graphql.tsx"),_Card__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/aspects/Card/index.tsx"),_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/aspects/Chakra/CenteredSpinner.tsx"),_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),_Hooks_useRealTime__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/aspects/Hooks/useRealTime.tsx"),_Realtime_PageCountText__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/aspects/Realtime/PageCountText.tsx"),_Utils_maybeCompare__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("./src/aspects/Utils/maybeCompare.tsx"),_Content_AuthorList__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/aspects/Conference/Attend/Content/AuthorList.tsx"),_Content_Element_Element__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/aspects/Conference/Attend/Content/Element/Element.tsx"),_Content_TagList__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/aspects/Conference/Attend/Content/TagList.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ItemTile(_ref){var item=_ref.item,hideLiveViewButton=_ref.hideLiveViewButton,conferencePath=(0,_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_28__.h)().conferencePath,primaryItems=(0,react__WEBPACK_IMPORTED_MODULE_22__.useMemo)((function(){var sortOrder=[_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.VideoBroadcast,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.VideoFile,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.VideoPrepublish,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.VideoUrl,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.PosterFile,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.PosterUrl,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.ImageFile,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.ImageUrl];return _toConsumableArray(item.elements).filter((function(x){var _latestVersion$s3Url,_latestVersion$text,_latestVersion$url,_latestVersion$text2,_latestVersion$url2,_latestVersion$s3Url2;if(!sortOrder.includes(x.typeName))return!1;var dataBlob=x.data;if(dataBlob.length){var latestVersion=dataBlob[dataBlob.length-1].data;switch(latestVersion.baseType){case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Component:return!0;case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.File:return!(null===(_latestVersion$s3Url=latestVersion.s3Url)||void 0===_latestVersion$s3Url||!_latestVersion$s3Url.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Link:return!(null===(_latestVersion$text=latestVersion.text)||void 0===_latestVersion$text||!_latestVersion$text.length||null===(_latestVersion$url=latestVersion.url)||void 0===_latestVersion$url||!_latestVersion$url.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Text:return!(null===(_latestVersion$text2=latestVersion.text)||void 0===_latestVersion$text2||!_latestVersion$text2.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.URL:return!(null===(_latestVersion$url2=latestVersion.url)||void 0===_latestVersion$url2||!_latestVersion$url2.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Video:return!(null===(_latestVersion$s3Url2=latestVersion.s3Url)||void 0===_latestVersion$s3Url2||!_latestVersion$s3Url2.length)}}return!1})).sort((function(x,y){return sortOrder.indexOf(x.typeName)-sortOrder.indexOf(y.typeName)}))}),[item.elements]),secondaryItems=(0,react__WEBPACK_IMPORTED_MODULE_22__.useMemo)((function(){var sortOrder=1===item.elements.reduce((function(acc,x){return x.typeName===_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.Abstract?acc+1:acc}),0)?[_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.Abstract]:[_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.Abstract,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.Text];return _toConsumableArray(item.elements).filter((function(x){var _latestVersion$s3Url3,_latestVersion$text3,_latestVersion$url3,_latestVersion$text4,_latestVersion$url4,_latestVersion$s3Url4;if(!sortOrder.includes(x.typeName))return!1;var dataBlob=x.data;if(dataBlob.length){var latestVersion=dataBlob[dataBlob.length-1].data;switch(latestVersion.baseType){case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Component:return!0;case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.File:return!(null===(_latestVersion$s3Url3=latestVersion.s3Url)||void 0===_latestVersion$s3Url3||!_latestVersion$s3Url3.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Link:return!(null===(_latestVersion$text3=latestVersion.text)||void 0===_latestVersion$text3||!_latestVersion$text3.length||null===(_latestVersion$url3=latestVersion.url)||void 0===_latestVersion$url3||!_latestVersion$url3.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Text:return!(null===(_latestVersion$text4=latestVersion.text)||void 0===_latestVersion$text4||!_latestVersion$text4.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.URL:return!(null===(_latestVersion$url4=latestVersion.url)||void 0===_latestVersion$url4||!_latestVersion$url4.length);case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.Video:return!(null===(_latestVersion$s3Url4=latestVersion.s3Url)||void 0===_latestVersion$s3Url4||!_latestVersion$s3Url4.length)}}return!1})).sort((function(x,y){return sortOrder.indexOf(x.typeName)-sortOrder.indexOf(y.typeName)}))}),[item.elements]),now=(0,_Hooks_useRealTime__WEBPACK_IMPORTED_MODULE_29__.$)(3e4),liveEvent=(0,react__WEBPACK_IMPORTED_MODULE_22__.useMemo)((function(){var liveEvents=item.events.filter((function(x){return Date.parse(x.scheduledStartTime)<=now+12e4&&now<=Date.parse(x.scheduledEndTime)}));return liveEvents.length>0?liveEvents[0]:void 0}),[item.events,now]),liveRoomUrl=liveEvent?conferencePath+"/room/"+liveEvent.roomId:void 0,discussionRoomUrl=item.discussionRoom?conferencePath+"/room/"+item.discussionRoom.id:void 0,externalEventInfo=(0,react__WEBPACK_IMPORTED_MODULE_22__.useMemo)((function(){if(!discussionRoomUrl){var element=item.elements.find((function(x){var _latestVersion$url5;if(x.typeName===_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.bK7.ExternalEventLink){var dataBlob=x.data;if(dataBlob.length){var latestVersion=dataBlob[dataBlob.length-1].data;return latestVersion.baseType===_midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_21__.bN.URL&&!(null===(_latestVersion$url5=latestVersion.url)||void 0===_latestVersion$url5||!_latestVersion$url5.length)}return!1}return!1}));return element?{name:element.name,url:element.data[element.data.length-1].data.url}:void 0}}),[discussionRoomUrl,item.elements]),itemUrl=conferencePath+"/item/"+item.id,history=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_35__.k6)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)(_Card__WEBPACK_IMPORTED_MODULE_24__.Z,{p:[1,2,4],heading:item.title,to:itemUrl,topLeftButton:liveRoomUrl&&!hideLiveViewButton?{colorScheme:"LiveActionButton",iconStyle:"s",label:"Live now",variant:"solid",onClick:function onClick(){history.push(liveRoomUrl)}}:void 0,editControls:[].concat(_toConsumableArray(discussionRoomUrl?[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_27__.Qj,{colorScheme:"PrimaryActionButton",to:discussionRoomUrl,textDecoration:"none",onClick:function onClick(ev){ev.stopPropagation()},borderRadius:"2xl",size:"sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_26__.Z,{iconStyle:"s",icon:"video",mr:2}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.xv,{as:"span",ml:1,mr:2,children:"Join in room"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Realtime_PageCountText__WEBPACK_IMPORTED_MODULE_30__.Z,{path:discussionRoomUrl,fontSize:"inherit"})]},"internal")]:[]),_toConsumableArray(externalEventInfo?[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_27__.bd,{colorScheme:"PrimaryActionButton",to:externalEventInfo.url,textDecoration:"none",onClick:function onClick(ev){ev.stopPropagation()},borderRadius:"2xl",size:"sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_26__.Z,{iconStyle:"s",icon:"video",mr:2}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.xv,{as:"span",ml:1,mr:2,children:["Join in ",externalEventInfo.name]})]},"external")]:[])),children:[primaryItems.length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Content_Element_Element__WEBPACK_IMPORTED_MODULE_32__.W,{element:primaryItems[0]}):void 0,primaryItems.length>1?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_27__.Qj,{to:itemUrl,my:4,colorScheme:"PrimaryActionButton",linkProps:{alignSelf:"center"},onClick:function onClick(ev){ev.stopPropagation()},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_26__.Z,{iconStyle:"s",icon:"video",mr:2}),"View ",primaryItems.length-1," more videos and images"]}):void 0,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.xu,{mt:1===primaryItems.length?4:void 0,children:secondaryItems.map((function(item){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Content_Element_Element__WEBPACK_IMPORTED_MODULE_32__.W,{element:item},item.id)}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.xu,{my:4,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Content_AuthorList__WEBPACK_IMPORTED_MODULE_31__.pW,{programPeopleData:item.itemPeople})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.LZ,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Content_TagList__WEBPACK_IMPORTED_MODULE_33__.Z,{tags:item.itemTags})]})}function ExhibitionLayout(_ref2){var exhibition=_ref2.exhibition,hideLiveViewButton=_ref2.hideLiveViewButton,sortedItems=(0,react__WEBPACK_IMPORTED_MODULE_22__.useMemo)((function(){return _toConsumableArray(exhibition.items).sort((function(x,y){return(0,_Utils_maybeCompare__WEBPACK_IMPORTED_MODULE_37__.D)(x.priority,y.priority,(function(a,b){return a-b}))}))}),[exhibition.items]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.rj,{templateColumns:["repeat(1, 1fr)","repeat(1, 1fr)","repeat(2, 1fr)"],mt:0,gap:[2,2,4],w:"100%",children:sortedItems.map((function(item){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(ItemTile,{item:item.item,hideLiveViewButton:null!=hideLiveViewButton&&hideLiveViewButton},item.id)}))})}function ExhibitionLayoutWrapper(_ref3){var _exhibitionResponse$d,exhibitionId=_ref3.exhibitionId,hideLiveViewButton=_ref3.hideLiveViewButton,exhibitionResponse=_slicedToArray((0,_generated_graphql__WEBPACK_IMPORTED_MODULE_23__.vrz)({variables:{id:exhibitionId,includeAbstract:!1,includeItemEvents:!1}}),1)[0];return exhibitionResponse.fetching&&!exhibitionResponse.data?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_25__.Z,{spinnerProps:{label:"Loading exhibition"},caller:"ExhibitionLayout:307"}):null!==(_exhibitionResponse$d=exhibitionResponse.data)&&void 0!==_exhibitionResponse$d&&_exhibitionResponse$d.collection_Exhibition_by_pk?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(ExhibitionLayout,{exhibition:exhibitionResponse.data.collection_Exhibition_by_pk,hideLiveViewButton}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_34__.Fragment,{})}ItemTile.displayName="ItemTile",ExhibitionLayout.displayName="ExhibitionLayout";try{ExhibitionLayout.displayName="ExhibitionLayout",ExhibitionLayout.__docgenInfo={description:"",displayName:"ExhibitionLayout",props:{exhibition:{defaultValue:null,description:"",name:"exhibition",required:!0,type:{name:"ExhibitionWithContentFragment"}},hideLiveViewButton:{defaultValue:null,description:"",name:"hideLiveViewButton",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Exhibition/ExhibitionLayout.tsx#ExhibitionLayout"]={docgenInfo:ExhibitionLayout.__docgenInfo,name:"ExhibitionLayout",path:"src/aspects/Conference/Attend/Exhibition/ExhibitionLayout.tsx#ExhibitionLayout"})}catch(__react_docgen_typescript_loader_error){}try{ExhibitionLayoutWrapper.displayName="ExhibitionLayoutWrapper",ExhibitionLayoutWrapper.__docgenInfo={description:"",displayName:"ExhibitionLayoutWrapper",props:{exhibitionId:{defaultValue:null,description:"",name:"exhibitionId",required:!0,type:{name:"string"}},hideLiveViewButton:{defaultValue:null,description:"",name:"hideLiveViewButton",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Exhibition/ExhibitionLayout.tsx#ExhibitionLayoutWrapper"]={docgenInfo:ExhibitionLayoutWrapper.__docgenInfo,name:"ExhibitionLayoutWrapper",path:"src/aspects/Conference/Attend/Exhibition/ExhibitionLayout.tsx#ExhibitionLayoutWrapper"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Conference/Attend/Room/RoomPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>RoomPage});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js");var _templateObject,auth=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),urql_core=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),graphql=__webpack_require__("./src/generated/graphql.tsx"),PageNotFound=__webpack_require__("./src/aspects/Errors/PageNotFound.tsx"),make_context=__webpack_require__("./src/aspects/GQL/make-context.ts"),QueryWrapper=__webpack_require__("./src/aspects/GQL/QueryWrapper.tsx"),useTitle=__webpack_require__("./src/aspects/Hooks/useTitle.tsx"),RequireRole=__webpack_require__("./src/aspects/Conference/RequireRole.tsx"),useCurrentRegistrant=__webpack_require__("./src/aspects/Conference/useCurrentRegistrant.tsx"),chakra_ui_icons_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.some.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.now.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.timers.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.set.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js")),chakra_ui_toast_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+toast@1.5.4_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/toast/dist/chakra-ui-toast.esm.js"),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_system_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+system@1.10.3_922a85da57e3646a57465b7970b0de85/node_modules/@chakra-ui/system/dist/chakra-ui-system.esm.js"),es=__webpack_require__("../node_modules/.pnpm/ramda@0.28.0/node_modules/ramda/es/index.js"),AppLayoutContext=__webpack_require__("./src/aspects/App/AppLayoutContext.tsx"),CenteredSpinner=__webpack_require__("./src/aspects/Chakra/CenteredSpinner.tsx"),FAIcon=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),EmojiFloatContainer=__webpack_require__("./src/aspects/Emoji/EmojiFloatContainer.tsx"),useRealTime=__webpack_require__("./src/aspects/Hooks/useRealTime.tsx"),RaiseHandProvider=__webpack_require__("./src/aspects/RaiseHand/RaiseHandProvider.tsx"),useCurrentUser=__webpack_require__("./src/aspects/Users/CurrentUser/useCurrentUser.ts"),MathUtils=__webpack_require__("./src/aspects/Utils/MathUtils.ts"),useEvent=__webpack_require__("./src/aspects/Utils/useEvent.ts"),emotion_react_browser_esm=__webpack_require__("../node_modules/.pnpm/@emotion+react@11.7.1_fc4e507d6fc62ba90bf4c3bd6f9bea2e/node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),LinkButton=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),Outline=__webpack_require__("./src/aspects/Chakra/Outline.ts"),formatRemainingTime=__webpack_require__("./src/aspects/Conference/Attend/Room/formatRemainingTime.ts"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function JoinZoomButton(_ref){var zoomUrl=_ref.zoomUrl,scheduledStartTime=_ref.scheduledStartTime,zoomButtonBgKeyframes=(0,emotion_react_browser_esm.keyframes)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n0% {\n    background-position: 0% 100%;\n}\n50% {\n    background-position: 100% 0%;\n}\n100% {\n    background-position: 0% 100%;\n}\n    "]))),shadow=(0,chakra_ui_color_mode_esm.ff)("lg","light-md"),now=(0,useRealTime.$)(1e3),secondsTillStartStr=scheduledStartTime?(0,formatRemainingTime.d)((scheduledStartTime-now)/1e3,!1):void 0;return(0,jsx_runtime.jsxs)(LinkButton.bd,{to:zoomUrl.url,isExternal:!0,mt:20,mb:4,mx:2,p:8,linkProps:{textAlign:"center",minH:"18em"},whiteSpace:"normal",h:"auto",lineHeight:"150%",fontSize:"1.5em",colorScheme:"PrimaryActionButton",color:"PrimaryActionButton.textColor",borderRadius:"2xl",shadow,animation:zoomButtonBgKeyframes+" 10s ease-in-out infinite",transition:"none",background:"linear-gradient(135deg, rgba(195,0,146,1) 20%, rgba(0,105,231,1) 50%, rgba(195,0,146,1) 80%);",backgroundSize:"400% 400%",_hover:{background:"linear-gradient(135deg, rgba(168,0,126,1) 20%, rgba(0,82,180,1) 50%, rgba(168,0,126,1) 80%);",backgroundSize:"400% 400%"},_focus:{background:"linear-gradient(135deg, rgba(168,0,126,1) 20%, rgba(0,82,180,1) 50%, rgba(168,0,126,1) 80%);",backgroundSize:"400% 400%",boxShadow:Outline.j},_active:{background:"linear-gradient(135deg, rgba(118,0,89,1) 20%, rgba(0,55,121,1) 50%, rgba(118,0,89,1) 80%);",backgroundSize:"400% 400%"},children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",ml:"auto",mr:4}),secondsTillStartStr?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Starts in ",secondsTillStartStr,(0,jsx_runtime.jsx)("br",{})]}):void 0,"Click to join ",zoomUrl.name,(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"mouse-pointer",ml:4})]})}JoinZoomButton.displayName="JoinZoomButton";try{JoinZoomButton.displayName="JoinZoomButton",JoinZoomButton.__docgenInfo={description:"",displayName:"JoinZoomButton",props:{zoomUrl:{defaultValue:null,description:"",name:"zoomUrl",required:!0,type:{name:"{ url: string; name: string; }"}},scheduledStartTime:{defaultValue:null,description:"",name:"scheduledStartTime",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/JoinZoomButton.tsx#JoinZoomButton"]={docgenInfo:JoinZoomButton.__docgenInfo,name:"JoinZoomButton",path:"src/aspects/Conference/Attend/Room/JoinZoomButton.tsx#JoinZoomButton"})}catch(__react_docgen_typescript_loader_error){}var chakra_ui_hooks_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+hooks@1.8.2_react@17.0.2/node_modules/@chakra-ui/hooks/dist/chakra-ui-hooks.esm.js"),chakra_ui_modal_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+modal@1.10.7_d24435ba52f1f88b08cc54a1f1d4e56f/node_modules/@chakra-ui/modal/dist/chakra-ui-modal.esm.js")),chakra_ui_tag_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+tag@1.2.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/tag/dist/chakra-ui-tag.esm.js"),chakra_ui_spinner_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js"),AuthParameters=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),RegistrantsContext=__webpack_require__("./src/aspects/Conference/RegistrantsContext.tsx"),chakra_ui_form_control_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+form-control@1.5.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js"),chakra_ui_input_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+input@1.4.1_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/input/dist/chakra-ui-input.esm.js"),urql_es=__webpack_require__("../node_modules/.pnpm/urql@2.1.3_graphql@15.7.2+react@17.0.2/node_modules/urql/dist/urql.es.js"),useDebouncedState=__webpack_require__("./src/aspects/Hooks/useDebouncedState.ts"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RegistrantSearch(_ref){var excludeRegistrantIds=_ref.excludeRegistrantIds,onSelect=_ref.onSelect,_useDebouncedState2=_slicedToArray((0,useDebouncedState.Z)(""),3),search=_useDebouncedState2[0],searchDebounced=_useDebouncedState2[1],setSearch=_useDebouncedState2[2],_useState2=_slicedToArray((0,react.useState)([]),2),options=_useState2[0],setOptions=_useState2[1],ariaSearchResultStr=options.length+" people",conference=(0,useConference.fk)(),client=(0,urql_es.m8)(),getSelectOptions=(0,react.useCallback)(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(searchTerm){var _result$data$registra,_result$data,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(searchTerm.length<3)){_context.next=2;break}return _context.abrupt("return",[]);case 2:return _context.next=4,client.query(graphql.iZN,{conferenceId:conference.id,search:"%"+searchTerm+"%"}).toPromise();case 4:return result=_context.sent,_context.abrupt("return",null!==(_result$data$registra=null===(_result$data=result.data)||void 0===_result$data?void 0:_result$data.registrant_searchRegistrants.filter((function(item){return Boolean(item.userId)&&!excludeRegistrantIds.includes(item.id)})).map((function(item){return{value:item.id,label:item.displayName}})))&&void 0!==_result$data$registra?_result$data$registra:[]);case 6:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),[conference.id,client,excludeRegistrantIds]);return(0,react.useEffect)((function(){function _fn(){return(_fn=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var newOptions;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,getSelectOptions(searchDebounced);case 2:newOptions=_context2.sent,setOptions(newOptions);case 4:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}!function fn(){return _fn.apply(this,arguments)}()}),[getSelectOptions,searchDebounced]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Registrant"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{"aria-label":"Search found "+ariaSearchResultStr,type:"text",placeholder:"Search",value:search,onChange:function onChange(ev){setSearch(ev.target.value)}}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.xH,{children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"search"})}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Search for an registrant by name"})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{children:options.map((function(option){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{my:2,children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,onSelect(option.value);case 2:return _context3.abrupt("return",_context3.sent);case 3:case"end":return _context3.stop()}}),_callee3)}))),"aria-label":"Choose "+option.label,size:"sm",colorScheme:"SecondaryActionButton",leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"user",iconStyle:"s"}),children:option.label})},option.value)}))})]})}try{RegistrantSearch.displayName="RegistrantSearch",RegistrantSearch.__docgenInfo={description:"",displayName:"RegistrantSearch",props:{excludeRegistrantIds:{defaultValue:null,description:"",name:"excludeRegistrantIds",required:!0,type:{name:"string[]"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(registrantId: string) => Promise<void>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Members/RegistrantSearch.tsx#RegistrantSearch"]={docgenInfo:RegistrantSearch.__docgenInfo,name:"RegistrantSearch",path:"src/aspects/Conference/Attend/Room/Members/RegistrantSearch.tsx#RegistrantSearch"})}catch(__react_docgen_typescript_loader_error){}var RoomMembersContext_templateObject,useQueryErrorToast=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx");function RoomMembersContext_slicedToArray(arr,i){return function RoomMembersContext_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function RoomMembersContext_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function RoomMembersContext_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RoomMembersContext_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RoomMembersContext_arrayLikeToArray(o,minLen)}(arr,i)||function RoomMembersContext_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RoomMembersContext_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useValue(props){var _data$room_Room_by_pk,_data$room_Room_by_pk2,_data$room_Room_by_pk3,_data$room_Room_by_pk4,context=(0,react.useMemo)((function(){var _makeContext;return Object.assign({},(0,make_context.f)(((_makeContext={})[auth.k.RoomId]=props.roomId,_makeContext)),{additionalTypenames:["room_RoomMembership"]})}),[props.roomId]),_useGetRoomMembersQue3=RoomMembersContext_slicedToArray((0,graphql.du9)({variables:{roomId:props.roomId},context}),1)[0],loading=_useGetRoomMembersQue3.fetching,error=_useGetRoomMembersQue3.error,data=_useGetRoomMembersQue3.data;(0,useQueryErrorToast.Z)(error,!0,"RoomMembersProvider:GetRoomMembers");var currentRegistrant=(0,useCurrentRegistrant.ZP)(),canAddMembersAs=(null==data||null===(_data$room_Room_by_pk=data.room_Room_by_pk)||void 0===_data$room_Room_by_pk||null===(_data$room_Room_by_pk2=_data$room_Room_by_pk.roomMemberships)||void 0===_data$room_Room_by_pk2||null===(_data$room_Room_by_pk3=_data$room_Room_by_pk2.find((function(r){return r.registrantId===currentRegistrant.id})))||void 0===_data$room_Room_by_pk3?void 0:_data$room_Room_by_pk3.personRoleName)===graphql.FZ1.Admin?auth.Z.RoomAdmin:currentRegistrant.conferenceRole===graphql.OiL.Organizer?auth.Z.ConferenceOrganizer:void 0;return{roomMembers:null==data||null===(_data$room_Room_by_pk4=data.room_Room_by_pk)||void 0===_data$room_Room_by_pk4?void 0:_data$room_Room_by_pk4.roomMemberships,loading,canAddMembersAs}}(0,urql_core.Ps)(RoomMembersContext_templateObject||(RoomMembersContext_templateObject=function RoomMembersContext_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query GetRoomMembers($roomId: uuid!) {\n        room_Room_by_pk(id: $roomId) {\n            id\n            managementModeName\n            roomMemberships {\n                ...RoomMember\n            }\n        }\n    }\n\n    fragment RoomMember on room_RoomMembership {\n        id\n        roomId\n        personRoleName\n        registrantId\n    }\n"])));var AddRoomPersonModal_templateObject,RoomMembersModal_templateObject,RoomMembersContext=(0,react.createContext)({});function RoomMembersProvider(props){return(0,jsx_runtime.jsx)(RoomMembersContext.Provider,{value:useValue(props),children:props.children})}RoomMembersProvider.displayName="RoomMembersProvider";try{RoomMembersProvider.displayName="RoomMembersProvider",RoomMembersProvider.__docgenInfo={description:"",displayName:"RoomMembersProvider",props:{roomId:{defaultValue:null,description:"",name:"roomId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Members/RoomMembersContext.tsx#RoomMembersProvider"]={docgenInfo:RoomMembersProvider.__docgenInfo,name:"RoomMembersProvider",path:"src/aspects/Conference/Attend/Room/Members/RoomMembersContext.tsx#RoomMembersProvider"})}catch(__react_docgen_typescript_loader_error){}function AddRoomPersonModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function AddRoomPersonModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){AddRoomPersonModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){AddRoomPersonModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function AddRoomPersonModal_slicedToArray(arr,i){return function AddRoomPersonModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AddRoomPersonModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AddRoomPersonModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AddRoomPersonModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AddRoomPersonModal_arrayLikeToArray(o,minLen)}(arr,i)||function AddRoomPersonModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AddRoomPersonModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AddRoomPersonModal(_ref){var roomId=_ref.roomId,managementModeName=_ref.managementModeName,isOpen=_ref.isOpen,onClose=_ref.onClose,addRegistrant=AddRoomPersonModal_slicedToArray((0,graphql.IB3)(),2)[1],roomMembers=(0,react.useContext)(RoomMembersContext).roomMembers,toast=(0,chakra_ui_toast_esm.pm)(),existingRegistrantIds=(0,react.useMemo)((function(){return roomMembers?roomMembers.filter((function(person){return Boolean(person.registrantId)})).map((function(person){return person.registrantId})):[]}),[roomMembers]),_useState2=AddRoomPersonModal_slicedToArray((0,react.useState)(),2),registrantIdToAdd=_useState2[0],setRegistrantIdToAdd=_useState2[1],startAddMember=(0,react.useCallback)(function(){var _ref2=AddRoomPersonModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(registrantId){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:setRegistrantIdToAdd(registrantId);case 1:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),[]),addMember=(0,react.useCallback)(function(){var _ref3=AddRoomPersonModal_asyncToGenerator(regeneratorRuntime.mark((function _callee2(registrantId,role){var _makeContext;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,addRegistrant({registrantId,roomId,role},Object.assign({},(0,make_context.f)(((_makeContext={})[auth.k.RoomId]=roomId,_makeContext[auth.k.Role]="room-admin",_makeContext)),{additionalTypenames:["room_RoomMembership"]}));case 2:_context2.sent.error?toast({title:"Failed to add member",status:"error"}):setRegistrantIdToAdd(null);case 4:case"end":return _context2.stop()}}),_callee2)})));return function(_x2,_x3){return _ref3.apply(this,arguments)}}(),[addRegistrant,roomId,toast]),cancelRef=(0,react.useRef)(null);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{scrollBehavior:"outside",onClose,isOpen,motionPreset:"scale",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{pb:0,children:"Add person to room"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsx)(RegistrantSearch,{excludeRegistrantIds:existingRegistrantIds,onSelect:startAddMember})})]})]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.aR,{isOpen:Boolean(registrantIdToAdd),leastDestructiveRef:cancelRef,onClose:function onClose(){return setRegistrantIdToAdd(null)},children:(0,jsx_runtime.jsx)(chakra_ui_modal_esm.dh,{children:(0,jsx_runtime.jsxs)(chakra_ui_modal_esm._T,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fY,{fontSize:"lg",fontWeight:"bold",children:"Add to room?"}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.xo,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{ref:cancelRef,onClick:function onClick(){return setRegistrantIdToAdd(null)},children:"Cancel"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"SecondaryActionButton",onClick:function onClick(){registrantIdToAdd&&addMember(registrantIdToAdd,graphql.FZ1.Admin)},ml:3,children:"Add as admin"}),managementModeName===graphql.ZvF.Private?(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"PrimaryActionButton",onClick:function onClick(){registrantIdToAdd&&addMember(registrantIdToAdd,graphql.FZ1.Participant)},ml:3,children:"Add"}):void 0]})]})})})]})}(0,urql_core.Ps)(AddRoomPersonModal_templateObject||(AddRoomPersonModal_templateObject=function AddRoomPersonModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation AddRegistrantToRoom($registrantId: uuid!, $roomId: uuid!, $role: room_PersonRole_enum!) {\n        insert_room_RoomMembership_one(\n            object: { registrantId: $registrantId, roomId: $roomId, personRoleName: $role }\n        ) {\n            id\n        }\n    }\n"])));try{AddRoomPersonModal.displayName="AddRoomPersonModal",AddRoomPersonModal.__docgenInfo={description:"",displayName:"AddRoomPersonModal",props:{roomId:{defaultValue:null,description:"",name:"roomId",required:!0,type:{name:"string"}},managementModeName:{defaultValue:null,description:"",name:"managementModeName",required:!0,type:{name:"enum",value:[{value:'"DM"'},{value:'"MANAGED"'},{value:'"PRIVATE"'},{value:'"PUBLIC"'}]}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Members/AddRoomPersonModal.tsx#AddRoomPersonModal"]={docgenInfo:AddRoomPersonModal.__docgenInfo,name:"AddRoomPersonModal",path:"src/aspects/Conference/Attend/Room/Members/AddRoomPersonModal.tsx#AddRoomPersonModal"})}catch(__react_docgen_typescript_loader_error){}function RoomMembersModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function RoomMembersModal_slicedToArray(arr,i){return function RoomMembersModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function RoomMembersModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function RoomMembersModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RoomMembersModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RoomMembersModal_arrayLikeToArray(o,minLen)}(arr,i)||function RoomMembersModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RoomMembersModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RoomMembersModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,roomDetails=_ref.roomDetails;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{scrollBehavior:"inside",isOpen,onClose,size:"md",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.xB,{children:["Room details ",(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{})]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsx)(RoomMembersProvider,{roomId:roomDetails.id,children:(0,jsx_runtime.jsx)(RoomMembersModalInner,{roomDetails})})})]})]})}function RoomMembersModalInner(_ref2){var _ref4,roomDetails=_ref2.roomDetails,_useContext=(0,react.useContext)(RoomMembersContext),roomMembers=_useContext.roomMembers,loading=_useContext.loading,canAddMembersAs=_useContext.canAddMembersAs,conferencePath=(0,AuthParameters.h)().conferencePath,mRegistrant=(0,useCurrentRegistrant.oC)(),addMemberModal=(0,chakra_ui_hooks_esm.qY)(),toast=(0,chakra_ui_toast_esm.pm)(),memberRegistrantIds=(0,react.useMemo)((function(){return roomMembers?roomMembers.map((function(x){return{registrant:x.registrantId}})):[]}),[roomMembers]),registrants=(0,RegistrantsContext.CW)(memberRegistrantIds),sortedRegistrants=(0,react.useMemo)((function(){return es.HCG([es.Ck5((function(x){return Boolean(null==roomMembers?void 0:roomMembers.some((function(m){return m.registrantId===x.id&&m.personRoleName===graphql.FZ1.Admin})))})),es.zU3((function(x){return x.displayName}))],registrants)}),[registrants,roomMembers]),removeRegistrantsContext=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=canAddMembersAs,_makeContext[auth.k.RoomId]=roomDetails.id,_makeContext))}),[canAddMembersAs,roomDetails.id]),removeRegistrant=RoomMembersModal_slicedToArray((0,graphql.yNU)(),2)[1],deleteMember=(0,react.useCallback)(function(){var _ref3=function RoomMembersModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){RoomMembersModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){RoomMembersModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(registrantId){var _result$data,_result$data$delete_r,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,removeRegistrant({registrantId,roomId:roomDetails.id},Object.assign({},removeRegistrantsContext,{additionalTypenames:["room_RoomMembership"]}));case 2:((result=_context.sent).error||0===(null===(_result$data=result.data)||void 0===_result$data||null===(_result$data$delete_r=_result$data.delete_room_RoomMembership)||void 0===_result$data$delete_r?void 0:_result$data$delete_r.affected_rows))&&toast({status:"error",title:"Failed to remove member from room"});case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}(),[removeRegistrant,removeRegistrantsContext,roomDetails.id,toast]),canControlMembers=(0,react.useMemo)((function(){return canAddMembersAs&&[graphql.ZvF.Private,graphql.ZvF.Public].includes(roomDetails.managementModeName)}),[canAddMembersAs,roomDetails.managementModeName]),roomMembersList=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)("section",{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"header",size:"sm",textAlign:"left",children:roomDetails.managementModeName===graphql.ZvF.Public?"Admins":"Members"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{my:2,spacing:2,maxH:"40vh",overflowY:"auto",children:sortedRegistrants.length?sortedRegistrants.map((function(registrant){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{whiteSpace:"normal",children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{as:chakra_ui_layout_esm.Ug,isAttached:!0,w:"100%",children:[(0,jsx_runtime.jsxs)(LinkButton.Qj,{justifyContent:"flex-start",to:conferencePath+"/profile/view/"+registrant.id,size:"sm",linkProps:{width:"100%"},w:"100%",leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"user",iconStyle:"s",mr:5}),flexGrow:1,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:registrant.displayName}),null!=roomMembers&&roomMembers.find((function(r){return r.registrantId===registrant.id&&r.personRoleName===graphql.FZ1.Admin}))?(0,jsx_runtime.jsx)(chakra_ui_tag_esm.Vp,{ml:2,colorScheme:"SecondaryActionButton",size:"sm",children:"Admin"}):void 0]}),canControlMembers?(0,jsx_runtime.jsx)(chakra_ui_button_esm.hU,{icon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.DeleteIcon,{}),"aria-label":"Delete member",onClick:function onClick(){return deleteMember(registrant.id)},isDisabled:registrant.id===(null==mRegistrant?void 0:mRegistrant.id),size:"sm",colorScheme:"DestructiveActionButton"}):void 0]})},registrant.id)})):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:["No"," ",roomDetails.managementModeName===graphql.ZvF.Public?"admins":"members"," ","have been added to this room."]})})]})}),[canControlMembers,conferencePath,deleteMember,null==mRegistrant?void 0:mRegistrant.id,roomDetails.managementModeName,roomMembers,sortedRegistrants]);return null!==(_ref4=loading||sortedRegistrants.length!==(null==roomMembers?void 0:roomMembers.length))&&void 0!==_ref4&&_ref4?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading members",size:"sm"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roomMembersList,canControlMembers?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AddRoomPersonModal,{roomId:roomDetails.id,managementModeName:roomDetails.managementModeName,isOpen:addMemberModal.isOpen,onClose:addMemberModal.onClose}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{textAlign:"right",mb:2,children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{mt:2,size:"sm",colorScheme:"PrimaryActionButton","aria-label":"Add people to room",title:"Add people to room",onClick:addMemberModal.onOpen,children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"plus",iconStyle:"s",mr:3}),"Add people"]})})]}):void 0]})}RoomMembersModal.displayName="RoomMembersModal",(0,urql_core.Ps)(RoomMembersModal_templateObject||(RoomMembersModal_templateObject=function RoomMembersModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation RemoveRegistrantFromRoom($registrantId: uuid!, $roomId: uuid!) {\n        delete_room_RoomMembership(where: { registrantId: { _eq: $registrantId }, roomId: { _eq: $roomId } }) {\n            affected_rows\n        }\n    }\n"])));try{RoomMembersModal.displayName="RoomMembersModal",RoomMembersModal.__docgenInfo={description:"",displayName:"RoomMembersModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Members/RoomMembersModal.tsx#RoomMembersModal"]={docgenInfo:RoomMembersModal.__docgenInfo,name:"RoomMembersModal",path:"src/aspects/Conference/Attend/Room/Members/RoomMembersModal.tsx#RoomMembersModal"})}catch(__react_docgen_typescript_loader_error){}function RoomMembersButton(_ref){var roomDetails=_ref.roomDetails,listModal=(0,chakra_ui_hooks_esm.qY)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{"aria-label":"Members of this room",title:"Members of this room",onClick:listModal.onOpen,size:"sm",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"users",iconStyle:"s",mr:3}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Room details"})]}),(0,jsx_runtime.jsx)(RoomMembersModal,{isOpen:listModal.isOpen,onClose:listModal.onClose,roomDetails})]})}try{RoomMembersButton.displayName="RoomMembersButton",RoomMembersButton.__docgenInfo={description:"",displayName:"RoomMembersButton",props:{roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Members/RoomMembersButton.tsx#RoomMembersButton"]={docgenInfo:RoomMembersButton.__docgenInfo,name:"RoomMembersButton",path:"src/aspects/Conference/Attend/Room/Members/RoomMembersButton.tsx#RoomMembersButton"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js");var RoomSponsorContent_templateObject,chakra_ui_alert_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+alert@1.3.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/alert/dist/chakra-ui-alert.esm.js"),formatRelative=__webpack_require__("../node_modules/.pnpm/date-fns@2.28.0/node_modules/date-fns/esm/formatRelative/index.js"),Card=__webpack_require__("./src/aspects/Card/index.tsx"),WaitingPage=__webpack_require__("./src/aspects/ShuffleRooms/WaitingPage.tsx"),ItemCard=__webpack_require__("./src/aspects/Conference/Attend/Content/ItemCard.tsx"),ItemElements=__webpack_require__("./src/aspects/Conference/Attend/Content/ItemElements.tsx"),ExhibitionLayout=__webpack_require__("./src/aspects/Conference/Attend/Exhibition/ExhibitionLayout.tsx"),EventCard=__webpack_require__("./src/aspects/Conference/Attend/Schedule/EventCard.tsx"),ElementsGridLayout=__webpack_require__("./src/aspects/Conference/Attend/Content/Element/ElementsGridLayout.tsx"),ItemEvents=__webpack_require__("./src/aspects/Conference/Attend/Content/ItemEvents.tsx");function RoomSponsorContent_slicedToArray(arr,i){return function RoomSponsorContent_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function RoomSponsorContent_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function RoomSponsorContent_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RoomSponsorContent_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RoomSponsorContent_arrayLikeToArray(o,minLen)}(arr,i)||function RoomSponsorContent_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RoomSponsorContent_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RoomSponsorContent(_ref){var _data$sessions,_data$presentations,itemId=_ref.itemId,roomId=_ref.roomId,anyCurrentOrNextEvent=_ref.anyCurrentOrNextEvent,_useRoomSponsorConten3=RoomSponsorContent_slicedToArray((0,graphql.SKM)({variables:{itemId,roomId,includeAbstract:!1,includeItemEvents:!1}}),1)[0],data=_useRoomSponsorConten3.data,error=_useRoomSponsorConten3.error,loading=_useRoomSponsorConten3.fetching,elements=(0,react.useMemo)((function(){var _data$content_Item$0$,_data$content_Item$;return null!==(_data$content_Item$0$=null==data||null===(_data$content_Item$=data.content_Item[0])||void 0===_data$content_Item$?void 0:_data$content_Item$.elements)&&void 0!==_data$content_Item$0$?_data$content_Item$0$:[]}),[null==data?void 0:data.content_Item]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[loading?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):error?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"An error occurred loading in data."}):void 0,(0,jsx_runtime.jsx)(ElementsGridLayout.Z,{elements}),anyCurrentOrNextEvent?void 0:(0,jsx_runtime.jsx)(ItemEvents.Q,{sessions:null!==(_data$sessions=null==data?void 0:data.sessions)&&void 0!==_data$sessions?_data$sessions:[],presentations:null!==(_data$presentations=null==data?void 0:data.presentations)&&void 0!==_data$presentations?_data$presentations:[],currentRoomId:roomId})]})}(0,urql_core.Ps)(RoomSponsorContent_templateObject||(RoomSponsorContent_templateObject=function RoomSponsorContent_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query RoomSponsorContent_GetElements(\n        $itemId: uuid!\n        $roomId: uuid!\n        $includeAbstract: Boolean!\n        $includeItemEvents: Boolean!\n    ) @cached {\n        content_Item(where: { id: { _eq: $itemId }, typeName: { _eq: SPONSOR } }) {\n            ...RoomSponsorContent_ItemData\n        }\n        sessions: schedule_Event(\n            where: {\n                _and: [\n                    { _or: [{ roomId: { _eq: $roomId } }, { itemId: { _eq: $itemId } }] }\n                    { sessionEventId: { _is_null: true } }\n                ]\n            }\n        ) {\n            ...ScheduleEvent\n        }\n        presentations: schedule_Event(\n            where: {\n                _and: [\n                    { _or: [{ roomId: { _eq: $roomId } }, { itemId: { _eq: $itemId } }] }\n                    { sessionEventId: { _is_null: false } }\n                ]\n            }\n        ) {\n            ...ItemPresentation\n        }\n    }\n\n    fragment RoomSponsorContent_ItemData on content_Item {\n        id\n        typeName\n        elements {\n            ...RoomSponsorContent_ElementData\n        }\n    }\n\n    fragment RoomSponsorContent_ElementData on content_Element {\n        id\n        name\n        isHidden\n        typeName\n        data\n        layoutData\n        itemId\n    }\n"])));try{RoomSponsorContent.displayName="RoomSponsorContent",RoomSponsorContent.__docgenInfo={description:"",displayName:"RoomSponsorContent",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string"}},roomId:{defaultValue:null,description:"",name:"roomId",required:!0,type:{name:"string"}},anyCurrentOrNextEvent:{defaultValue:null,description:"",name:"anyCurrentOrNextEvent",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Sponsor/RoomSponsorContent.tsx#RoomSponsorContent"]={docgenInfo:RoomSponsorContent.__docgenInfo,name:"RoomSponsorContent",path:"src/aspects/Conference/Attend/Room/Sponsor/RoomSponsorContent.tsx#RoomSponsorContent"})}catch(__react_docgen_typescript_loader_error){}function VideoElementButton(_ref){var elementName=_ref.elementName,isSelected=_ref.isSelected,onClick=_ref.onClick,bgColour=(0,chakra_ui_color_mode_esm.ff)("gray.800","black"),activeBgColour=(0,chakra_ui_color_mode_esm.ff)("gray.700","gray.800");return(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{bgColor:bgColour,border:isSelected?"1px solid white":"none",_hover:{},_focus:{boxShadow:Outline.j},_active:{bgColor:activeBgColour},role:"group",color:"white",h:"100%",w:"100%",whiteSpace:"normal",overflowWrap:"anywhere",onClick,children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{p:4,py:6,spacing:4,w:"100%",h:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{textAlign:"center",w:"100%",mb:"auto",children:elementName}),(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"play-circle",fontSize:"5xl",color:isSelected?"PrimaryActionButton.500":void 0,_groupHover:{color:"PrimaryActionButton.500"},transition:"color 0.3s ease-in-out"})]})})}VideoElementButton.displayName="VideoElementButton";try{VideoElementButton.displayName="VideoElementButton",VideoElementButton.__docgenInfo={description:"",displayName:"VideoElementButton",props:{elementName:{defaultValue:null,description:"",name:"elementName",required:!0,type:{name:"string"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Video/VideoElementButton.tsx#VideoElementButton"]={docgenInfo:VideoElementButton.__docgenInfo,name:"VideoElementButton",path:"src/aspects/Conference/Attend/Room/Video/VideoElementButton.tsx#VideoElementButton"})}catch(__react_docgen_typescript_loader_error){}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return RoomContent_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function RoomContent_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RoomContent_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RoomContent_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RoomContent_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RoomContent(_ref){var _currentRoomEvent$ite3,_currentRoomEvent$ite4,_currentRoomEvent$ite5,_nextRoomEvent$item$t,_nextRoomEvent$item,_roomDetails$item,_roomDetails$item2,_roomDetails$item3,currentRoomEvent=_ref.currentRoomEvent,nextRoomEvent=_ref.nextRoomEvent,roomDetails=_ref.roomDetails,currentlySelectedVideoElementId=_ref.currentlySelectedVideoElementId,onChooseVideo=_ref.onChooseVideo,conferencePath=(0,AuthParameters.h)().conferencePath,currentRegistrant=(0,useCurrentRegistrant.ZP)(),currentEventRole=(0,react.useMemo)((function(){var _currentRoomEvent$eve;return null==currentRoomEvent||null===(_currentRoomEvent$eve=currentRoomEvent.eventPeople.find((function(p){return p.person.registrantId&&p.person.registrantId===currentRegistrant.id})))||void 0===_currentRoomEvent$eve?void 0:_currentRoomEvent$eve.roleName}),[currentRegistrant,null==currentRoomEvent?void 0:currentRoomEvent.eventPeople]),nextEventRole=(0,react.useMemo)((function(){var _nextRoomEvent$eventP;return null==nextRoomEvent||null===(_nextRoomEvent$eventP=nextRoomEvent.eventPeople.find((function(p){return p.person.registrantId&&p.person.registrantId===currentRegistrant.id})))||void 0===_nextRoomEvent$eventP?void 0:_nextRoomEvent$eventP.roleName}),[currentRegistrant,null==nextRoomEvent?void 0:nextRoomEvent.eventPeople]),currentEventVideosEl=(0,react.useMemo)((function(){var _currentRoomEvent$ite,_currentRoomEvent$ite2;return null!=currentRoomEvent&&null!==(_currentRoomEvent$ite=currentRoomEvent.item)&&void 0!==_currentRoomEvent$ite&&null!==(_currentRoomEvent$ite2=_currentRoomEvent$ite.videoElements)&&void 0!==_currentRoomEvent$ite2&&_currentRoomEvent$ite2.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.Eq,{role:"list",justify:"center",children:currentRoomEvent.item.videoElements.map((function(element){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.Uc,{role:"listitem",w:"30ch",overflow:"hidden",p:"3px",children:(0,jsx_runtime.jsx)(VideoElementButton,{isSelected:currentlySelectedVideoElementId===element.id,elementName:element.name,onClick:function onClick(){return null==onChooseVideo?void 0:onChooseVideo(element.id)}})},element.id)}))}):(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"warning",mt:3,children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),"No videos have been added to this content item yet."]})}),[null==currentRoomEvent||null===(_currentRoomEvent$ite3=currentRoomEvent.item)||void 0===_currentRoomEvent$ite3?void 0:_currentRoomEvent$ite3.videoElements,currentlySelectedVideoElementId,onChooseVideo]),now5s=(0,useRealTime.$)(5e3),currentEventEndTime=(0,react.useMemo)((function(){return(null==currentRoomEvent?void 0:currentRoomEvent.scheduledEndTime)&&Date.parse(currentRoomEvent.scheduledEndTime)}),[null==currentRoomEvent?void 0:currentRoomEvent.scheduledEndTime]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:8,flexGrow:1,zIndex:1,py:4,px:[2,2,4],w:"100%",children:[currentRoomEvent?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,w:"100%",children:[(0,jsx_runtime.jsxs)(Card.Z,{heading:null!==(_currentRoomEvent$ite4=null===(_currentRoomEvent$ite5=currentRoomEvent.item)||void 0===_currentRoomEvent$ite5?void 0:_currentRoomEvent$ite5.title)&&void 0!==_currentRoomEvent$ite4?_currentRoomEvent$ite4:currentRoomEvent.name,subHeading:currentRoomEvent.item?(0,ItemCard.T)(currentRoomEvent.item.typeName):void 0,to:currentRoomEvent.item?conferencePath+"/item/"+currentRoomEvent.item.id:void 0,w:"100%",topLeftButton:{colorScheme:"LiveActionButton",iconStyle:"s",label:"Started "+(0,formatRelative.Z)(Date.parse(currentRoomEvent.scheduledStartTime),now5s),variant:"solid",showLabel:!0},editControls:[].concat(_toConsumableArray(currentRoomEvent.scheduledEndTime?[(0,jsx_runtime.jsxs)(chakra_ui_tag_esm.Vp,{colorScheme:"blue",borderRadius:"full",children:["Ends ",(0,formatRelative.Z)(Date.parse(currentRoomEvent.scheduledEndTime),now5s)]},"ends-at")]:[]),_toConsumableArray(currentEventRole?[(0,jsx_runtime.jsxs)(chakra_ui_tag_esm.Vp,{colorScheme:"Room-CurrentEventRoleLabel",my:2,borderRadius:"full",children:["You are ",currentEventRole]},"role")]:[])),children:[currentRoomEvent.shufflePeriod&&currentEventEndTime&&currentEventEndTime-now5s>9e4?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{children:(0,jsx_runtime.jsx)(WaitingPage.ShufflePeriodBox,{period:currentRoomEvent.shufflePeriod})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),currentRoomEvent.modeName===graphql.kdg.VideoPlayer?currentEventVideosEl:void 0,currentRoomEvent.modeName!==graphql.kdg.Exhibition&&currentRoomEvent.itemId?(0,jsx_runtime.jsx)(ItemElements.d,{itemId:currentRoomEvent.itemId,noHeading:!0}):void 0,currentRoomEvent.exhibitionId?(0,jsx_runtime.jsx)(ExhibitionLayout.v,{exhibitionId:currentRoomEvent.exhibitionId,hideLiveViewButton:!0}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.gC,{spacing:4,pt:2,pl:[6,10,14],w:"100%",alignItems:"flex-end",children:currentRoomEvent.presentations.map((function(presentation){return(0,jsx_runtime.jsx)(EventCard.Z,{event:presentation,includeAbstract:!0,includePresentations:!1,includeTypeName:!0,limitAbstractLengthTo:-1},presentation.id)}))})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),nextRoomEvent?(0,jsx_runtime.jsx)(Card.Z,{heading:null!==(_nextRoomEvent$item$t=null===(_nextRoomEvent$item=nextRoomEvent.item)||void 0===_nextRoomEvent$item?void 0:_nextRoomEvent$item.title)&&void 0!==_nextRoomEvent$item$t?_nextRoomEvent$item$t:nextRoomEvent.name,subHeading:nextRoomEvent.item?(0,ItemCard.T)(nextRoomEvent.item.typeName):void 0,to:nextRoomEvent.item?conferencePath+"/item/"+nextRoomEvent.item.id:void 0,w:"100%",topLeftButton:{colorScheme:"blue",iconStyle:"s",label:"Starts "+(0,formatRelative.Z)(Date.parse(nextRoomEvent.scheduledStartTime),now5s),variant:"solid",showLabel:!0},editControls:nextEventRole?[(0,jsx_runtime.jsxs)(chakra_ui_tag_esm.Vp,{colorScheme:"Room-CurrentEventRoleLabel",my:2,borderRadius:"full",children:["You are ",nextEventRole]},"role")]:[],children:null!=nextRoomEvent&&nextRoomEvent.itemId?(0,jsx_runtime.jsx)(ItemElements.d,{itemId:nextRoomEvent.itemId,noHeading:!0}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),currentRoomEvent||nextRoomEvent||!roomDetails.isProgramRoom||(null===(_roomDetails$item=roomDetails.item)||void 0===_roomDetails$item?void 0:_roomDetails$item.typeName)===graphql.gqi.Sponsor?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{p:5,children:"No events in this room in the next hour."}),null!==(_roomDetails$item2=roomDetails.item)&&void 0!==_roomDetails$item2&&_roomDetails$item2.id&&roomDetails.item.typeName!==graphql.gqi.Sponsor?(0,jsx_runtime.jsx)(Card.Z,{w:"100%",heading:roomDetails.item.title,subHeading:(0,ItemCard.T)(roomDetails.item.typeName),to:conferencePath+"/item/"+roomDetails.item.id,children:(0,jsx_runtime.jsx)(ItemElements.d,{itemId:roomDetails.item.id,noHeading:!0})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(null===(_roomDetails$item3=roomDetails.item)||void 0===_roomDetails$item3?void 0:_roomDetails$item3.typeName)===graphql.gqi.Sponsor?(0,jsx_runtime.jsx)(RoomSponsorContent,{itemId:roomDetails.item.id,roomId:roomDetails.id,anyCurrentOrNextEvent:Boolean(currentRoomEvent||nextRoomEvent)}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})]})}RoomContent.displayName="RoomContent";try{RoomContent.displayName="RoomContent",RoomContent.__docgenInfo={description:"",displayName:"RoomContent",props:{currentRoomEvent:{defaultValue:null,description:"",name:"currentRoomEvent",required:!0,type:{name:"Room_EventSummaryFragment | null"}},nextRoomEvent:{defaultValue:null,description:"",name:"nextRoomEvent",required:!0,type:{name:"Room_EventSummaryFragment | null"}},roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}},currentlySelectedVideoElementId:{defaultValue:null,description:"",name:"currentlySelectedVideoElementId",required:!1,type:{name:"string"}},onChooseVideo:{defaultValue:null,description:"",name:"onChooseVideo",required:!1,type:{name:"((elementId: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/RoomContent.tsx#RoomContent"]={docgenInfo:RoomContent.__docgenInfo,name:"RoomContent",path:"src/aspects/Conference/Attend/Room/RoomContent.tsx#RoomContent"})}catch(__react_docgen_typescript_loader_error){}var ContinuationPassiveChoice_templateObject,continuation=__webpack_require__("../packages/shared/shared-types/build/esm/continuation.js"),v4=__webpack_require__("../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v4.js"),react_router=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js")),chakra_ui_progress_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+progress@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/progress/dist/chakra-ui-progress.esm.js"),tinycolor=__webpack_require__("../node_modules/.pnpm/tinycolor2@1.4.2/node_modules/tinycolor2/tinycolor.js"),tinycolor_default=__webpack_require__.n(tinycolor);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function ContinuationChoiceList_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ContinuationChoiceList_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ContinuationChoiceList_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ContinuationChoiceList_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ContinuationChoiceList(_ref){var choices=_ref.choices,isBackstage=_ref.isBackstage,noBackstage=_ref.noBackstage,currentRole=_ref.currentRole,selectedOptionId=_ref.selectedOptionId,onChoiceSelected=_ref.onChoiceSelected,leastDestructiveRef=_ref.leastDestructiveRef,selectDefault=_ref.selectDefault,sortedChoices=(0,react.useMemo)((function(){return es.MRu((function(x){return x.priority}),choices)}),[choices]),defaultOptionId=(0,react.useMemo)((function(){var _step,_iterator=_createForOfIteratorHelper(sortedChoices);try{for(_iterator.s();!(_step=_iterator.n()).done;){var option=_step.value;switch(option.defaultFor){case continuation.qp.All:return option.id;case continuation.qp.Chairs:case continuation.qp.Presenters:if((noBackstage||isBackstage)&&currentRole===option.defaultFor)return option.id;break;case continuation.qp.Viewers:if(noBackstage||!isBackstage)return option.id}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null}),[currentRole,isBackstage,noBackstage,sortedChoices]);return(0,react.useEffect)((function(){selectDefault&&onChoiceSelected(defaultOptionId,!0,!0)}),[defaultOptionId,onChoiceSelected,selectDefault]),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.aV,{spacing:2,py:"3px",children:[sortedChoices.map((function(option){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{w:"100%",children:(0,jsx_runtime.jsx)(ContinuationChoice,{option,isSelected:selectedOptionId===option.id,onSelect:function onSelect(){onChoiceSelected(option.id,!1,!1)}})},option.id)})),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{w:"100%",children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"md",textAlign:"left",w:"100%",justifyContent:"flex-start",alignItems:"center",onClick:function onClick(ev){ev.stopPropagation(),onChoiceSelected(null,null===defaultOptionId,!1)},variant:"outline",ref:leastDestructiveRef,children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{mr:2,children:"Stay on this page"}),null===selectedOptionId?(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"check-circle",ml:"auto"}):(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.div,{w:6})]})})]})}function ContinuationChoice(_ref2){var option=_ref2.option,isSelected=_ref2.isSelected,onSelect=_ref2.onSelect,borderColour=(0,chakra_ui_color_mode_esm.ff)("gray.300","gray.600"),colorMode=(0,chakra_ui_color_mode_esm.If)().colorMode,baseBgColour="light"===colorMode?"gray.200":"gray.600",baseGrey=(0,chakra_ui_system_esm.dQ)("colors",baseBgColour),baseColour=(0,react.useMemo)((function(){return 0!==tinycolor_default()(option.colour).getAlpha()?option.colour:baseGrey}),[baseGrey,option.colour]),bgColour=(0,react.useMemo)((function(){return tinycolor_default()(baseColour)}),[baseColour]),bgColour_Hover=(0,react.useMemo)((function(){return"light"===colorMode?tinycolor_default()(baseColour).darken(15):tinycolor_default()(baseColour).lighten(15)}),[baseColour,colorMode]),bgColour_Active=(0,react.useMemo)((function(){return"light"===colorMode?tinycolor_default()(baseColour).darken(30):tinycolor_default()(baseColour).lighten(30)}),[baseColour,colorMode]),textColour=(0,react.useMemo)((function(){return bgColour.isDark()}),[bgColour])?"white":"black",textColour_Hover=(0,react.useMemo)((function(){return bgColour_Hover.isDark()}),[bgColour_Hover])?"white":"black",textColour_Active=(0,react.useMemo)((function(){return bgColour_Active.isDark()}),[bgColour_Active])?"white":"black",shadow=(0,chakra_ui_color_mode_esm.ff)("md","light-md");return(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"md",textAlign:"left",w:"100%",justifyContent:"flex-start",alignItems:"center",bgColor:bgColour.toRgbString(),color:textColour,border:"1px solid",borderColor:borderColour,shadow,_hover:{bgColor:bgColour_Hover.toRgbString(),color:textColour_Hover,shadow},_focus:{bgColor:bgColour_Hover.toRgbString(),color:textColour_Hover,boxShadow:"0 0 0 2px rgba(255, 187, 0, 0.8)"},_active:{bgColor:bgColour_Active.toRgbString(),color:textColour_Active},onClick:function onClick(ev){ev.stopPropagation(),onSelect()},isActive:!!isSelected||void 0,children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{mr:2,children:option.description}),isSelected?(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"check-circle",ml:"auto"}):(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.div,{w:6})]})}ContinuationChoiceList.displayName="ContinuationChoiceList",ContinuationChoice.displayName="ContinuationChoice";try{ContinuationChoiceList.displayName="ContinuationChoiceList",ContinuationChoiceList.__docgenInfo={description:"",displayName:"ContinuationChoiceList",props:{choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly ContinuationChoices_ContinuationFragment[]"}},isBackstage:{defaultValue:null,description:"",name:"isBackstage",required:!0,type:{name:"boolean"}},noBackstage:{defaultValue:null,description:"",name:"noBackstage",required:!0,type:{name:"boolean"}},currentRole:{defaultValue:null,description:"",name:"currentRole",required:!0,type:{name:"enum",value:[{value:'"None"'},{value:'"Everyone"'},{value:'"Presenters"'},{value:'"Chairs"'},{value:'"Viewers"'}]}},leastDestructiveRef:{defaultValue:null,description:"",name:"leastDestructiveRef",required:!1,type:{name:"MutableRefObject<any>"}},selectedOptionId:{defaultValue:null,description:"",name:"selectedOptionId",required:!0,type:{name:"string | null"}},onChoiceSelected:{defaultValue:null,description:"",name:"onChoiceSelected",required:!0,type:{name:"(choiceId: string | null, isDefault: boolean, isInitial: boolean) => void"}},selectDefault:{defaultValue:null,description:"",name:"selectDefault",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Continuation/ContinuationChoiceList.tsx#ContinuationChoiceList"]={docgenInfo:ContinuationChoiceList.__docgenInfo,name:"ContinuationChoiceList",path:"src/aspects/Conference/Attend/Continuation/ContinuationChoiceList.tsx#ContinuationChoiceList"})}catch(__react_docgen_typescript_loader_error){}function ContinuationActiveChoice_slicedToArray(arr,i){return function ContinuationActiveChoice_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ContinuationActiveChoice_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ContinuationActiveChoice_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ContinuationActiveChoice_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ContinuationActiveChoice_arrayLikeToArray(o,minLen)}(arr,i)||function ContinuationActiveChoice_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ContinuationActiveChoice_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ContinuationActiveChoice(_ref){var choices=_ref.choices,isBackstage=_ref.isBackstage,noBackstage=_ref.noBackstage,currentRole=_ref.currentRole,timeRemaining=_ref.timeRemaining,timeMax=_ref.timeMax,selectedOptionId=_ref.selectedOptionId,onChoiceSelected=_ref.onChoiceSelected,_useState2=ContinuationActiveChoice_slicedToArray((0,react.useState)(!1),2),hide=_useState2[0],setHide=_useState2[1],setChoice=(0,react.useCallback)((function(choiceId,isDefault){isDefault||(setHide(!0),onChoiceSelected(choiceId,isDefault))}),[onChoiceSelected]);return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen:!hide,onClose:function onClose(){setHide(!0)},children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{flexWrap:"wrap",mb:2,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontWeight:"bold",mb:2,children:"Where would you like to go next?"}),timeRemaining>0?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:(0,jsx_runtime.jsx)(chakra_ui_progress_esm.D8,{size:"40px",color:"SecondaryActionButton.400",value:timeRemaining,max:timeMax,children:(0,jsx_runtime.jsxs)(chakra_ui_progress_esm.ip,{children:[Math.round(timeRemaining/1e3),"s"]})})}):void 0]})}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsx)(ContinuationChoiceList,{choices,isBackstage,noBackstage,currentRole,selectedOptionId,onChoiceSelected:setChoice,selectDefault:!0})}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{})]})]})}ContinuationActiveChoice.displayName="ContinuationActiveChoice";try{ContinuationActiveChoice.displayName="ContinuationActiveChoice",ContinuationActiveChoice.__docgenInfo={description:"",displayName:"ContinuationActiveChoice",props:{choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly ContinuationChoices_ContinuationFragment[]"}},isBackstage:{defaultValue:null,description:"",name:"isBackstage",required:!0,type:{name:"boolean"}},noBackstage:{defaultValue:null,description:"",name:"noBackstage",required:!0,type:{name:"boolean"}},currentRole:{defaultValue:null,description:"",name:"currentRole",required:!0,type:{name:"enum",value:[{value:'"None"'},{value:'"Everyone"'},{value:'"Presenters"'},{value:'"Chairs"'},{value:'"Viewers"'}]}},timeRemaining:{defaultValue:null,description:"",name:"timeRemaining",required:!0,type:{name:"number"}},timeMax:{defaultValue:null,description:"",name:"timeMax",required:!0,type:{name:"number"}},selectedOptionId:{defaultValue:null,description:"",name:"selectedOptionId",required:!0,type:{name:"string | null"}},onChoiceSelected:{defaultValue:null,description:"",name:"onChoiceSelected",required:!0,type:{name:"(choiceId: string | null, isDefault: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Continuation/ContinuationActiveChoice.tsx#ContinuationActiveChoice"]={docgenInfo:ContinuationActiveChoice.__docgenInfo,name:"ContinuationActiveChoice",path:"src/aspects/Conference/Attend/Continuation/ContinuationActiveChoice.tsx#ContinuationActiveChoice"})}catch(__react_docgen_typescript_loader_error){}function ContinuationPassiveChoice_slicedToArray(arr,i){return function ContinuationPassiveChoice_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ContinuationPassiveChoice_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ContinuationPassiveChoice_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ContinuationPassiveChoice_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ContinuationPassiveChoice_arrayLikeToArray(o,minLen)}(arr,i)||function ContinuationPassiveChoice_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ContinuationPassiveChoice_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ContinuationChoices_templateObject;function ContinuationPassiveChoice(_ref){var choices=_ref.choices,isBackstage=_ref.isBackstage,noBackstage=_ref.noBackstage,currentRole=_ref.currentRole,timeRemaining=_ref.timeRemaining,timeMax=_ref.timeMax,selectedOptionId=_ref.selectedOptionId,onChoiceSelected=_ref.onChoiceSelected,activate=_ref.activate,dropUpBoxBorderColor=(0,chakra_ui_color_mode_esm.ff)("gray.400","gray.500"),borderColor=(0,chakra_ui_color_mode_esm.ff)("gray.300","gray.600"),_useState2=ContinuationPassiveChoice_slicedToArray((0,react.useState)("50vh"),2),vertical=_useState2[0],setVertical=_useState2[1],_useState4=ContinuationPassiveChoice_slicedToArray((0,react.useState)(!1),2),madeFirstChoice=_useState4[0],setMadeFirstChoice=_useState4[1],shadow=(0,chakra_ui_color_mode_esm.ff)("bottom-popup-light","bottom-popup-dark"),setChoice=(0,react.useCallback)((function(choiceId,isDefault,isInitial){onChoiceSelected(choiceId,isDefault),isInitial||(setVertical("0vh"),setMadeFirstChoice(!0))}),[onChoiceSelected]),transition="top 0.25s ease-in-out, bottom 0.25s ease-in-out, width 0.25s ease-in-out, height 0.25s ease-in-out, opacity 0.25s ease-in-out",opacityKeyframesStr2=(0,emotion_react_browser_esm.keyframes)(ContinuationPassiveChoice_templateObject||(ContinuationPassiveChoice_templateObject=function ContinuationPassiveChoice_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n        0% {\n            opacity: 0;\n        }\n        60% {\n            opacity: 0.3;\n        }\n        100% {\n            opacity: 1;\n        }\n    "])));(0,react.useEffect)((function(){var tId=setTimeout((function(){madeFirstChoice||setVertical("0vh")}),2e4);return function(){clearTimeout(tId)}}),[madeFirstChoice]);var leastDestructiveRef=(0,react.useRef)(null),activeChoice=(0,react.useMemo)((function(){return selectedOptionId&&choices.find((function(choice){return choice.id===selectedOptionId}))}),[selectedOptionId,choices]);return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.aR,{leastDestructiveRef,onClose:function onClose(){},isOpen:!0,isCentered:!0,motionPreset:"slideInBottom",trapFocus:"0vh"!==vertical,blockScrollOnMount:"0vh"!==vertical,closeOnEsc:!1,closeOnOverlayClick:!1,scrollBehavior:"inside",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",bgColor:"black",zIndex:"overlay",transition,opacity:"0vh"===vertical?0:.4,pointerEvents:"0vh"===vertical?"none":void 0}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm._T,{position:"fixed",justifyContent:"center",zIndex:"modal",top:vertical,transition,animation:opacityKeyframesStr2+" 500ms 1 ease-out forwards",userSelect:"none",borderColor,borderWidth:1,shadow,my:0,containerProps:{pointerEvents:"0vh"===vertical?"none":void 0},children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.fY,{fontSize:"md",w:"100%",mb:0,p:0,tabIndex:"0vh"===vertical?0:-1,cursor:"0vh"===vertical?"pointer":void 0,onClick:function onClick(){"0vh"===vertical&&(setMadeFirstChoice(!0),setVertical("50vh"))},onKeyDown:function onKeyDown(ev){"Enter"!==ev.key&&"Space"!==ev.key||"0vh"===vertical&&(setMadeFirstChoice(!0),setVertical("50vh"))},pointerEvents:"0vh"===vertical?"all":void 0,_focus:"0vh"===vertical?{boxShadow:Outline.j}:void 0,children:[(0,jsx_runtime.jsx)(chakra_ui_progress_esm.Ex,{colorScheme:"purple",value:timeMax-timeRemaining,max:timeMax,min:0,userSelect:"none"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{px:6,my:2,alignItems:"flex-start",mr:"auto",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontWeight:"bold",id:"passive-continuation-choices-title",userSelect:"none",w:"100%",children:"0vh"===vertical?"Up next:":"Where would you like to go next?"}),"0vh"!==vertical?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{mb:2,alignItems:"flex-start",justifyContent:"flex-start",w:"100%",children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{id:"passive-continuation-choices-description",userSelect:"none",mr:2,children:"This event is ending soon. Please choose one of these options:"})}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{alignItems:"flex-start",justifyContent:"flex-start",w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{borderWidth:"2px",pl:3,pr:2,pt:1,pb:2,borderRadius:"lg",borderStyle:"solid",borderColor:dropUpBoxBorderColor,w:"100%",mr:activeChoice?2:0,alignItems:"center",justifyContent:"flex-start",children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{mr:2,children:activeChoice?activeChoice.description:"Stay on this page"}),(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronUpIcon,{fontSize:"xl",mt:1,ml:"auto"})]}),activeChoice&&timeRemaining>0?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{ml:"auto",mb:2,children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"md",px:2,py:2,colorScheme:"purple",onClick:activate,"aria-label":"Activate your choice now",children:"Go"})}):void 0]})]})]}),"0vh"===vertical?void 0:(0,jsx_runtime.jsx)(chakra_ui_modal_esm.iP,{m:0,pt:0,children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{w:"100%",borderRadius:"3xl",flexDir:"column",alignItems:"stretch",maxW:"100%",children:(0,jsx_runtime.jsx)(ContinuationChoiceList,{choices,isBackstage,noBackstage,currentRole,selectedOptionId,onChoiceSelected:setChoice,leastDestructiveRef,selectDefault:!madeFirstChoice})})})]})]})}ContinuationPassiveChoice.displayName="ContinuationPassiveChoice";try{ContinuationPassiveChoice.displayName="ContinuationPassiveChoice",ContinuationPassiveChoice.__docgenInfo={description:"",displayName:"ContinuationPassiveChoice",props:{selectedOptionId:{defaultValue:null,description:"",name:"selectedOptionId",required:!0,type:{name:"string | null"}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly ContinuationChoices_ContinuationFragment[]"}},isBackstage:{defaultValue:null,description:"",name:"isBackstage",required:!0,type:{name:"boolean"}},noBackstage:{defaultValue:null,description:"",name:"noBackstage",required:!0,type:{name:"boolean"}},currentRole:{defaultValue:null,description:"",name:"currentRole",required:!0,type:{name:"enum",value:[{value:'"None"'},{value:'"Everyone"'},{value:'"Presenters"'},{value:'"Chairs"'},{value:'"Viewers"'}]}},timeRemaining:{defaultValue:null,description:"",name:"timeRemaining",required:!0,type:{name:"number"}},timeMax:{defaultValue:null,description:"",name:"timeMax",required:!0,type:{name:"number"}},onChoiceSelected:{defaultValue:null,description:"",name:"onChoiceSelected",required:!0,type:{name:"(choiceId: string | null, isDefault: boolean) => void"}},activate:{defaultValue:null,description:"",name:"activate",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Continuation/ContinuationPassiveChoice.tsx#ContinuationPassiveChoice"]={docgenInfo:ContinuationPassiveChoice.__docgenInfo,name:"ContinuationPassiveChoice",path:"src/aspects/Conference/Attend/Continuation/ContinuationPassiveChoice.tsx#ContinuationPassiveChoice"})}catch(__react_docgen_typescript_loader_error){}function ContinuationChoices_toConsumableArray(arr){return function ContinuationChoices_arrayWithoutHoles(arr){if(Array.isArray(arr))return ContinuationChoices_arrayLikeToArray(arr)}(arr)||function ContinuationChoices_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ContinuationChoices_unsupportedIterableToArray(arr)||function ContinuationChoices_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ContinuationChoices_slicedToArray(arr,i){return function ContinuationChoices_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ContinuationChoices_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ContinuationChoices_unsupportedIterableToArray(arr,i)||function ContinuationChoices_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ContinuationChoices_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ContinuationChoices_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ContinuationChoices_arrayLikeToArray(o,minLen):void 0}}function ContinuationChoices_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ContinuationChoices(_ref){var _response$data2,from=_ref.from,isBackstage=_ref.isBackstage,noBackstage=_ref.noBackstage,currentRole=_ref.currentRole,currentRoomId=_ref.currentRoomId,extraChoices=_ref.extraChoices,nowStatic_StartStr=(0,react.useMemo)((function(){return new Date(Date.now()+6e4).toISOString()}),[]),nowStatic_EndStr=(0,react.useMemo)((function(){return new Date(Date.now()-6e4).toISOString()}),[]),response=ContinuationChoices_slicedToArray((0,graphql.oqx)({variables:{fromId:"eventId"in from?from.eventId:from.shufflePeriodId,nowStart:nowStatic_StartStr,nowEnd:nowStatic_EndStr}}),1)[0],renderedAt=(0,react.useMemo)((function(){return Date.now()}),[]),now=(0,useRealTime.$)(1e4),allChoices=(0,react.useMemo)((function(){var _response$data;return null!==(_response$data=response.data)&&void 0!==_response$data&&_response$data.schedule_Continuation?[].concat(ContinuationChoices_toConsumableArray(extraChoices),ContinuationChoices_toConsumableArray(response.data.schedule_Continuation)):extraChoices}),[null===(_response$data2=response.data)||void 0===_response$data2?void 0:_response$data2.schedule_Continuation,extraChoices]),fromInternal=(0,react.useMemo)((function(){var _response$data$schedu;return response.data&&(allChoices.length>0||"shufflePeriodId"in from)?"eventId"in from?{eventId:from.eventId,itemId:from.itemId,scheduledEndTime:response.data.schedule_Event.length>0?Date.parse(response.data.schedule_Event[0].scheduledEndTime):0}:{shufflePeriodId:from.shufflePeriodId,periodEndTime:response.data.room_ShufflePeriod.length>0?Date.parse(response.data.room_ShufflePeriod[0].endAt):0,roomEndTime:from.shuffleRoomEndsAt,roomDuration:response.data.room_ShufflePeriod.length>0?60*response.data.room_ShufflePeriod[0].roomDurationMinutes*1e3:0,eventRoomId:null===(_response$data$schedu=response.data.schedule_Event[0])||void 0===_response$data$schedu?void 0:_response$data$schedu.roomId}:void 0}),[allChoices.length,from,response.data]);return fromInternal&&now-renderedAt>15e3?(0,jsx_runtime.jsx)(ContinuationChoices_Inner,{from:fromInternal,choices:allChoices,isBackstage,noBackstage,currentRole,currentRoomId}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}(0,urql_core.Ps)(ContinuationChoices_templateObject||(ContinuationChoices_templateObject=function ContinuationChoices_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    fragment ContinuationChoices_Continuation on schedule_Continuation {\n        id\n        to\n        defaultFor\n        isActiveChoice\n        priority\n        colour\n        description\n        fromEvent\n        fromShuffleQueue\n    }\n\n    query ContinuationChoices_Continuations($fromId: uuid!, $nowStart: timestamptz, $nowEnd: timestamptz) {\n        schedule_Continuation(\n            where: { _or: [{ fromEvent: { _eq: $fromId } }, { fromShuffleQueue: { _eq: $fromId } }] }\n        ) {\n            ...ContinuationChoices_Continuation\n        }\n        room_ShufflePeriod(where: { id: { _eq: $fromId } }) {\n            id\n            endAt\n            roomDurationMinutes\n        }\n        schedule_Event(\n            where: {\n                _or: [\n                    { id: { _eq: $fromId } }\n                    {\n                        scheduledStartTime: { _lte: $nowStart }\n                        scheduledEndTime: { _gte: $nowEnd }\n                        sessionEventId: { _is_null: true }\n                        shufflePeriodId: { _eq: $fromId }\n                    }\n                ]\n            }\n        ) {\n            id\n            roomId\n            shufflePeriodId\n            scheduledStartTime\n            scheduledEndTime\n        }\n    }\n\n    query ContinuationChoices_Rooms($ids: [uuid!]!) @cached {\n        content_Item(where: { id: { _in: $ids } }) {\n            id\n            room {\n                id\n                created_at\n            }\n        }\n        schedule_Event(where: { id: { _in: $ids } }) {\n            id\n            roomId\n        }\n    }\n"])));function ContinuationChoices_Inner(_ref2){var from=_ref2.from,choices=_ref2.choices,isBackstage=_ref2.isBackstage,noBackstage=_ref2.noBackstage,currentRole=_ref2.currentRole,currentRoomId=_ref2.currentRoomId,conferencePath=(0,AuthParameters.h)().conferencePath,roomsResponse=ContinuationChoices_slicedToArray((0,graphql.jAt)({variables:{ids:choices.reduce((function(acc,option){var to=option.to;if(to.type===continuation.aS.AutoDiscussionRoom){var _to$id,itemId=null!==(_to$id=to.id)&&void 0!==_to$id?_to$id:"eventId"in from?from.itemId:null;itemId&&acc.push(itemId)}else to.type===continuation.aS.Event&&acc.push(to.id);return acc}),[])}}),1)[0],isActiveChoice=(0,react.useMemo)((function(){return es.YjB((function(x){return x.isActiveChoice}),choices)}),[choices]),_useState2=ContinuationChoices_slicedToArray((0,react.useState)(null),2),selectedOptionId=_useState2[0],setSelectedOptionId=_useState2[1],now=(0,useRealTime.$)(1e3),initialTimeRemaining=(0,react.useMemo)((function(){return("eventId"in from?from.scheduledEndTime:(from.roomEndTime,from.periodEndTime,from.roomDuration,from.roomEndTime))-Date.now()}),[from]),_useMemo=(0,react.useMemo)((function(){var scheduledEndTime;if("eventId"in from)scheduledEndTime=from.scheduledEndTime;else{if(from.roomEndTime<from.periodEndTime-from.roomDuration)return{displayChoice:!1,timeRemaining:from.roomEndTime-now};scheduledEndTime=from.roomEndTime}return{displayChoice:choices.length>0&&(!isActiveChoice&&(now<scheduledEndTime||null===selectedOptionId)&&now>scheduledEndTime-12e4&&now<scheduledEndTime+6e4||isActiveChoice&&now>scheduledEndTime-2e4&&now<scheduledEndTime+6e4),timeRemaining:scheduledEndTime-now}}),[from,isActiveChoice,now,selectedOptionId,choices.length]),displayChoice=_useMemo.displayChoice,timeRemaining=_useMemo.timeRemaining,_useState4=ContinuationChoices_slicedToArray((0,react.useState)(!1),2),activateChoice=_useState4[0],setActivateChoice=_useState4[1],_useState6=ContinuationChoices_slicedToArray((0,react.useState)(!1),2),activatedChoice=_useState6[0],setActivatedChoice=_useState6[1];(0,react.useEffect)((function(){initialTimeRemaining>0&&timeRemaining<0&&(console.log("Time remaining < 0, Setting activate choice",{timeRemaining,initialTimeRemaining}),setActivateChoice(!0))}),[initialTimeRemaining,timeRemaining]);var activate=(0,react.useCallback)((function(){console.log("Activate called, Setting activate choice and clearing activated choice"),setActivateChoice(!0),setActivatedChoice(!1)}),[]),toast=(0,chakra_ui_toast_esm.pm)(),history=(0,react_router.k6)();(0,react.useEffect)((function(){if(activateChoice&&!activatedChoice){var activateChosenOption=function activateChosenOption(){var _to$tagId;if(null!==selectedOptionId){var _error,selectedOption=choices.find((function(x){return x.id===selectedOptionId})),error=null;if(selectedOption){var to=selectedOption.to;switch(to.type){case"function":console.log("Activate function",{choices,selectedOptionId,activateChoice,activatedChoice}),to.f();break;case continuation.aS.URL:window.location.assign(to.url);break;case continuation.aS.Room:currentRoomId!==to.id&&(console.log("Activate room",{choices,selectedOptionId,activateChoice,activatedChoice}),history.push(conferencePath+"/room/"+to.id));break;case continuation.aS.Event:if(!roomsResponse.fetching){var _roomsResponse$data,event=null===(_roomsResponse$data=roomsResponse.data)||void 0===_roomsResponse$data?void 0:_roomsResponse$data.schedule_Event.find((function(event){return event.id===to.id}));event&&null!=event&&event.roomId?currentRoomId!==event.roomId&&history.push(conferencePath+"/room/"+event.roomId):error=roomsResponse.error?roomsResponse.error.message:"Sorry, the room for the chosen event could not be found."}break;case continuation.aS.AutoDiscussionRoom:if(!roomsResponse.fetching){var _to$id2,_roomsResponse$data2;console.log("Activate auto room",{choices,selectedOptionId,activateChoice,activatedChoice});var toItemId=null!==(_to$id2=to.id)&&void 0!==_to$id2?_to$id2:"eventId"in from?from.itemId:null,item=null===(_roomsResponse$data2=roomsResponse.data)||void 0===_roomsResponse$data2?void 0:_roomsResponse$data2.content_Item.find((function(item){return item.id===toItemId}));item&&item.room?currentRoomId!==item.room.id&&history.push(conferencePath+"/room/"+item.room.id):error=roomsResponse.error?roomsResponse.error.message:"Sorry, the chosen discussion room could not be found."}break;case continuation.aS.Item:history.push(conferencePath+"/item/"+to.id);break;case continuation.aS.Exhibition:history.push(conferencePath+"/exhibition/"+to.id);break;case continuation.aS.ShufflePeriod:history.push(conferencePath+"/shuffle");break;case continuation.aS.Profile:history.push(conferencePath+"/profile/view/"+to.id);break;case continuation.aS.OwnProfile:history.push(conferencePath+"/profile");break;case continuation.aS.NavigationView:switch(to.view){case continuation.Tu.LiveProgramRooms:history.push(conferencePath+"/live");break;case continuation.Tu.HappeningSoon:history.push(conferencePath+"/schedule");break;case continuation.Tu.Tags:history.push(conferencePath+"/content"+(null!==(_to$tagId=to.tagId)&&void 0!==_to$tagId&&_to$tagId.length?"/"+to.tagId:""));break;case continuation.Tu.Exhibitions:history.push(conferencePath+"/exhibitions");break;case continuation.Tu.Schedule:history.push(conferencePath+"/schedule");break;case continuation.Tu.SocialRooms:case continuation.Tu.People:history.push(conferencePath+"/socialise");break;case continuation.Tu.ShufflePeriods:history.push(conferencePath+"/shuffle");break;case continuation.Tu.MyBackstages:history.push(conferencePath+"/profile/backstages")}break;case continuation.aS.ConferenceLandingPage:conferencePath&&history.push(conferencePath)}}else error="Sorry, the selected option is no longer available.";setActivatedChoice(null===(_error=error)||void 0===_error||_error)}};"shufflePeriodId"in from?(from.eventRoomId?history.push(conferencePath+"/room/"+from.eventRoomId):history.push(conferencePath+"/shuffle"),setTimeout((function(){return activateChosenOption()}),200)):activateChosenOption()}}),[selectedOptionId,activatedChoice,activateChoice]),(0,react.useEffect)((function(){"string"==typeof activatedChoice&&toast({description:activatedChoice,duration:8e4,position:"bottom",isClosable:!0,title:"Error activating continuation",status:"error"})}),[activatedChoice,toast]);var activeSet=(0,react.useCallback)((function(choiceId,isDefault){setSelectedOptionId(choiceId),isDefault||(console.log("Active set called, Setting activate choice and clearing activated choice"),setActivatedChoice(!1),setActivateChoice(!0))}),[]),passiveSet=(0,react.useCallback)((function(choiceId,_isDefault){console.log("Passive set called, Setting selected option id clearing activated choice"),setSelectedOptionId(choiceId),setActivatedChoice(!1)}),[]);return displayChoice?isActiveChoice?(0,jsx_runtime.jsx)(ContinuationActiveChoice,{selectedOptionId,choices,isBackstage,noBackstage,currentRole,timeRemaining:timeRemaining+6e4,timeMax:8e4,onChoiceSelected:activeSet}):(0,jsx_runtime.jsx)(ContinuationPassiveChoice,{selectedOptionId,choices,isBackstage,noBackstage,currentRole,timeRemaining,timeMax:12e4,onChoiceSelected:passiveSet,activate}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}try{ContinuationChoices.displayName="ContinuationChoices",ContinuationChoices.__docgenInfo={description:"",displayName:"ContinuationChoices",props:{from:{defaultValue:null,description:"",name:"from",required:!0,type:{name:"{ eventId: string; itemId: string | null; } | { shufflePeriodId: string; shuffleRoomEndsAt: number; }"}},isBackstage:{defaultValue:null,description:"",name:"isBackstage",required:!0,type:{name:"boolean"}},noBackstage:{defaultValue:null,description:"",name:"noBackstage",required:!0,type:{name:"boolean"}},currentRole:{defaultValue:null,description:"",name:"currentRole",required:!0,type:{name:"enum",value:[{value:'"None"'},{value:'"Everyone"'},{value:'"Presenters"'},{value:'"Chairs"'},{value:'"Viewers"'}]}},currentRoomId:{defaultValue:null,description:"",name:"currentRoomId",required:!0,type:{name:"string"}},extraChoices:{defaultValue:null,description:"",name:"extraChoices",required:!0,type:{name:"readonly ContinuationChoices_ContinuationFragment[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Continuation/ContinuationChoices.tsx#ContinuationChoices"]={docgenInfo:ContinuationChoices.__docgenInfo,name:"ContinuationChoices",path:"src/aspects/Conference/Attend/Continuation/ContinuationChoices.tsx#ContinuationChoices"})}catch(__react_docgen_typescript_loader_error){}function RoomContinuationChoices_slicedToArray(arr,i){return function RoomContinuationChoices_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function RoomContinuationChoices_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function RoomContinuationChoices_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RoomContinuationChoices_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RoomContinuationChoices_arrayLikeToArray(o,minLen)}(arr,i)||function RoomContinuationChoices_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RoomContinuationChoices_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RoomContinuationChoices(_ref){var currentRoomEvent=_ref.currentRoomEvent,nextRoomEvent=_ref.nextRoomEvent,roomDetails=_ref.roomDetails,showBackstage=_ref.showBackstage,currentRegistrantId=_ref.currentRegistrantId,currentBackstageEventId=_ref.currentBackstageEventId,moveToNextBackstage=_ref.moveToNextBackstage,now5s=(0,useRealTime.$)(5e3),_useState2=RoomContinuationChoices_slicedToArray((0,react.useState)(null),2),continuationChoicesFrom=_useState2[0],setContinuationChoicesFrom=_useState2[1],_useState4=RoomContinuationChoices_slicedToArray((0,react.useState)(!1),2),continuationIsBackstage=_useState4[0],setContinuationIsBackstage=_useState4[1],_useState6=RoomContinuationChoices_slicedToArray((0,react.useState)(!1),2),continuationNoBackstage=_useState6[0],setContinuationNoBackstage=_useState6[1],_useState8=RoomContinuationChoices_slicedToArray((0,react.useState)(continuation.qp.None),2),continuationRole=_useState8[0],setContinuationRole=_useState8[1],_useState10=RoomContinuationChoices_slicedToArray((0,react.useState)({eventId:null,choices:[]}),2),extraChoices=_useState10[0],setExtraChoices=_useState10[1],_useState12=RoomContinuationChoices_slicedToArray((0,react.useState)(!1),2),supressContinuationChoices=_useState12[0],setSuppressContinuationChoices=_useState12[1],currentRegistrant=(0,useCurrentRegistrant.ZP)();return(0,react.useEffect)((function(){if(currentRoomEvent){var nextEventHasBackstage=(null==nextRoomEvent?void 0:nextRoomEvent.modeName)===graphql.kdg.Livestream;setSuppressContinuationChoices(nextEventHasBackstage&&(null==nextRoomEvent?void 0:nextRoomEvent.id)===currentBackstageEventId);var scheduledStartTime=Date.parse(currentRoomEvent.scheduledStartTime);if(now5s-scheduledStartTime>3e4){var _currentRoomEvent$eve;setContinuationChoicesFrom((function(old){var _currentRoomEvent$ite;return old&&"eventId"in old&&old.eventId===currentRoomEvent.id?old:{eventId:currentRoomEvent.id,itemId:null!==(_currentRoomEvent$ite=currentRoomEvent.itemId)&&void 0!==_currentRoomEvent$ite?_currentRoomEvent$ite:null,endsAt:currentRoomEvent.scheduledEndTime?Date.parse(currentRoomEvent.scheduledEndTime):0}}));var noBackstage=currentRoomEvent.modeName!==graphql.kdg.Livestream,currentRegistrantIsNeededOnNextEventBackstage=nextEventHasBackstage&&!(null==nextRoomEvent||!nextRoomEvent.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))),includeAutoMoveBackstageContinuation=showBackstage&&currentRegistrantIsNeededOnNextEventBackstage&&(null==nextRoomEvent?void 0:nextRoomEvent.id)!==currentBackstageEventId;setExtraChoices(includeAutoMoveBackstageContinuation?function(old){return(null==old?void 0:old.eventId)!==currentRoomEvent.id?{eventId:currentRoomEvent.id,choices:[{colour:"#B9095B",defaultFor:continuation.qp.All,description:"Move to your next backstage",id:(0,v4.Z)(),isActiveChoice:!1,priority:Number.NEGATIVE_INFINITY,to:{type:"function",f:moveToNextBackstage}}]}:old}:{eventId:null,choices:[]}),setContinuationIsBackstage(showBackstage),setContinuationNoBackstage(noBackstage);var roleName=noBackstage||null==currentRoomEvent||null===(_currentRoomEvent$eve=currentRoomEvent.eventPeople.find((function(x){var _x$person;return(null===(_x$person=x.person)||void 0===_x$person?void 0:_x$person.registrantId)===currentRegistrantId})))||void 0===_currentRoomEvent$eve?void 0:_currentRoomEvent$eve.roleName;roleName===graphql.hQl.Chair?setContinuationRole(continuation.qp.Chairs):roleName===graphql.hQl.Presenter?setContinuationRole(continuation.qp.Presenters):setContinuationRole(noBackstage?continuation.qp.None:continuation.qp.Viewers)}}else roomDetails.shuffleRooms.length>0?(setContinuationChoicesFrom((function(old){return old&&"shufflePeriodId"in old&&old.shufflePeriodId===roomDetails.shuffleRooms[0].shufflePeriodId?old:{shufflePeriodId:roomDetails.shuffleRooms[0].shufflePeriodId,shuffleRoomEndsAt:Date.parse(roomDetails.shuffleRooms[0].startedAt)+60*roomDetails.shuffleRooms[0].durationMinutes*1e3}})),setContinuationIsBackstage(!1),setContinuationNoBackstage(!0),setContinuationRole(continuation.qp.None)):setContinuationChoicesFrom((function(old){return!old||"endsAt"in old&&now5s>old.endsAt+3e4?null:old}))}),[currentRoomEvent,roomDetails.shuffleRooms,now5s,showBackstage,currentRegistrantId,null==nextRoomEvent?void 0:nextRoomEvent.modeName,null==nextRoomEvent?void 0:nextRoomEvent.eventPeople,currentRegistrant.id,moveToNextBackstage,null==nextRoomEvent?void 0:nextRoomEvent.id,currentBackstageEventId]),continuationChoicesFrom&&!supressContinuationChoices?(0,jsx_runtime.jsx)(ContinuationChoices,{from:continuationChoicesFrom,isBackstage:continuationIsBackstage,noBackstage:continuationNoBackstage,currentRole:continuationRole,currentRoomId:roomDetails.id,extraChoices:extraChoices.choices}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}try{RoomContinuationChoices.displayName="RoomContinuationChoices",RoomContinuationChoices.__docgenInfo={description:"",displayName:"RoomContinuationChoices",props:{currentRoomEvent:{defaultValue:null,description:"",name:"currentRoomEvent",required:!0,type:{name:"Room_EventSummaryFragment | null"}},nextRoomEvent:{defaultValue:null,description:"",name:"nextRoomEvent",required:!0,type:{name:"Room_EventSummaryFragment | null"}},roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}},showBackstage:{defaultValue:null,description:"",name:"showBackstage",required:!0,type:{name:"boolean"}},currentRegistrantId:{defaultValue:null,description:"",name:"currentRegistrantId",required:!0,type:{name:"string"}},currentBackstageEventId:{defaultValue:null,description:"",name:"currentBackstageEventId",required:!0,type:{name:"string | null"}},moveToNextBackstage:{defaultValue:null,description:"",name:"moveToNextBackstage",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/RoomContinuationChoices.tsx#RoomContinuationChoices"]={docgenInfo:RoomContinuationChoices.__docgenInfo,name:"RoomContinuationChoices",path:"src/aspects/Conference/Attend/Room/RoomContinuationChoices.tsx#RoomContinuationChoices"})}catch(__react_docgen_typescript_loader_error){}function RoomTimeAlert(_ref){var shuffleEndsAt=_ref.shuffleEndsAt,showDefaultVideoChatRoom=_ref.showDefaultVideoChatRoom,breakoutRoomClosesAt=_ref.breakoutRoomClosesAt,zoomStartsAt=_ref.zoomStartsAt,eventIsOngoing=_ref.eventIsOngoing,broadcastStartsAt=_ref.broadcastStartsAt,now=(0,useRealTime.$)(1e3),secondsUntilShuffleEnds=Math.round(shuffleEndsAt-now)/1e3,secondsUntilVideoChatRoomCloses=Math.round((breakoutRoomClosesAt-now)/1e3),secondsUntilZoomEvent=Math.round((zoomStartsAt-now)/1e3),secondsUntilBroadcastEvent=Math.round((broadcastStartsAt-now)/1e3),isLivestreamStarting=secondsUntilBroadcastEvent>0&&secondsUntilBroadcastEvent<180,isZoomStarting=secondsUntilZoomEvent>0&&secondsUntilZoomEvent<180,showShuffleRoomEndingAlert=secondsUntilShuffleEnds<=864e5,showVideoChatClosesAlert=showDefaultVideoChatRoom&&secondsUntilVideoChatRoomCloses>0&&secondsUntilVideoChatRoomCloses<=180,showLivestreamStartingAlert=!eventIsOngoing&&isLivestreamStarting&&!showVideoChatClosesAlert,showZoomStartingAlert=!eventIsOngoing&&isZoomStarting&&!showVideoChatClosesAlert;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showShuffleRoomEndingAlert?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:secondsUntilShuffleEnds<=3?"error":secondsUntilShuffleEnds<=30?"warning":"info",pos:"sticky",top:0,zIndex:1e3,children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{children:["Shuffle room ends in"," ",(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{fontWeight:"bold",children:(0,formatRemainingTime.d)(secondsUntilShuffleEnds,!1)})]})]}):void 0,showVideoChatClosesAlert?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"warning",pos:"sticky",top:0,zIndex:1e3,alignItems:"flex-start",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.X,{as:chakra_ui_layout_esm.gC,w:"100%",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:[isLivestreamStarting?"A livestream will soon be starting in this room. ":isZoomStarting?"An external event will soon be starting. ":"","Video-chat closes in"," ",(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{fontWeight:"bold",children:(0,formatRemainingTime.d)(secondsUntilVideoChatRoomCloses,!1)})]})})]}):void 0,showZoomStartingAlert?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"info",pos:"sticky",top:0,zIndex:1e3,children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{children:["Zoom event starting in"," ",(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{fontWeight:"bold",children:(0,formatRemainingTime.d)(secondsUntilZoomEvent,!1)})]})]}):void 0,showLivestreamStartingAlert?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"info",pos:"sticky",top:0,zIndex:1e3,children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{children:["Livestream event starting in"," ",(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{fontWeight:"bold",children:(0,formatRemainingTime.d)(secondsUntilBroadcastEvent,!1)})]})]}):void 0]})}try{RoomTimeAlert.displayName="RoomTimeAlert",RoomTimeAlert.__docgenInfo={description:"",displayName:"RoomTimeAlert",props:{shuffleEndsAt:{defaultValue:null,description:"",name:"shuffleEndsAt",required:!0,type:{name:"number"}},showDefaultVideoChatRoom:{defaultValue:null,description:"",name:"showDefaultVideoChatRoom",required:!0,type:{name:"boolean"}},breakoutRoomClosesAt:{defaultValue:null,description:"",name:"breakoutRoomClosesAt",required:!0,type:{name:"number"}},zoomStartsAt:{defaultValue:null,description:"",name:"zoomStartsAt",required:!0,type:{name:"number"}},broadcastStartsAt:{defaultValue:null,description:"",name:"broadcastStartsAt",required:!0,type:{name:"number"}},eventIsOngoing:{defaultValue:null,description:"",name:"eventIsOngoing",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/RoomTimeAlert.tsx#RoomTimeAlert"]={docgenInfo:RoomTimeAlert.__docgenInfo,name:"RoomTimeAlert",path:"src/aspects/Conference/Attend/Room/RoomTimeAlert.tsx#RoomTimeAlert"})}catch(__react_docgen_typescript_loader_error){}var chakra_ui_image_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+image@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/image/dist/chakra-ui-image.esm.js"),content=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),amazon_s3_uri=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri_default=__webpack_require__.n(amazon_s3_uri),lib=__webpack_require__("../node_modules/.pnpm/react-emoji-render@1.2.4_react-dom@17.0.2+react@17.0.2/node_modules/react-emoji-render/lib/index.js");function RoomTitle(_ref){var _roomDetails$item2,roomDetails=_ref.roomDetails,sponsorLogoUrl=(0,react.useMemo)((function(){try{var _roomDetails$item;if(null===(_roomDetails$item=roomDetails.item)||void 0===_roomDetails$item||!_roomDetails$item.elements||!roomDetails.item.elements.length)return null;var dataBlob=roomDetails.item.elements[0].data;if(!(0,content.Cp)(dataBlob))return null;var elementDataBlob=dataBlob,latestVersion=es.Z$Q(elementDataBlob);if(!latestVersion)return null;if(latestVersion.data.type!==content.bK.ImageUrl&&latestVersion.data.type!==content.bK.ImageFile)return null;if(latestVersion.data.type===content.bK.ImageUrl)return latestVersion.data.url;var _AmazonS3URI=new(amazon_s3_uri_default())(latestVersion.data.s3Url),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key;return"https://s3."+(void 0).VITE_AWS_REGION+".amazonaws.com/"+bucket+"/"+key}catch(_unused){return null}}),[null===(_roomDetails$item2=roomDetails.item)||void 0===_roomDetails$item2?void 0:_roomDetails$item2.elements]);return roomDetails.item?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:sponsorLogoUrl?(0,jsx_runtime.jsx)(chakra_ui_image_esm.Ee,{src:sponsorLogoUrl,alt:roomDetails.item.title+" logo",maxWidth:"20rem",maxHeight:"8rem",bgColor:"Room.sponsorLogoBackgroundColor",p:1,pr:3,borderRadius:"md"}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h1",textAlign:"left",size:"lg",mr:4,children:(0,jsx_runtime.jsx)(lib.Gl,{className:"twemoji",text:roomDetails.item.title})})}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h1",id:"page-heading",textAlign:"left",size:"lg",mr:4,children:roomDetails.name})}try{RoomTitle.displayName="RoomTitle",RoomTitle.__docgenInfo={description:"",displayName:"RoomTitle",props:{roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/RoomTitle.tsx#RoomTitle"]={docgenInfo:RoomTitle.__docgenInfo,name:"RoomTitle",path:"src/aspects/Conference/Attend/Room/RoomTitle.tsx#RoomTitle"})}catch(__react_docgen_typescript_loader_error){}function UpcomingBackstageBanner(_ref){var event=_ref.event,timeRemaining=((0,react.useMemo)((function(){return Date.parse(event.scheduledStartTime)}),[event.scheduledStartTime])+5e3-(0,useRealTime.$)(1e3)-12e5)/1e3,title=(0,react.useMemo)((function(){return event.item?event.item.title.toLowerCase().includes(event.name.toLowerCase())?event.item.title:event.name+": "+event.item.title:event.name}),[event.item,event.name]);return timeRemaining>0?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"info",alignItems:"flex-start",pos:"sticky",top:0,zIndex:1e4,children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{alignItems:"start",children:[(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.Cd,{children:[(0,formatRemainingTime.d)(timeRemaining)," until your backstage is available"]}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{children:["Your backstage for ",title," will become available on this page. You will automatically be shown the backstage 20 minutes in advance of the live period of your event."]})]})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}try{UpcomingBackstageBanner.displayName="UpcomingBackstageBanner",UpcomingBackstageBanner.__docgenInfo={description:"",displayName:"UpcomingBackstageBanner",props:{event:{defaultValue:null,description:"",name:"event",required:!0,type:{name:"Room_EventSummaryFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Stream/UpcomingBackstage.tsx#UpcomingBackstageBanner"]={docgenInfo:UpcomingBackstageBanner.__docgenInfo,name:"UpcomingBackstageBanner",path:"src/aspects/Conference/Attend/Room/Stream/UpcomingBackstage.tsx#UpcomingBackstageBanner"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js");var usePolling=__webpack_require__("./src/aspects/Hooks/usePolling.ts");function useHLSUri_slicedToArray(arr,i){return function useHLSUri_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useHLSUri_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useHLSUri_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useHLSUri_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useHLSUri_arrayLikeToArray(o,minLen)}(arr,i)||function useHLSUri_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useHLSUri_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StreamTextCaptions=__webpack_require__("./src/aspects/Conference/Attend/Room/StreamTextCaptions.tsx");__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.number.max-safe-integer.js");function useCurrentRoomEvent_slicedToArray(arr,i){return function useCurrentRoomEvent_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useCurrentRoomEvent_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useCurrentRoomEvent_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useCurrentRoomEvent_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useCurrentRoomEvent_arrayLikeToArray(o,minLen)}(arr,i)||function useCurrentRoomEvent_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useCurrentRoomEvent_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useCurrentRoomEvent(roomEvents){var broadcastEvents=(0,react.useMemo)((function(){return roomEvents.filter((function(event){return graphql.kdg.Livestream===event.modeName}))}),[roomEvents]),zoomEvents=(0,react.useMemo)((function(){return roomEvents.filter((function(event){return event.modeName===graphql.kdg.External}))}),[roomEvents]),_useState2=useCurrentRoomEvent_slicedToArray((0,react.useState)(null),2),currentRoomEvent=_useState2[0],setCurrentRoomEvent=_useState2[1],getCurrentEvent=(0,react.useCallback)((function(){var now=Date.now(),eventsNow=roomEvents.filter((function(event){var scheduledStartTime=Date.parse(event.scheduledStartTime),scheduledEndTime=Date.parse(event.scheduledEndTime);return scheduledStartTime<=now&&now<scheduledEndTime}));eventsNow.length>0?setCurrentRoomEvent(eventsNow[0]):setCurrentRoomEvent(null)}),[roomEvents]),_useState4=useCurrentRoomEvent_slicedToArray((0,react.useState)(!1),2),withinThreeMinutesOfBroadcastEvent=_useState4[0],setWithinThreeMinutesOfBroadcastEvent=_useState4[1],getWithinThreeMinutesOfEvent=(0,react.useCallback)((function(){var now=Date.now(),eventsSoon=broadcastEvents.filter((function(event){var scheduledStartTime=Date.parse(event.scheduledStartTime),scheduledEndTime=Date.parse(event.scheduledEndTime);return scheduledStartTime-18e4<now&&now<scheduledEndTime+18e4}));setWithinThreeMinutesOfBroadcastEvent(eventsSoon.length>0)}),[broadcastEvents]),_useState6=useCurrentRoomEvent_slicedToArray((0,react.useState)(!1),2),withinStreamLatencySinceBroadcastEvent=_useState6[0],setWithinStreamLatencySinceBroadcastEvent=_useState6[1],getWithinStreamLatencySinceBroadcastEvent=(0,react.useCallback)((function(){var now=Date.now(),maybeOngoingStreams=broadcastEvents.filter((function(event){var scheduledStartTime=Date.parse(event.scheduledStartTime),scheduledEndTime=Date.parse(event.scheduledEndTime);return scheduledStartTime<now&&now<scheduledEndTime+45e3}));setWithinStreamLatencySinceBroadcastEvent(maybeOngoingStreams.length>0)}),[broadcastEvents]),_useState8=useCurrentRoomEvent_slicedToArray((0,react.useState)(Number.MAX_SAFE_INTEGER),2),broadcastEventStartsAt=_useState8[0],setBroadcastEventStartsAt=_useState8[1],computeSecondsUntilBroadcastEvent=(0,react.useCallback)((function(){setBroadcastEventStartsAt(broadcastEvents.reduce((function(acc,ev){return Math.min(acc,Date.parse(ev.scheduledStartTime))}),Number.MAX_SAFE_INTEGER))}),[broadcastEvents]),_useState10=useCurrentRoomEvent_slicedToArray((0,react.useState)(Number.MAX_SAFE_INTEGER),2),zoomEventStartsAt=_useState10[0],setZoomEventStartsAt=_useState10[1],computeSecondsUntilZoomEvent=(0,react.useCallback)((function(){setZoomEventStartsAt(zoomEvents.reduce((function(acc,ev){return Math.min(acc,Date.parse(ev.scheduledStartTime))}),Number.MAX_SAFE_INTEGER))}),[zoomEvents]),frequentUpdate=(0,react.useCallback)((function(){computeSecondsUntilZoomEvent(),computeSecondsUntilBroadcastEvent()}),[computeSecondsUntilBroadcastEvent,computeSecondsUntilZoomEvent]);(0,usePolling.Z)(frequentUpdate,1e3,!0);var _useState12=useCurrentRoomEvent_slicedToArray((0,react.useState)(null),2),nextRoomEvent=_useState12[0],setNextRoomEvent=_useState12[1],getNextEvent=(0,react.useCallback)((function(){var now=Date.now(),futureEvents=es.MRu((function(event){return Date.parse(event.scheduledStartTime)}),roomEvents).filter((function(event){return Date.parse(event.scheduledStartTime)>now}));setNextRoomEvent(futureEvents.length>0?futureEvents[0]:null)}),[roomEvents]),_useState14=useCurrentRoomEvent_slicedToArray((0,react.useState)(null),2),nonCurrentLiveEvents=_useState14[0],setNonCurrentEvents=_useState14[1],getNonCurrentEvents=(0,react.useCallback)((function(){var now=Date.now(),filteredEvents=roomEvents.filter((function(event){if(event.modeName!==graphql.kdg.Livestream)return!1;var start=Date.parse(event.scheduledStartTime),end=Date.parse(event.scheduledEndTime);return start>now&&now<end})),sortedEvents=es.MRu((function(event){return Date.parse(event.scheduledStartTime)}),filteredEvents);setNonCurrentEvents(sortedEvents)}),[roomEvents]),_useState16=useCurrentRoomEvent_slicedToArray((0,react.useState)(null),2),nonCurrentLiveEventsInNext20Mins=_useState16[0],setNonCurrentEventsInNext20Mins=_useState16[1],getNonCurrentEventsInNext20Mins=(0,react.useCallback)((function(){var now=Date.now(),cutoff=now+12e5,filteredEvents=roomEvents.filter((function(event){if(event.modeName!==graphql.kdg.Livestream)return!1;var start=Date.parse(event.scheduledStartTime),end=Date.parse(event.scheduledEndTime);return start>now&&now<end&&start<=cutoff})),sortedEvents=es.MRu((function(event){return Date.parse(event.scheduledStartTime)}),filteredEvents);setNonCurrentEventsInNext20Mins(sortedEvents)}),[roomEvents]),infrequentUpdate=(0,react.useCallback)((function(){getWithinThreeMinutesOfEvent(),getWithinStreamLatencySinceBroadcastEvent(),getCurrentEvent(),getNextEvent(),getNonCurrentEvents(),getNonCurrentEventsInNext20Mins()}),[getCurrentEvent,getNextEvent,getNonCurrentEvents,getNonCurrentEventsInNext20Mins,getWithinStreamLatencySinceBroadcastEvent,getWithinThreeMinutesOfEvent]);return(0,usePolling.Z)(infrequentUpdate,1e4,!0),(0,react.useEffect)((function(){infrequentUpdate()}),[infrequentUpdate]),(0,react.useMemo)((function(){return{currentRoomEvent,withinThreeMinutesOfBroadcastEvent,withinStreamLatencySinceBroadcastEvent,nextRoomEvent,nonCurrentLiveEvents,nonCurrentLiveEventsInNext20Mins,broadcastEventStartsAt,zoomEventStartsAt}}),[currentRoomEvent,nextRoomEvent,nonCurrentLiveEvents,nonCurrentLiveEventsInNext20Mins,broadcastEventStartsAt,zoomEventStartsAt,withinStreamLatencySinceBroadcastEvent,withinThreeMinutesOfBroadcastEvent])}try{useCurrentRoomEvent.displayName="useCurrentRoomEvent",useCurrentRoomEvent.__docgenInfo={description:"",displayName:"useCurrentRoomEvent",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/useCurrentRoomEvent.tsx#useCurrentRoomEvent"]={docgenInfo:useCurrentRoomEvent.__docgenInfo,name:"useCurrentRoomEvent",path:"src/aspects/Conference/Attend/Room/useCurrentRoomEvent.tsx#useCurrentRoomEvent"})}catch(__react_docgen_typescript_loader_error){}var VideoChatChime_templateObject,VideoAspectWrapper=__webpack_require__("./src/aspects/Conference/Attend/Room/Video/VideoAspectWrapper.tsx"),web=__webpack_require__("../node_modules/.pnpm/react-reverse-portal@2.1.0_react-dom@17.0.2+react@17.0.2/node_modules/react-reverse-portal/dist/web/index.js"),SharedRoomContextProvider=__webpack_require__("./src/aspects/Room/SharedRoomContextProvider.tsx");function VideoChatChime_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function VideoChatChime_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){VideoChatChime_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){VideoChatChime_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function VideoChatChime_slicedToArray(arr,i){return function VideoChatChime_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function VideoChatChime_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function VideoChatChime_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return VideoChatChime_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VideoChatChime_arrayLikeToArray(o,minLen)}(arr,i)||function VideoChatChime_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VideoChatChime_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function VideoChatChime(_ref){var room=_ref.room,enable=_ref.enable,sharedRoomContext=(0,react.useContext)(SharedRoomContextProvider.p),registrant=(0,useCurrentRegistrant.ZP)(),getRoomChimeData=VideoChatChime_slicedToArray((0,graphql.C9f)(),2)[1],getMeetingData=(0,react.useCallback)(VideoChatChime_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _result$data,_result$data$joinRoom,result,_result$data2,_result$data2$joinRoo;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,getRoomChimeData({roomId:room.id,registrantId:registrant.id});case 2:if(result=_context.sent,null!==(_result$data=result.data)&&void 0!==_result$data&&null!==(_result$data$joinRoom=_result$data.joinRoomChimeSession)&&void 0!==_result$data$joinRoom&&_result$data$joinRoom.registrant&&result.data.joinRoomChimeSession.meeting){_context.next=5;break}throw new Error("Could not join meeting: "+(null===(_result$data2=result.data)||void 0===_result$data2||null===(_result$data2$joinRoo=_result$data2.joinRoomChimeSession)||void 0===_result$data2$joinRoo?void 0:_result$data2$joinRoo.message));case 5:return _context.abrupt("return",{attendeeInfo:result.data.joinRoomChimeSession.registrant,meetingInfo:result.data.joinRoomChimeSession.meeting});case 6:case"end":return _context.stop()}}),_callee)}))),[getRoomChimeData,registrant.id,room.id]);return sharedRoomContext?(0,jsx_runtime.jsx)(web.t0,{node:sharedRoomContext.chimePortalNode,disable:!enable,roomId:room.id,getMeetingData}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"Cannot load breakout room"})}(0,urql_core.Ps)(VideoChatChime_templateObject||(VideoChatChime_templateObject=function VideoChatChime_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation GetRoomChimeData($roomId: uuid!, $registrantId: uuid!) {\n        joinRoomChimeSession(roomId: $roomId, registrantId: $registrantId) {\n            registrant\n            meeting\n            message\n        }\n    }\n"])));try{VideoChatChime.displayName="VideoChatChime",VideoChatChime.__docgenInfo={description:"",displayName:"VideoChatChime",props:{room:{defaultValue:null,description:"",name:"room",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}},enable:{defaultValue:null,description:"",name:"enable",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/VideoChat/VideoChatChime.tsx#VideoChatChime"]={docgenInfo:VideoChatChime.__docgenInfo,name:"VideoChatChime",path:"src/aspects/Conference/Attend/Room/VideoChat/VideoChatChime.tsx#VideoChatChime"})}catch(__react_docgen_typescript_loader_error){}var useGetAccessToken_templateObject,VideoChatVonage_templateObject,useRef=__webpack_require__("../node_modules/.pnpm/use-callback-ref@1.2.5_a0c521d4794c7ad97f5f4c1c4a7d5818/node_modules/use-callback-ref/dist/es2015/useRef.js"),ExtractActualError=__webpack_require__("./src/aspects/GQL/ExtractActualError.ts");function useGetAccessToken_slicedToArray(arr,i){return function useGetAccessToken_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useGetAccessToken_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function useGetAccessToken_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useGetAccessToken_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useGetAccessToken_arrayLikeToArray(o,minLen)}(arr,i)||function useGetAccessToken_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useGetAccessToken_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function VideoChatVonage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function VideoChatVonage_slicedToArray(arr,i){return function VideoChatVonage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function VideoChatVonage_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function VideoChatVonage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return VideoChatVonage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VideoChatVonage_arrayLikeToArray(o,minLen)}(arr,i)||function VideoChatVonage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VideoChatVonage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function VideoChatVonage(_ref){var room=_ref.room,eventId=_ref.eventId,enable=_ref.enable,eventIsFuture=_ref.eventIsFuture,canControlRecordingAs=_ref.canControlRecordingAs,sharedRoomContext=(0,react.useContext)(SharedRoomContextProvider.p),_useState2=VideoChatVonage_slicedToArray((0,react.useState)(room.publicVonageSessionId),2),publicVonageSessionId=_useState2[0],setPublicVonageSessionId=_useState2[1];(0,react.useEffect)((function(){setPublicVonageSessionId(room.publicVonageSessionId)}),[room.publicVonageSessionId]);var _useGetAccessToken=function useGetAccessToken(roomId,eventId){var getRoomVonageToken=useGetAccessToken_slicedToArray((0,graphql.uQq)(),2)[1],getEventVonageToken=useGetAccessToken_slicedToArray((0,graphql.VqT)(),2)[1],registrantId=(0,useCurrentRegistrant.ZP)().id,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=auth.Z.RoomMember,_makeContext[auth.k.RoomId]=roomId,_makeContext))}),[roomId]),_useState2=useGetAccessToken_slicedToArray((0,react.useState)(null),2),completeGetAccessToken=_useState2[0],setCompleteGetAccessToken=_useState2[1],completeGetAccessTokenRef=(0,useRef.W)(null,setCompleteGetAccessToken);return{getAccessToken:(0,react.useCallback)((function(){return new Promise((function(_resolve,_reject){eventId?getEventVonageToken({eventId,registrantId},context).then((function(result){var _result$data,_result$data$joinEven,error=(0,ExtractActualError.Z)(result.error);if(error)throw new Error(error);if(null===(_result$data=result.data)||void 0===_result$data||null===(_result$data$joinEven=_result$data.joinEventVonageSession)||void 0===_result$data$joinEven||!_result$data$joinEven.accessToken)throw new Error("No Vonage session ID");var token=result.data.joinEventVonageSession.accessToken;result.data.joinEventVonageSession.isRecorded?completeGetAccessTokenRef.current={resolve:function resolve(){completeGetAccessTokenRef.current=null,_resolve(token)},reject:function reject(reason){completeGetAccessTokenRef.current=null,_reject(reason)}}:_resolve(token)})).catch(_reject):getRoomVonageToken({roomId,registrantId},context).then((function(result){var _result$data2,_result$data2$joinRoo,error=(0,ExtractActualError.Z)(result.error);if(error)throw new Error(error);if(null===(_result$data2=result.data)||void 0===_result$data2||null===(_result$data2$joinRoo=_result$data2.joinRoomVonageSession)||void 0===_result$data2$joinRoo||!_result$data2$joinRoo.accessToken)throw new Error("No Vonage session ID");var token=result.data.joinRoomVonageSession.accessToken;result.data.joinRoomVonageSession.isRecorded?completeGetAccessTokenRef.current={resolve:function resolve(){completeGetAccessTokenRef.current=null,_resolve(token)},reject:function reject(reason){completeGetAccessTokenRef.current=null,_reject(reason)}}:_resolve(token)})).catch(_reject)}))}),[completeGetAccessTokenRef,context,eventId,getEventVonageToken,getRoomVonageToken,registrantId,roomId]),completeGetAccessToken}}(room.id,eventId),getAccessToken=_useGetAccessToken.getAccessToken,completeGetAccessToken=_useGetAccessToken.completeGetAccessToken,attempts=react.useRef(0),lastAttempt=react.useRef(Date.now()),now=(0,useRealTime.$)(1e3),client=(0,urql_es.m8)();return(0,react.useEffect)((function(){!publicVonageSessionId&&attempts.current<3&&now-lastAttempt.current>3e3&&(attempts.current++,lastAttempt.current=now,function VideoChatVonage_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){VideoChatVonage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){VideoChatVonage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){var _response$data,_response$data$room_R,response;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,client.query(graphql.gh6,{roomId:room.id}).toPromise();case 2:response=_context.sent,null!==(_response$data=response.data)&&void 0!==_response$data&&null!==(_response$data$room_R=_response$data.room_Room_by_pk)&&void 0!==_response$data$room_R&&_response$data$room_R.publicVonageSessionId&&setPublicVonageSessionId(response.data.room_Room_by_pk.publicVonageSessionId);case 4:case"end":return _context.stop()}}),_callee)})))())}),[publicVonageSessionId,room.id,client,now]),publicVonageSessionId&&sharedRoomContext?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(web.t0,{node:sharedRoomContext.vonagePortalNode,vonageSessionId:publicVonageSessionId,disable:!enable,getAccessToken,completeGetAccessToken,isBackstageRoom:!1,canControlRecordingAs,roomId:room.id,eventId,eventIsFuture})}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:2,p:4,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Please wait while the video-chat initializes..."}),(0,jsx_runtime.jsx)(CenteredSpinner.Z,{caller:"VideoChatVonage:94"})]})}(0,urql_core.Ps)(useGetAccessToken_templateObject||(useGetAccessToken_templateObject=function useGetAccessToken_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation GetEventVonageToken($eventId: uuid!, $registrantId: uuid!) {\n        joinEventVonageSession(eventId: $eventId, registrantId: $registrantId) {\n            accessToken\n            isRecorded\n        }\n    }\n\n    mutation GetRoomVonageToken($roomId: uuid!, $registrantId: uuid!) {\n        joinRoomVonageSession(roomId: $roomId, registrantId: $registrantId) {\n            accessToken\n            sessionId\n            isRecorded\n        }\n    }\n"]))),(0,urql_core.Ps)(VideoChatVonage_templateObject||(VideoChatVonage_templateObject=function VideoChatVonage_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query GetRoomVonageSessionId($roomId: uuid!) @cached {\n        room_Room_by_pk(id: $roomId) {\n            id\n            publicVonageSessionId\n        }\n    }\n"])));try{VideoChatVonage.displayName="VideoChatVonage",VideoChatVonage.__docgenInfo={description:"",displayName:"VideoChatVonage",props:{room:{defaultValue:null,description:"",name:"room",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}},eventId:{defaultValue:null,description:"",name:"eventId",required:!0,type:{name:"string | undefined"}},enable:{defaultValue:null,description:"",name:"enable",required:!0,type:{name:"boolean"}},eventIsFuture:{defaultValue:null,description:"",name:"eventIsFuture",required:!0,type:{name:"boolean"}},canControlRecordingAs:{defaultValue:null,description:"",name:"canControlRecordingAs",required:!0,type:{name:"Set<RecordingControlReason>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/VideoChat/VideoChatVonage.tsx#VideoChatVonage"]={docgenInfo:VideoChatVonage.__docgenInfo,name:"VideoChatVonage",path:"src/aspects/Conference/Attend/Room/VideoChat/VideoChatVonage.tsx#VideoChatVonage"})}catch(__react_docgen_typescript_loader_error){}function VideoChatRoom(_ref){var defaultVideoBackendName=_ref.defaultVideoBackendName,roomDetails=_ref.roomDetails,enable=_ref.enable,eventId=_ref.eventId,eventIsFuture=_ref.eventIsFuture,canControlRecordingAs=_ref.canControlRecordingAs,backend=(0,react.useMemo)((function(){switch(roomDetails.backendName){case"CHIME":return"CHIME";case"VONAGE":return"VONAGE"}switch(defaultVideoBackendName){case"CHIME":return"CHIME";case"VONAGE":case"NO_DEFAULT":return"VONAGE"}return null}),[defaultVideoBackendName,roomDetails.backendName]),enableChime="CHIME"===backend&&enable,enableVonage="VONAGE"===backend&&enable;return(0,react.useMemo)((function(){var _roomDetails$chatId,_roomDetails$chatId2;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{pos:"relative",display:enableChime?"block":"none",children:[(0,jsx_runtime.jsx)(VideoChatChime,{room:roomDetails,enable:enableChime}),enableChime?(0,jsx_runtime.jsx)(EmojiFloatContainer.Z,{chatId:null!==(_roomDetails$chatId=roomDetails.chatId)&&void 0!==_roomDetails$chatId?_roomDetails$chatId:""}):void 0]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{display:enableVonage?"block":"none",h:"100%",children:[(0,jsx_runtime.jsx)(VideoChatVonage,{room:roomDetails,enable:enableVonage,eventId,eventIsFuture,canControlRecordingAs}),enableVonage?(0,jsx_runtime.jsx)(EmojiFloatContainer.Z,{chatId:null!==(_roomDetails$chatId2=roomDetails.chatId)&&void 0!==_roomDetails$chatId2?_roomDetails$chatId2:""}):void 0]}),!backend&&enable?(0,jsx_runtime.jsx)(CenteredSpinner.Z,{spinnerProps:{mt:2,mx:"auto"},caller:"VideoChatRoom:63"}):void 0]})}),[enableChime,roomDetails,enableVonage,eventId,eventIsFuture,canControlRecordingAs,backend,enable])}try{VideoChatRoom.displayName="VideoChatRoom",VideoChatRoom.__docgenInfo={description:"",displayName:"VideoChatRoom",props:{videoRoomBackendName:{defaultValue:null,description:"",name:"videoRoomBackendName",required:!1,type:{name:"string"}},defaultVideoBackendName:{defaultValue:null,description:"",name:"defaultVideoBackendName",required:!1,type:{name:"string"}},roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}},enable:{defaultValue:null,description:"",name:"enable",required:!0,type:{name:"boolean"}},eventId:{defaultValue:null,description:"",name:"eventId",required:!0,type:{name:"string | undefined"}},eventIsFuture:{defaultValue:null,description:"",name:"eventIsFuture",required:!0,type:{name:"boolean"}},canControlRecordingAs:{defaultValue:null,description:"",name:"canControlRecordingAs",required:!0,type:{name:"Set<RecordingControlReason>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/VideoChat/VideoChatRoom.tsx#VideoChatRoom"]={docgenInfo:VideoChatRoom.__docgenInfo,name:"VideoChatRoom",path:"src/aspects/Conference/Attend/Room/VideoChat/VideoChatRoom.tsx#VideoChatRoom"})}catch(__react_docgen_typescript_loader_error){}var Room_templateObject,VonageGlobalStateProvider=__webpack_require__("./src/aspects/Conference/Attend/Room/Vonage/State/VonageGlobalStateProvider.tsx"),VonageRoomProvider=__webpack_require__("./src/aspects/Conference/Attend/Room/Vonage/State/VonageRoomProvider.tsx");function Room_slicedToArray(arr,i){return function Room_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Room_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Room_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Room_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Room_arrayLikeToArray(o,minLen)}(arr,i)||function Room_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Room_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Backstages=react.lazy((function(){return __webpack_require__.e(9936).then(__webpack_require__.bind(__webpack_require__,"./src/aspects/Conference/Attend/Room/Stream/Backstages.tsx"))})),VideoPlayer=react.lazy((function(){return __webpack_require__.e(8165).then(__webpack_require__.bind(__webpack_require__,"./src/aspects/Conference/Attend/Room/Video/VideoPlayerEventPlayer.tsx"))})),HlsPlayer=react.lazy((function(){return Promise.all([__webpack_require__.e(2138),__webpack_require__.e(9230)]).then(__webpack_require__.bind(__webpack_require__,"./src/aspects/Conference/Attend/Room/Video/HlsPlayer.tsx"))}));function RoomOuter(_ref){var _defaultVideoRoomBack,_defaultVideoRoomBack2,roomDetails=_ref.roomDetails,_useRoom_GetDefaultVi2=Room_slicedToArray((0,graphql.lmq)({requestPolicy:"network-only"}),2),_useRoom_GetDefaultVi3=_useRoom_GetDefaultVi2[0],defaultVideoRoomBackendData=_useRoom_GetDefaultVi3.data,defaultvideoRoomBackendLoading=_useRoom_GetDefaultVi3.fetching,refetchDefaultVideoRoomBackend=_useRoom_GetDefaultVi2[1];(0,react.useEffect)((function(){refetchDefaultVideoRoomBackend()}),[refetchDefaultVideoRoomBackend,roomDetails.id]);var defaultVideoBackend=defaultvideoRoomBackendLoading?void 0:null!==(_defaultVideoRoomBack=null==defaultVideoRoomBackendData||null===(_defaultVideoRoomBack2=defaultVideoRoomBackendData.system_Configuration_by_pk)||void 0===_defaultVideoRoomBack2?void 0:_defaultVideoRoomBack2.value)&&void 0!==_defaultVideoRoomBack?_defaultVideoRoomBack:"NO_DEFAULT";return(0,jsx_runtime.jsx)(Room,{roomDetails,defaultVideoBackend})}(0,urql_core.Ps)(Room_templateObject||(Room_templateObject=function Room_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query Room_GetEvents(\n        $roomId: uuid!\n        $now: timestamptz!\n        $cutoff: timestamptz!\n        $includeAbstract: Boolean!\n        $includeItemEvents: Boolean!\n    ) @cached {\n        schedule_Event(\n            where: {\n                roomId: { _eq: $roomId }\n                sessionEventId: { _is_null: true }\n                scheduledEndTime: { _gte: $now }\n                scheduledStartTime: { _lte: $cutoff }\n            }\n        ) {\n            ...Room_EventSummary\n        }\n    }\n\n    fragment Room_EventSummary on schedule_Event {\n        id\n        roomId\n        conferenceId\n        scheduledStartTime\n        name\n        scheduledEndTime\n        modeName\n        itemId\n        exhibitionId\n        streamTextEventId\n        shufflePeriod {\n            ...ShufflePeriodData\n        }\n        autoPlayElement {\n            id\n            name\n            typeName\n            itemId\n        }\n        item {\n            id\n            title\n            typeName\n            videoElements: elements(\n                where: { typeName: { _in: [VIDEO_BROADCAST, VIDEO_FILE, VIDEO_PREPUBLISH] }, isHidden: { _eq: false } }\n                order_by: { name: asc }\n            ) {\n                id\n                name\n                typeName\n                itemId\n            }\n            zoomItems: elements(where: { typeName: { _eq: EXTERNAL_EVENT_LINK } }, limit: 1) {\n                id\n                data\n                name\n            }\n            chatId\n        }\n        eventPeople {\n            id\n            personId\n            person {\n                id\n                name\n                affiliation\n                registrantId\n            }\n            roleName\n        }\n        presentations {\n            ...ScheduleEvent\n\n            eventPeople {\n                id\n                person {\n                    id\n                    registrantId\n                }\n            }\n        }\n    }\n\n    query Room_GetDefaultVideoRoomBackend @cached {\n        system_Configuration_by_pk(key: DEFAULT_VIDEO_ROOM_BACKEND) {\n            value\n        }\n    }\n"]))),RoomOuter.displayName="RoomOuter";var RoomPage_templateObject,_templateObject2;function Room(_ref2){var roomDetails=_ref2.roomDetails,defaultVideoBackend=_ref2.defaultVideoBackend,now=(0,useRealTime.$)(6e5),nowStr=(0,react.useMemo)((function(){return new Date((0,MathUtils.N4)(now,6e5)).toISOString()}),[now]),nowCutoffStr=(0,react.useMemo)((function(){return new Date((0,MathUtils.FG)(now+36e5,6e5)).toISOString()}),[now]),_useRoom_GetEventsQue2=Room_slicedToArray((0,graphql.EOy)({requestPolicy:"cache-and-network",variables:{roomId:roomDetails.id,now:nowStr,cutoff:nowCutoffStr,includeAbstract:!0,includeItemEvents:!1}}),2),_useRoom_GetEventsQue3=_useRoom_GetEventsQue2[0],loadingEvents=_useRoom_GetEventsQue3.fetching,data=_useRoom_GetEventsQue3.data,refetchRoomEvents=_useRoom_GetEventsQue2[1],_useState2=Room_slicedToArray((0,react.useState)(null),2),cachedRoomEvents=_useState2[0],setCachedRoomEvents=_useState2[1];(0,react.useEffect)((function(){null!=data&&data.schedule_Event&&setCachedRoomEvents(data.schedule_Event)}),[null==data?void 0:data.schedule_Event]);var roomInner=(0,react.useMemo)((function(){return null!==cachedRoomEvents?(0,jsx_runtime.jsx)(RoomInner,{roomDetails,roomEvents:cachedRoomEvents,refetchRoomEvents,defaultVideoBackend}):void 0}),[cachedRoomEvents,defaultVideoBackend,roomDetails,refetchRoomEvents]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[roomInner,loadingEvents&&null===cachedRoomEvents?(0,jsx_runtime.jsx)(CenteredSpinner.Z,{caller:"Room:200",spinnerProps:{label:"Loading events"}}):void 0]})}function RoomInner(_ref3){var _roomDetails$item2,_roomDetails$item4,_currentRoomEvent$id,roomDetails=_ref3.roomDetails,roomEvents=_ref3.roomEvents,refetchRoomEvents=_ref3.refetchRoomEvents,defaultVideoBackend=_ref3.defaultVideoBackend,currentRegistrant=(0,useCurrentRegistrant.ZP)(),now5s=(0,useRealTime.$)(5e3),now30s=(0,useRealTime.$)(3e4),_useCurrentRoomEvent=useCurrentRoomEvent(roomEvents),currentRoomEvent=_useCurrentRoomEvent.currentRoomEvent,nextRoomEvent=_useCurrentRoomEvent.nextRoomEvent,nonCurrentLiveEvents=_useCurrentRoomEvent.nonCurrentLiveEvents,nonCurrentLiveEventsInNext20Mins=_useCurrentRoomEvent.nonCurrentLiveEventsInNext20Mins,withinThreeMinutesOfBroadcastEvent=_useCurrentRoomEvent.withinThreeMinutesOfBroadcastEvent,withinStreamLatencySinceBroadcastEvent=_useCurrentRoomEvent.withinStreamLatencySinceBroadcastEvent,broadcastEventStartsAt=_useCurrentRoomEvent.broadcastEventStartsAt,zoomEventStartsAt=_useCurrentRoomEvent.zoomEventStartsAt,hlsUri=function useHLSUri(roomId,broadcastEventStartsAt){var _roomChannelStackResp3,_roomChannelStackResp6,secondsUntilBroadcastEvent=broadcastEventStartsAt-(0,useRealTime.$)(3e4),_useState2=useHLSUri_slicedToArray((0,react.useState)(12e4),2),refetchChannelStackInterval=_useState2[0],setRefetchChannelStackInterval=_useState2[1],_useState4=useHLSUri_slicedToArray((0,react.useState)(!0),2),skipGetChannelStack=_useState4[0],setSkipGetChannelStack=_useState4[1],_useRoomPage_GetRoomC2=useHLSUri_slicedToArray((0,graphql.ft$)({variables:{roomId},requestPolicy:"network-only",pause:skipGetChannelStack}),2),roomChannelStackResponse=_useRoomPage_GetRoomC2[0],refetchChannelStack=_useRoomPage_GetRoomC2[1],_usePolling=(0,usePolling.Z)(refetchChannelStack,refetchChannelStackInterval,skipGetChannelStack),start=_usePolling.start,stop=_usePolling.stop;return(0,react.useEffect)((function(){skipGetChannelStack?stop():start()}),[skipGetChannelStack,start,stop]),(0,react.useEffect)((function(){skipGetChannelStack&&secondsUntilBroadcastEvent<3e5&&setSkipGetChannelStack(!1)}),[skipGetChannelStack,secondsUntilBroadcastEvent]),(0,react.useEffect)((function(){var _roomChannelStackResp,_roomChannelStackResp2;null!==(_roomChannelStackResp=roomChannelStackResponse.data)&&void 0!==_roomChannelStackResp&&null!==(_roomChannelStackResp2=_roomChannelStackResp.video_ChannelStack)&&void 0!==_roomChannelStackResp2&&_roomChannelStackResp2[0]&&setRefetchChannelStackInterval(3e5)}),[null===(_roomChannelStackResp3=roomChannelStackResponse.data)||void 0===_roomChannelStackResp3?void 0:_roomChannelStackResp3.video_ChannelStack]),(0,react.useMemo)((function(){var _roomChannelStackResp4,_roomChannelStackResp5;if(null===(_roomChannelStackResp4=roomChannelStackResponse.data)||void 0===_roomChannelStackResp4||null===(_roomChannelStackResp5=_roomChannelStackResp4.video_ChannelStack)||void 0===_roomChannelStackResp5||!_roomChannelStackResp5[0])return null;var finalUri=new URL(roomChannelStackResponse.data.video_ChannelStack[0].endpointUri);return finalUri.hostname=roomChannelStackResponse.data.video_ChannelStack[0].cloudFrontDomain,finalUri.toString()}),[null===(_roomChannelStackResp6=roomChannelStackResponse.data)||void 0===_roomChannelStackResp6?void 0:_roomChannelStackResp6.video_ChannelStack])}(roomDetails.id,broadcastEventStartsAt),secondsUntilBroadcastEvent=Math.round((broadcastEventStartsAt-now5s)/1e3),isPresenterOfUpcomingEvent=(0,react.useMemo)((function(){var _nonCurrentLiveEvents;return null!==(_nonCurrentLiveEvents=null==nonCurrentLiveEvents?void 0:nonCurrentLiveEvents.find((function(event){return null==event?void 0:event.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))})))&&void 0!==_nonCurrentLiveEvents&&_nonCurrentLiveEvents}),[currentRegistrant.id,nonCurrentLiveEvents]),presentingCurrentOrUpcomingSoonEvent=(0,react.useMemo)((function(){var isPresenterOfCurrentEvent=null!==currentRoomEvent&&currentRoomEvent.modeName===graphql.kdg.Livestream&&currentRoomEvent.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id})),isPresenterOfUpcomingSoonEvent=!(null==nonCurrentLiveEventsInNext20Mins||!nonCurrentLiveEventsInNext20Mins.some((function(event){return event.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))||event.presentations.some((function(presentation){return presentation.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))}))})));return isPresenterOfCurrentEvent||!!isPresenterOfUpcomingSoonEvent}),[currentRegistrant.id,currentRoomEvent,nonCurrentLiveEventsInNext20Mins]),_useState4=Room_slicedToArray((0,react.useState)(null),2),watchStreamForEventId=_useState4[0],setWatchStreamForEventId=_useState4[1],alreadyBackstage=(0,react.useRef)(!1),hasBackstage=!!roomEvents.some((function(event){return graphql.kdg.Livestream===event.modeName})),notExplicitlyWatchingCurrentOrNextEvent=!watchStreamForEventId||!!currentRoomEvent&&watchStreamForEventId!==currentRoomEvent.id||!currentRoomEvent&&!!nextRoomEvent&&watchStreamForEventId!==nextRoomEvent.id,showBackstage=hasBackstage&&notExplicitlyWatchingCurrentOrNextEvent&&(presentingCurrentOrUpcomingSoonEvent||alreadyBackstage.current);alreadyBackstage.current=showBackstage;var moveToNextBackstage=(0,react.useCallback)((function(){nextRoomEvent&&setBackstageSelectedEventId(nextRoomEvent.id)}),[nextRoomEvent]),currentEventModeIsNone=(null==currentRoomEvent?void 0:currentRoomEvent.modeName)===graphql.kdg.None,showDefaultVideoChatRoom=(0,react.useMemo)((function(){var _roomDetails$item;return!roomDetails.isProgramRoom||!roomDetails.isStreamingProgramRoom&&(!currentRoomEvent&&(!nextRoomEvent||nextRoomEvent.modeName!==graphql.kdg.External||zoomEventStartsAt-now30s>6e5)||(null==currentRoomEvent?void 0:currentRoomEvent.modeName)===graphql.kdg.VideoChat||!currentRoomEvent&&(null===(_roomDetails$item=roomDetails.item)||void 0===_roomDetails$item?void 0:_roomDetails$item.typeName)===graphql.gqi.Sponsor)}),[currentRoomEvent,nextRoomEvent,now30s,roomDetails.isProgramRoom,roomDetails.isStreamingProgramRoom,null===(_roomDetails$item2=roomDetails.item)||void 0===_roomDetails$item2?void 0:_roomDetails$item2.typeName,zoomEventStartsAt]),maybeZoomUrl=(0,react.useMemo)((function(){try{if(currentRoomEvent){var _currentRoomEvent$ite,currentZoomItems=null===(_currentRoomEvent$ite=currentRoomEvent.item)||void 0===_currentRoomEvent$ite?void 0:_currentRoomEvent$ite.zoomItems;if(null!=currentZoomItems&&currentZoomItems.length){var _R$last,versions=currentZoomItems[0].data;return{url:(null===(_R$last=es.Z$Q(versions))||void 0===_R$last?void 0:_R$last.data).url,name:currentZoomItems[0].name}}}if(nextRoomEvent){var _nextRoomEvent$item,nextZoomItems=null===(_nextRoomEvent$item=nextRoomEvent.item)||void 0===_nextRoomEvent$item?void 0:_nextRoomEvent$item.zoomItems;if(null!=nextZoomItems&&nextZoomItems.length&&now30s>Date.parse(nextRoomEvent.scheduledStartTime)-12e5){var _R$last2,_versions=nextZoomItems[0].data;return{url:(null===(_R$last2=es.Z$Q(_versions))||void 0===_R$last2?void 0:_R$last2.data).url,name:nextZoomItems[0].name}}}return}catch(e){return void console.error("Error finding current event Zoom details",e)}}),[currentRoomEvent,nextRoomEvent,now30s]),videoPlayerRef=(0,react.useRef)(null),_useState6=Room_slicedToArray((0,react.useState)(null),2),selectedVideoElementId=_useState6[0],setSelectedVideoElementId=_useState6[1];(0,react.useEffect)((function(){selectedVideoElementId&&currentRoomEvent&&currentRoomEvent.modeName!==graphql.kdg.VideoPlayer&&setSelectedVideoElementId(null)}),[currentRoomEvent]);var toast=(0,chakra_ui_toast_esm.pm)();(0,react.useEffect)((function(){currentRoomEvent&&currentRoomEvent.modeName===graphql.kdg.Livestream&&currentRoomEvent.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))&&watchStreamForEventId===currentRoomEvent.id&&!showBackstage?toast({status:"warning",position:"top",duration:15e3,isClosable:!0,title:"You are a presenter of an event starting now",description:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){return setWatchStreamForEventId(null)},colorScheme:"PrimaryActionButton",mt:2,children:"Go to the backstage"})}):nextRoomEvent&&nextRoomEvent.modeName===graphql.kdg.Livestream&&nextRoomEvent.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))&&Date.parse(nextRoomEvent.scheduledStartTime)-Date.now()<12e5&&!showBackstage&&toast({status:"warning",position:"top",isClosable:!0,title:"You are a presenter of the next event",description:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){return setWatchStreamForEventId(null)},colorScheme:"PrimaryActionButton",mt:2,children:"Go to the backstage"})})}),[null==currentRoomEvent?void 0:currentRoomEvent.id]);var _useAppLayout=(0,AppLayoutContext.F)(),mainPaneHeight=_useAppLayout.mainPaneHeight,mainPaneWidth=_useAppLayout.mainPaneWidth,scrollRef=(0,react.useRef)(null),controlBarEl=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gridRowGap:2,py:2,px:4,children:[(0,jsx_runtime.jsx)(RoomTitle,{roomDetails}),showBackstage?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",children:"Backstages"}):void 0,(roomDetails.item||currentRoomEvent||nextRoomEvent)&&!showBackstage?(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ArrowDownIcon,{}),variant:"link",size:"sm",onClick:function onClick(){var _scrollRef$current;return null==scrollRef||null===(_scrollRef$current=scrollRef.current)||void 0===_scrollRef$current?void 0:_scrollRef$current.scrollIntoView(!0)},children:"Scroll to content"}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.LZ,{}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{flex:"1",justifyContent:"flex-end",children:(0,jsx_runtime.jsx)(RoomMembersButton,{roomDetails})})]})}),[currentRoomEvent,nextRoomEvent,roomDetails,showBackstage]),roomEventsForCurrentRegistrant=(0,react.useMemo)((function(){return roomEvents.filter((function(event){return event.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))||event.presentations.some((function(presentation){return presentation.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))}))}))}),[currentRegistrant.id,roomEvents]),_useState8=Room_slicedToArray((0,react.useState)(null),2),backstageSelectedEventId=_useState8[0],setBackstageSelectedEventId=_useState8[1],raiseHand=(0,RaiseHandProvider.kH)(),currentUser=(0,useCurrentUser.Z)().user;(0,react.useEffect)((function(){if(currentRegistrant.userId)if(showBackstage){var isPresenterOrChairOfCurrentEvent=null!==currentRoomEvent&&currentRoomEvent.modeName===graphql.kdg.Livestream&&currentRoomEvent.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id&&person.roleName!==graphql.hQl.Participant}));raiseHand.setCurrentEventId(backstageSelectedEventId===(null==currentRoomEvent?void 0:currentRoomEvent.id)?backstageSelectedEventId:null,currentRegistrant.userId,isPresenterOrChairOfCurrentEvent?graphql.hQl.Chair:graphql.hQl.Participant)}else null!=currentRoomEvent&&currentRoomEvent.id&&(null==currentRoomEvent?void 0:currentRoomEvent.modeName)===graphql.kdg.Livestream?raiseHand.setCurrentEventId(currentRoomEvent.id,currentRegistrant.userId,graphql.hQl.Participant):raiseHand.setCurrentEventId(null,currentRegistrant.userId,graphql.hQl.Participant);return function(){currentRegistrant.userId&&raiseHand.setCurrentEventId(null,currentRegistrant.userId,graphql.hQl.Participant)}}),[showBackstage,backstageSelectedEventId,currentRegistrant.id,currentRegistrant.userId,currentRoomEvent,raiseHand]),(0,react.useEffect)((function(){return raiseHand.setIsBackstage(showBackstage),function(){raiseHand.setIsBackstage(!1)}}),[raiseHand,showBackstage,null==currentRoomEvent?void 0:currentRoomEvent.id,backstageSelectedEventId]),(0,react.useEffect)((function(){var unobserve=null!=currentRoomEvent&&currentRoomEvent.id?raiseHand.observe(currentRoomEvent.id,(function(update){"userId"in update&&update.userId===currentUser.id&&update.wasAccepted&&setTimeout((function(){refetchRoomEvents(),setWatchStreamForEventId(null),setBackstageSelectedEventId(currentRoomEvent.id)}),150)})):function(){};return function(){unobserve()}}),[refetchRoomEvents,null==currentRoomEvent?void 0:currentRoomEvent.id,currentUser.id,raiseHand]);var onLeaveBackstage=(0,react.useCallback)((function(){var isParticipantOfCurrentEvent=null!==currentRoomEvent&&currentRoomEvent.modeName===graphql.kdg.Livestream&&currentRoomEvent.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id&&person.roleName===graphql.hQl.Participant})),isPresenterOfUpcomingSoonEvent=!(null==nonCurrentLiveEventsInNext20Mins||!nonCurrentLiveEventsInNext20Mins.some((function(event){return null==event?void 0:event.eventPeople.some((function(person){return person.person.registrantId===currentRegistrant.id}))})));isParticipantOfCurrentEvent&&currentRoomEvent&&(setBackstageSelectedEventId(null),isPresenterOfUpcomingSoonEvent||setWatchStreamForEventId(currentRoomEvent.id))}),[currentRegistrant.id,currentRoomEvent,nonCurrentLiveEventsInNext20Mins]),backStageEl=(0,react.useMemo)((function(){return(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(CenteredSpinner.Z,{caller:"Room:542"}),children:(0,jsx_runtime.jsx)(Backstages,{showBackstage,roomName:roomDetails.name,roomEvents:roomEventsForCurrentRegistrant,currentRoomEventId:null==currentRoomEvent?void 0:currentRoomEvent.id,nextRoomEventId:null==nextRoomEvent?void 0:nextRoomEvent.id,selectedEventId:backstageSelectedEventId,setWatchStreamForEventId,onEventSelected:setBackstageSelectedEventId,roomChatId:roomDetails.chatId,onLeave:onLeaveBackstage,hlsUri:null!=hlsUri?hlsUri:void 0})})}),[showBackstage,roomDetails.name,roomDetails.chatId,roomEventsForCurrentRegistrant,null==currentRoomEvent?void 0:currentRoomEvent.id,null==nextRoomEvent?void 0:nextRoomEvent.id,backstageSelectedEventId,onLeaveBackstage,hlsUri]),contentEl=(0,react.useMemo)((function(){return roomDetails.item||currentRoomEvent||nextRoomEvent?(0,jsx_runtime.jsx)(RoomContent,{currentRoomEvent,nextRoomEvent,roomDetails,onChooseVideo:function onChooseVideo(id){var _videoPlayerRef$curre,_videoPlayerRef$curre2;setSelectedVideoElementId(id),null==videoPlayerRef||null===(_videoPlayerRef$curre=videoPlayerRef.current)||void 0===_videoPlayerRef$curre||_videoPlayerRef$curre.focus(),null==videoPlayerRef||null===(_videoPlayerRef$curre2=videoPlayerRef.current)||void 0===_videoPlayerRef$curre2||_videoPlayerRef$curre2.scrollIntoView()},currentlySelectedVideoElementId:null!=selectedVideoElementId?selectedVideoElementId:void 0}):void 0}),[currentRoomEvent,nextRoomEvent,roomDetails,selectedVideoElementId]),shuffleRoomEndsAt=(0,react.useMemo)((function(){return roomDetails.shuffleRooms.length?Date.parse(roomDetails.shuffleRooms[0].startedAt)+60*roomDetails.shuffleRooms[0].durationMinutes*1e3:Number.POSITIVE_INFINITY}),[roomDetails.shuffleRooms]),bgColour=(0,chakra_ui_color_mode_esm.ff)("Room.videoChatBackgroundColor-light","Room.videoChatBackgroundColor-dark"),breakoutRoomClosesAt=Math.min(broadcastEventStartsAt,zoomEventStartsAt-6e5),startsSoonEl=(0,react.useMemo)((function(){return(0,jsx_runtime.jsx)(RoomTimeAlert,{breakoutRoomClosesAt,broadcastStartsAt:broadcastEventStartsAt,eventIsOngoing:!!currentRoomEvent,showDefaultVideoChatRoom,shuffleEndsAt:shuffleRoomEndsAt,zoomStartsAt:zoomEventStartsAt})}),[breakoutRoomClosesAt,broadcastEventStartsAt,currentRoomEvent,showDefaultVideoChatRoom,shuffleRoomEndsAt,zoomEventStartsAt]),playerEl=(0,react.useMemo)((function(){var _roomDetails$chatId,currentEventIsVideoPlayer=(null==currentRoomEvent?void 0:currentRoomEvent.modeName)===graphql.kdg.VideoPlayer,shouldShowLivePlayer=!currentEventModeIsNone&&(!showDefaultVideoChatRoom||withinStreamLatencySinceBroadcastEvent)&&withinThreeMinutesOfBroadcastEvent;return showBackstage?void 0:currentEventIsVideoPlayer||selectedVideoElementId&&!currentRoomEvent?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{pos:"relative",ref:videoPlayerRef,children:[selectedVideoElementId?(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(CenteredSpinner.Z,{caller:"Room.tsx:644"}),children:(0,jsx_runtime.jsx)(VideoPlayer,{elementId:selectedVideoElementId})}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.oM,{w:"min(100%, 90vh * (16 / 9))",maxW:"100%",ratio:16/9,border:"3px solid",borderColor:"gray.400",borderRadius:"lg",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"2xl",children:"Select a video below"}),(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"hand-point-down","aria-hidden":"true",iconStyle:"r",fontSize:"6xl"})]})})}),(0,jsx_runtime.jsx)(EmojiFloatContainer.Z,{chatId:null!==(_roomDetails$chatId=roomDetails.chatId)&&void 0!==_roomDetails$chatId?_roomDetails$chatId:""})]}):shouldShowLivePlayer&&hlsUri?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{pos:"relative",children:(0,jsx_runtime.jsx)(VideoAspectWrapper.t,{maxHeight:mainPaneHeight,maxWidth:mainPaneWidth,children:function children(onAspectRatioChange){var _roomDetails$chatId2;return(0,jsx_runtime.jsxs)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(CenteredSpinner.Z,{caller:"Room:678"}),children:[(0,jsx_runtime.jsx)(HlsPlayer,{roomId:roomDetails.id,canPlay:withinThreeMinutesOfBroadcastEvent||!!currentRoomEvent,hlsUri,onAspectRatioChange,expectLivestream:secondsUntilBroadcastEvent<10}),(0,jsx_runtime.jsx)(EmojiFloatContainer.Z,{chatId:null!==(_roomDetails$chatId2=roomDetails.chatId)&&void 0!==_roomDetails$chatId2?_roomDetails$chatId2:""})]})}})}):void 0}),[currentRoomEvent,currentEventModeIsNone,showDefaultVideoChatRoom,withinStreamLatencySinceBroadcastEvent,withinThreeMinutesOfBroadcastEvent,showBackstage,selectedVideoElementId,roomDetails.chatId,roomDetails.id,hlsUri,mainPaneHeight,mainPaneWidth,secondsUntilBroadcastEvent]),canControlRecordingAs=(0,react.useMemo)((function(){var _roomDetails$item3,reasons=new Set;return currentRegistrant.conferenceRole===graphql.OiL.Organizer&&reasons.add(VonageRoomProvider.c$.ConferenceOrganizer),roomDetails.roomMemberships.some((function(membership){return membership.personRoleName===graphql.FZ1.Admin}))&&reasons.add(VonageRoomProvider.c$.RoomAdmin),currentRoomEvent?currentRoomEvent.eventPeople.some((function(person){var _person$person;return(null===(_person$person=person.person)||void 0===_person$person?void 0:_person$person.registrantId)===currentRegistrant.id&&person.roleName!==graphql.hQl.Participant}))&&reasons.add(VonageRoomProvider.c$.EventPerson):null!==(_roomDetails$item3=roomDetails.item)&&void 0!==_roomDetails$item3&&_roomDetails$item3.selfPeople.some((function(itemPerson){return"AUTHOR"===itemPerson.roleName.toUpperCase()||"PRESENTER"===itemPerson.roleName.toUpperCase()||"CHAIR"===itemPerson.roleName.toUpperCase()||"SESSION ORGANIZER"===itemPerson.roleName.toUpperCase()||"ORGANIZER"===itemPerson.roleName.toUpperCase()}))&&reasons.add(VonageRoomProvider.c$.ItemPerson),reasons}),[currentRegistrant.conferenceRole,currentRegistrant.id,currentRoomEvent,null===(_roomDetails$item4=roomDetails.item)||void 0===_roomDetails$item4?void 0:_roomDetails$item4.selfPeople,roomDetails.roomMemberships]),vonage=(0,VonageGlobalStateProvider.dn)(),_useState10=Room_slicedToArray((0,react.useState)(vonage.IsConnected.value),2),connected=_useState10[0],setConnected=_useState10[1];return(0,useEvent.z)(vonage,"session-connected",setConnected),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{alignItems:"stretch",flexGrow:1,w:"100%",spacing:0,children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexGrow:2.5,flexDir:"column",textAlign:"left",alignItems:"stretch",minW:"100%",maxW:"100%",transition:"height 1s ease",h:showDefaultVideoChatRoom&&!showBackstage&&connected?"calc(100vh - (6ex + 6px))":"undefined",children:[controlBarEl,showBackstage?backStageEl:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[startsSoonEl,isPresenterOfUpcomingEvent?(0,jsx_runtime.jsx)(UpcomingBackstageBanner,{event:isPresenterOfUpcomingEvent}):void 0,maybeZoomUrl&&(null==currentRoomEvent?void 0:currentRoomEvent.modeName)===graphql.kdg.External?(0,jsx_runtime.jsx)(JoinZoomButton,{zoomUrl:maybeZoomUrl}):maybeZoomUrl&&(null==nextRoomEvent?void 0:nextRoomEvent.modeName)===graphql.kdg.External&&zoomEventStartsAt-now5s<6e5?(0,jsx_runtime.jsx)(JoinZoomButton,{zoomUrl:maybeZoomUrl,scheduledStartTime:zoomEventStartsAt}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{bgColor:showDefaultVideoChatRoom?bgColour:"none",zIndex:2,flexGrow:1,children:(0,jsx_runtime.jsx)(VideoChatRoom,{defaultVideoBackendName:defaultVideoBackend,roomDetails,enable:showDefaultVideoChatRoom,eventId:null!==(_currentRoomEvent$id=null==currentRoomEvent?void 0:currentRoomEvent.id)&&void 0!==_currentRoomEvent$id?_currentRoomEvent$id:nextRoomEvent&&nextRoomEvent.modeName===graphql.kdg.VideoChat?nextRoomEvent.id:void 0,eventIsFuture:!currentRoomEvent,canControlRecordingAs})})]})]}),null!=playerEl?playerEl:showDefaultVideoChatRoom||!roomDetails.isStreamingProgramRoom||showBackstage?void 0:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{h:"100%",p:4,fontSize:"xl",children:"There is not currently a live event in this room. The live-stream video will appear here when the next event starts."}),showBackstage?void 0:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.div,{ref:scrollRef}),(0,jsx_runtime.jsx)(StreamTextCaptions.Z,{streamTextEventId:null==currentRoomEvent?void 0:currentRoomEvent.streamTextEventId}),contentEl]})]}),(0,jsx_runtime.jsx)(RoomContinuationChoices,{currentRoomEvent,nextRoomEvent,roomDetails,showBackstage,currentRegistrantId:currentRegistrant.id,currentBackstageEventId:backstageSelectedEventId,moveToNextBackstage})]})}try{Room.displayName="Room",Room.__docgenInfo={description:"",displayName:"Room",props:{roomDetails:{defaultValue:null,description:"",name:"roomDetails",required:!0,type:{name:"RoomPage_RoomDetailsFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/Room.tsx#Room"]={docgenInfo:Room.__docgenInfo,name:"Room",path:"src/aspects/Conference/Attend/Room/Room.tsx#Room"})}catch(__react_docgen_typescript_loader_error){}function RoomPage_slicedToArray(arr,i){return function RoomPage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function RoomPage_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function RoomPage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return RoomPage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RoomPage_arrayLikeToArray(o,minLen)}(arr,i)||function RoomPage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RoomPage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RoomPage_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}function RoomPage(_ref){var roomId=_ref.roomId;return(0,jsx_runtime.jsx)(RequireRole.Z,{componentIfDenied:(0,jsx_runtime.jsx)(PageNotFound.default,{}),attendeeRole:!0,children:(0,jsx_runtime.jsx)(RoomPageInner,{roomId})})}function RoomPageInner(_ref2){var _roomDetailsResponse$,_roomDetailsResponse$2,_roomDetailsResponse$3,roomId=_ref2.roomId,registrant=(0,useCurrentRegistrant.ZP)(),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.RoomId]=roomId,_makeContext))}),[roomId]),roomDetailsResponse=RoomPage_slicedToArray((0,graphql._3_)({variables:{roomId,registrantId:registrant.id},context}),1)[0],title=(0,useTitle.Z)(roomDetailsResponse.fetching?"Loading room":null!==(_roomDetailsResponse$=null==roomDetailsResponse||null===(_roomDetailsResponse$2=roomDetailsResponse.data)||void 0===_roomDetailsResponse$2||null===(_roomDetailsResponse$3=_roomDetailsResponse$2.room_Room_by_pk)||void 0===_roomDetailsResponse$3?void 0:_roomDetailsResponse$3.name)&&void 0!==_roomDetailsResponse$?_roomDetailsResponse$:"Unknown room");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[title,(0,jsx_runtime.jsx)(QueryWrapper.Z,{getter:function getter(data){return data.room_Room_by_pk},queryResult:roomDetailsResponse,childrenNoData:function childrenNoData(){return(0,jsx_runtime.jsx)(PageNotFound.default,{})},children:function children(room){return(0,jsx_runtime.jsx)(RoomOuter,{roomDetails:room})}})]})}(0,urql_core.Ps)(RoomPage_templateObject||(RoomPage_templateObject=RoomPage_taggedTemplateLiteralLoose(["\n    query RoomPage_GetRoomDetails($roomId: uuid!, $registrantId: uuid!) @cached {\n        room_Room_by_pk(id: $roomId) {\n            ...RoomPage_RoomDetails\n        }\n    }\n\n    fragment RoomPage_RoomDetails on room_Room {\n        id\n        name\n        isProgramRoom\n        isStreamingProgramRoom\n        publicVonageSessionId\n        chatId\n        itemId\n        roomMemberships(where: { registrantId: { _eq: $registrantId } }) {\n            id\n            personRoleName\n        }\n        item {\n            id\n            typeName\n            elements(\n                where: { typeName: { _in: [IMAGE_URL, IMAGE_FILE] }, layoutData: { _contains: { isLogo: true } } }\n                limit: 1\n                order_by: { updatedAt: desc }\n            ) {\n                id\n                data\n                layoutData\n                typeName\n                updatedAt\n            }\n            selfPeople: itemPeople(where: { person: { registrantId: { _eq: $registrantId } } }) {\n                id\n                roleName\n            }\n            title\n        }\n        managementModeName\n        shuffleRooms(limit: 1, order_by: { id: desc }) {\n            id\n            startedAt\n            durationMinutes\n            reshuffleUponEnd\n            shufflePeriodId\n            roomId\n        }\n        backendName\n    }\n\n    query RoomPage_GetRoomChannelStack($roomId: uuid!) {\n        video_ChannelStack(where: { roomId: { _eq: $roomId } }) {\n            ...RoomPage_RoomChannelStack\n        }\n    }\n\n    fragment RoomPage_RoomChannelStack on video_ChannelStack {\n        cloudFrontDomain\n        endpointUri\n        roomId\n        id\n    }\n"]))),RoomPage.displayName="RoomPage",(0,urql_core.Ps)(_templateObject2||(_templateObject2=RoomPage_taggedTemplateLiteralLoose(["\n    query GetEventVonageDetails($eventId: uuid!) @cached {\n        schedule_Event_by_pk(id: $eventId) {\n            eventVonageSession {\n                sessionId\n                eventId\n                id\n            }\n            id\n        }\n    }\n"])));try{RoomPage.displayName="RoomPage",RoomPage.__docgenInfo={description:"",displayName:"RoomPage",props:{roomId:{defaultValue:null,description:"",name:"roomId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/RoomPage.tsx#RoomPage"]={docgenInfo:RoomPage.__docgenInfo,name:"RoomPage",path:"src/aspects/Conference/Attend/Room/RoomPage.tsx#RoomPage"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Conference/Attend/Room/StreamTextCaptions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>StreamTextCaptions});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js");var _chakra_ui_icons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+system@1.10.3_922a85da57e3646a57465b7970b0de85/node_modules/@chakra-ui/system/dist/chakra-ui-system.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),tinycolor2__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../node_modules/.pnpm/tinycolor2@1.4.2/node_modules/tinycolor2/tinycolor.js"),tinycolor2__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_12__),_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),_Hooks_useRestorableState__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/aspects/Hooks/useRestorableState.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function StreamTextCaptions(_ref){var streamTextEventId=_ref.streamTextEventId,streamTextBgColour=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.ff)("StreamText.backgroundColor-light","StreamText.backgroundColor-dark"),streamTextFgColour=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.ff)("StreamText.foregroundColor-light","StreamText.foregroundColor-dark"),streamTextBgColourRaw=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__.dQ)("colors",streamTextBgColour),streamTextFgColourRaw=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__.dQ)("colors",streamTextFgColour),_useRestorableState2=_slicedToArray((0,_Hooks_useRestorableState__WEBPACK_IMPORTED_MODULE_14__.aX)("enableStreamTextCaptions",!0,(function(v){return v?"true":"false"}),(function(v){return"true"===v})),2),enableStreamTextCaptions=_useRestorableState2[0],setEnableStreamTextCaptions=_useRestorableState2[1];return(0,react__WEBPACK_IMPORTED_MODULE_11__.useMemo)((function(){if(streamTextEventId){var bgColourObj=tinycolor2__WEBPACK_IMPORTED_MODULE_12___default()(streamTextBgColourRaw),fgColourObj=tinycolor2__WEBPACK_IMPORTED_MODULE_12___default()(streamTextFgColourRaw),bgColourHex=bgColourObj.toHex(),fgColourHex=fgColourObj.toHex(),src="//www.streamtext.net/player/?event="+streamTextEventId+"&title=false&chat=false&footer=false&bgc="+bgColourHex+"&fgc="+fgColourHex;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_18__.xu,{border:"1px solid",borderColor:fgColourHex,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_18__.kC,{flexWrap:"wrap",pb:enableStreamTextCaptions?2:0,flexDir:["column","column","row"],justifyContent:"stretch",children:[enableStreamTextCaptions?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_19__.zx,{colorScheme:"PrimaryActionButton",size:"sm",mr:[0,0,2],onClick:function onClick(){setEnableStreamTextCaptions(!1)},"aria-label":"Hide StreamText.Net live captions",children:["Hide",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_20__.ChevronUpIcon,{fontSize:"xl",m:0,ml:1})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_19__.zx,{colorScheme:"PrimaryActionButton",size:"sm",mr:[0,0,2],onClick:function onClick(){setEnableStreamTextCaptions(!0)},"aria-label":"Show StreamText.Net live captions",children:["Show",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_20__.ChevronDownIcon,{fontSize:"xl",m:0,ml:1})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_18__.X6,{as:"h4",pt:2,pb:[2,2,0],mx:"auto",fontSize:"md",children:["StreamText.Net live captions",enableStreamTextCaptions?"":" are available"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_13__.bd,{isExternal:!0,to:src,w:"100%",colorScheme:"PrimaryActionButton",size:"sm",linkProps:{ml:[0,0,2]},"aria-label":"Open StreamText.Net live captions in a new window",children:["Open in new window",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_20__.ExternalLinkIcon,{ml:1})]})]}),enableStreamTextCaptions?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("iframe",{src,style:{width:"100%",height:"max(15vh, 250px)"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_18__.xv,{p:2,fontSize:"xs",children:["This service is provied by"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_18__.rU,{href:"https://streamtext.net",isExternal:!0,children:["StreamText.Net",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("sup",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_20__.ExternalLinkIcon,{})})]})," ","and is not affiliated with Midspace. If you experience problems with the StreamText captions, please contact your conference organizers."]})]}):void 0]})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{})}),[streamTextEventId,streamTextBgColourRaw,streamTextFgColourRaw,enableStreamTextCaptions,setEnableStreamTextCaptions])}try{StreamTextCaptions.displayName="StreamTextCaptions",StreamTextCaptions.__docgenInfo={description:"",displayName:"StreamTextCaptions",props:{streamTextEventId:{defaultValue:null,description:"",name:"streamTextEventId",required:!0,type:{name:"string | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Room/StreamTextCaptions.tsx#StreamTextCaptions"]={docgenInfo:StreamTextCaptions.__docgenInfo,name:"StreamTextCaptions",path:"src/aspects/Conference/Attend/Room/StreamTextCaptions.tsx#StreamTextCaptions"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Emoji/EmojiFloatContainer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>EmojiFloatContainer});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js");var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_reverse_portal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../node_modules/.pnpm/react-reverse-portal@2.1.0_react-dom@17.0.2+react@17.0.2/node_modules/react-reverse-portal/dist/web/index.js"),_EmojiFloat__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/aspects/Emoji/EmojiFloat.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js"),_excluded=["chatId","xDurationMs","yDurationMs"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function EmojiFloatContainer(_ref){var chatId=_ref.chatId,_ref$xDurationMs=_ref.xDurationMs,xDurationMs=void 0===_ref$xDurationMs?1500:_ref$xDurationMs,_ref$yDurationMs=_ref.yDurationMs,yDurationMs=void 0===_ref$yDurationMs?4e3:_ref$yDurationMs,props=_objectWithoutProperties(_ref,_excluded),emojiFloat=(0,_EmojiFloat__WEBPACK_IMPORTED_MODULE_6__.VC)();return(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){return emojiFloat.setIsActive(chatId),emojiFloat.setExtents(70,90,xDurationMs,100,0,yDurationMs),function(){emojiFloat.setIsActive("")}}),[emojiFloat,xDurationMs,yDurationMs,chatId]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.xu,Object.assign({position:"absolute",top:0,left:0,w:"100%",h:"100%",zIndex:100,pointerEvents:"none"},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react_reverse_portal__WEBPACK_IMPORTED_MODULE_5__.t0,{node:emojiFloat.portalNode})}))}EmojiFloatContainer.displayName="EmojiFloatContainer";try{EmojiFloatContainer.displayName="EmojiFloatContainer",EmojiFloatContainer.__docgenInfo={description:"",displayName:"EmojiFloatContainer",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"As<any>"}},_hover:{defaultValue:null,description:"Styles for CSS selector `&:hover`",name:"_hover",required:!1,type:{name:"CSSObject"}},_active:{defaultValue:null,description:"Styles for CSS Selector `&:active`",name:"_active",required:!1,type:{name:"CSSObject"}},_focus:{defaultValue:null,description:"Styles for CSS selector `&:focus`",name:"_focus",required:!1,type:{name:"CSSObject"}},_highlighted:{defaultValue:null,description:"Styles for the highlighted state.",name:"_highlighted",required:!1,type:{name:"CSSObject"}},_focusWithin:{defaultValue:null,description:"Styles to apply when a child of this element has received focus\n- CSS Selector `&:focus-within`",name:"_focusWithin",required:!1,type:{name:"CSSObject"}},_focusVisible:{defaultValue:null,description:"Styles to apply when this element has received focus via tabbing\n- CSS Selector `&:focus-visible`",name:"_focusVisible",required:!1,type:{name:"CSSObject"}},_disabled:{defaultValue:null,description:"Styles to apply when this element is disabled. The passed styles are applied to these CSS selectors:\n- `&[aria-disabled=true]`\n- `&:disabled`\n- `&[data-disabled]`",name:"_disabled",required:!1,type:{name:"CSSObject"}},_readOnly:{defaultValue:null,description:"Styles for CSS Selector `&:readonly`",name:"_readOnly",required:!1,type:{name:"CSSObject"}},_before:{defaultValue:null,description:'Styles for CSS selector `&::before`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _before={{content:`""` }}/>\n```',name:"_before",required:!1,type:{name:"CSSObject"}},_after:{defaultValue:null,description:'Styles for CSS selector `&::after`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _after={{content:`""` }}/>\n```',name:"_after",required:!1,type:{name:"CSSObject"}},_empty:{defaultValue:null,description:"Styles for CSS selector `&:empty`",name:"_empty",required:!1,type:{name:"CSSObject"}},_expanded:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-expanded` is `true`\n- CSS selector `&[aria-expanded=true]`",name:"_expanded",required:!1,type:{name:"CSSObject"}},_checked:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `true`\n- CSS selector `&[aria-checked=true]`",name:"_checked",required:!1,type:{name:"CSSObject"}},_grabbed:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-grabbed` is `true`\n- CSS selector `&[aria-grabbed=true]`",name:"_grabbed",required:!1,type:{name:"CSSObject"}},_pressed:{defaultValue:null,description:'Styles for CSS Selector `&[aria-pressed=true]`\nTypically used to style the current "pressed" state of toggle buttons',name:"_pressed",required:!1,type:{name:"CSSObject"}},_invalid:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-invalid` is `true`\n- CSS selector `&[aria-invalid=true]`",name:"_invalid",required:!1,type:{name:"CSSObject"}},_valid:{defaultValue:null,description:"Styles for the valid state\n- CSS selector `&[data-valid], &[data-state=valid]`",name:"_valid",required:!1,type:{name:"CSSObject"}},_loading:{defaultValue:null,description:"Styles for CSS Selector `&[aria-busy=true]` or `&[data-loading=true]`.\nUseful for styling loading states",name:"_loading",required:!1,type:{name:"CSSObject"}},_selected:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-selected` is `true`\n\n- CSS selector `&[aria-selected=true]`",name:"_selected",required:!1,type:{name:"CSSObject"}},_hidden:{defaultValue:null,description:"Styles for CSS Selector `[hidden=true]`",name:"_hidden",required:!1,type:{name:"CSSObject"}},_autofill:{defaultValue:null,description:"Styles for CSS Selector `&:-webkit-autofill`",name:"_autofill",required:!1,type:{name:"CSSObject"}},_even:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(even)`",name:"_even",required:!1,type:{name:"CSSObject"}},_odd:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(odd)`",name:"_odd",required:!1,type:{name:"CSSObject"}},_first:{defaultValue:null,description:"Styles for CSS Selector `&:first-of-type`",name:"_first",required:!1,type:{name:"CSSObject"}},_last:{defaultValue:null,description:"Styles for CSS Selector `&:last-of-type`",name:"_last",required:!1,type:{name:"CSSObject"}},_notFirst:{defaultValue:null,description:"Styles for CSS Selector `&:not(:first-of-type)`",name:"_notFirst",required:!1,type:{name:"CSSObject"}},_notLast:{defaultValue:null,description:"Styles for CSS Selector `&:not(:last-of-type)`",name:"_notLast",required:!1,type:{name:"CSSObject"}},_visited:{defaultValue:null,description:"Styles for CSS Selector `&:visited`",name:"_visited",required:!1,type:{name:"CSSObject"}},_activeLink:{defaultValue:null,description:"Used to style the active link in a navigation\nStyles for CSS Selector `&[aria-current=page]`",name:"_activeLink",required:!1,type:{name:"CSSObject"}},_activeStep:{defaultValue:null,description:"Used to style the current step within a process\nStyles for CSS Selector `&[aria-current=step]`",name:"_activeStep",required:!1,type:{name:"CSSObject"}},_indeterminate:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `mixed`\n- CSS selector `&[aria-checked=mixed]`",name:"_indeterminate",required:!1,type:{name:"CSSObject"}},_groupHover:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is hovered",name:"_groupHover",required:!1,type:{name:"CSSObject"}},_peerHover:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is hovered",name:"_peerHover",required:!1,type:{name:"CSSObject"}},_groupFocus:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is focused",name:"_groupFocus",required:!1,type:{name:"CSSObject"}},_peerFocus:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is focused",name:"_peerFocus",required:!1,type:{name:"CSSObject"}},_groupFocusVisible:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has visible focus",name:"_groupFocusVisible",required:!1,type:{name:"CSSObject"}},_peerFocusVisible:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer`or `data-peer` has visible focus",name:"_peerFocusVisible",required:!1,type:{name:"CSSObject"}},_groupActive:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is active",name:"_groupActive",required:!1,type:{name:"CSSObject"}},_peerActive:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is active",name:"_peerActive",required:!1,type:{name:"CSSObject"}},_groupDisabled:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is disabled",name:"_groupDisabled",required:!1,type:{name:"CSSObject"}},_peerDisabled:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is disabled",name:"_peerDisabled",required:!1,type:{name:"CSSObject"}},_groupInvalid:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is invalid",name:"_groupInvalid",required:!1,type:{name:"CSSObject"}},_peerInvalid:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is invalid",name:"_peerInvalid",required:!1,type:{name:"CSSObject"}},_groupChecked:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is checked",name:"_groupChecked",required:!1,type:{name:"CSSObject"}},_peerChecked:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is checked",name:"_peerChecked",required:!1,type:{name:"CSSObject"}},_groupFocusWithin:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has focus within",name:"_groupFocusWithin",required:!1,type:{name:"CSSObject"}},_peerFocusWithin:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has focus within",name:"_peerFocusWithin",required:!1,type:{name:"CSSObject"}},_peerPlaceholderShown:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has placeholder shown",name:"_peerPlaceholderShown",required:!1,type:{name:"CSSObject"}},_placeholder:{defaultValue:null,description:"Styles for CSS Selector `&::placeholder`.",name:"_placeholder",required:!1,type:{name:"CSSObject"}},_placeholderShown:{defaultValue:null,description:"Styles for CSS Selector `&:placeholder-shown`.",name:"_placeholderShown",required:!1,type:{name:"CSSObject"}},_fullScreen:{defaultValue:null,description:"Styles for CSS Selector `&:fullscreen`.",name:"_fullScreen",required:!1,type:{name:"CSSObject"}},_selection:{defaultValue:null,description:"Styles for CSS Selector `&::selection`",name:"_selection",required:!1,type:{name:"CSSObject"}},_rtl:{defaultValue:null,description:'Styles for CSS Selector `[dir=rtl] &`\nIt is applied when a parent element or this element has `dir="rtl"`',name:"_rtl",required:!1,type:{name:"CSSObject"}},_ltr:{defaultValue:null,description:'Styles for CSS Selector `[dir=ltr] &`\nIt is applied when a parent element or this element has `dir="ltr"`',name:"_ltr",required:!1,type:{name:"CSSObject"}},_mediaDark:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-color-scheme: dark)`\nIt is used when the user has requested the system use a light or dark color theme.",name:"_mediaDark",required:!1,type:{name:"CSSObject"}},_mediaReduceMotion:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-reduced-motion: reduce)`\nIt is used when the user has requested the system to reduce the amount of animations.",name:"_mediaReduceMotion",required:!1,type:{name:"CSSObject"}},_dark:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_dark",required:!1,type:{name:"CSSObject"}},_light:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_light",required:!1,type:{name:"CSSObject"}},chatId:{defaultValue:null,description:"",name:"chatId",required:!0,type:{name:"string"}},xDurationMs:{defaultValue:{value:"1500"},description:"",name:"xDurationMs",required:!1,type:{name:"number"}},yDurationMs:{defaultValue:{value:"4000"},description:"",name:"yDurationMs",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Emoji/EmojiFloatContainer.tsx#EmojiFloatContainer"]={docgenInfo:EmojiFloatContainer.__docgenInfo,name:"EmojiFloatContainer",path:"src/aspects/Emoji/EmojiFloatContainer.tsx#EmojiFloatContainer"})}catch(__react_docgen_typescript_loader_error){}},"../packages/shared/shared-types/build/esm/continuation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var ContinuationType,NavigationView,ContinuationDefaultFor;__webpack_require__.d(__webpack_exports__,{aS:()=>ContinuationType,Tu:()=>NavigationView,qp:()=>ContinuationDefaultFor}),function(ContinuationType){ContinuationType.URL="URL",ContinuationType.Room="Room",ContinuationType.Event="Event",ContinuationType.AutoDiscussionRoom="AutoDiscussionRoom",ContinuationType.Item="Item",ContinuationType.Exhibition="Exhibition",ContinuationType.ShufflePeriod="ShufflePeriod",ContinuationType.Profile="Profile",ContinuationType.OwnProfile="OwnProfile",ContinuationType.NavigationView="NavigationView",ContinuationType.ConferenceLandingPage="ConferenceLandingPage"}(ContinuationType||(ContinuationType={})),function(NavigationView){NavigationView.LiveProgramRooms="LiveProgramRooms",NavigationView.HappeningSoon="HappeningSoon",NavigationView.Tags="Tags",NavigationView.Exhibitions="Exhibitions",NavigationView.Schedule="Schedule",NavigationView.SocialRooms="SocialRooms",NavigationView.People="People",NavigationView.ShufflePeriods="ShufflePeriods",NavigationView.MyBackstages="MyBackstages"}(NavigationView||(NavigationView={})),function(ContinuationDefaultFor){ContinuationDefaultFor.None="None",ContinuationDefaultFor.All="Everyone",ContinuationDefaultFor.Presenters="Presenters",ContinuationDefaultFor.Chairs="Chairs",ContinuationDefaultFor.Viewers="Viewers"}(ContinuationDefaultFor||(ContinuationDefaultFor={}))},"../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.number.max-safe-integer.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/export.js")({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})}}]);