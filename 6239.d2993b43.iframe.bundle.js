"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[6239],{"./src/aspects/Conference/Manage/DashboardPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>DashboardPage});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js");var chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),useTitle=__webpack_require__("./src/aspects/Hooks/useTitle.tsx"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx"),chakra_ui_breadcrumb_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+breadcrumb@1.3.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/breadcrumb/dist/chakra-ui-breadcrumb.esm.js")),react_router_dom=__webpack_require__("../node_modules/.pnpm/react-router-dom@5.3.0_react@17.0.2/node_modules/react-router-dom/esm/react-router-dom.js"),es=__webpack_require__("../node_modules/.pnpm/use-react-router-breadcrumbs@2.0.2_react-router@5.2.1+react@17.0.2/node_modules/use-react-router-breadcrumbs/dist/es/index.js"),AuthParameters=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function Breadcrumbs(){var conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,confTitle=(0,react.useMemo)((function(){var _ref,_conference$subconfer;return null!==(_ref=subconferenceId?null===(_conference$subconfer=conference.subconferences.find((function(x){return x.id===subconferenceId})))||void 0===_conference$subconfer?void 0:_conference$subconfer.shortName:void 0)&&void 0!==_ref?_ref:conference.shortName}),[conference.shortName,conference.subconferences,subconferenceId]),routes=(0,react.useMemo)((function(){return[{path:"/conference/:slug/manage",breadcrumb:"Manage "+confTitle},{path:"/c/:slug/manage",breadcrumb:"Manage "+confTitle},{path:"/conference/:slug/manage/export/youtube",breadcrumb:"YouTube"},{path:"/c/:slug/manage/export/youtube",breadcrumb:"YouTube"},{path:"/conference/:slug/manage/export/download-videos",breadcrumb:"Download videos"},{path:"/c/:slug/manage/export/download-videos",breadcrumb:"Download videos"}]}),[confTitle]),breadcrumbs=(0,es.Z)(routes,{excludePaths:["/","/conference","/c","/conference/:slug","/c/:slug"]});return(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.aG,{separator:">",children:breadcrumbs.map((function(breadcrumb){return(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.gN,{isCurrentPage:breadcrumb.key===breadcrumb.location.key,children:(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.At,{as:react_router_dom.rU,to:breadcrumb.key,children:breadcrumb.breadcrumb})},breadcrumb.key)}))})}function DashboardHeaderControls(_ref){var children=_ref.children;return children?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.Ug,{spacing:4,mb:4,children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}Breadcrumbs.displayName="Breadcrumbs";try{DashboardHeaderControls.displayName="DashboardHeaderControls",DashboardHeaderControls.__docgenInfo={description:"",displayName:"DashboardHeaderControls",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/DashboardHeaderControls.tsx#DashboardHeaderControls"]={docgenInfo:DashboardHeaderControls.__docgenInfo,name:"DashboardHeaderControls",path:"src/aspects/Conference/Manage/DashboardHeaderControls.tsx#DashboardHeaderControls"})}catch(__react_docgen_typescript_loader_error){}var SubconferenceSelector=__webpack_require__("./src/aspects/Conference/Manage/Subconferences/SubconferenceSelector.tsx");function DashboardPage(_ref){var title=_ref.title,children=_ref.children,controls=_ref.controls,_ref$stickyHeader=_ref.stickyHeader,stickyHeader=void 0===_ref$stickyHeader||_ref$stickyHeader,_ref$autoOverflow=_ref.autoOverflow,autoOverflow=void 0===_ref$autoOverflow||_ref$autoOverflow,conference=(0,useConference.fk)(),grayBg=(0,chakra_ui_color_mode_esm.ff)("gray.50","gray.900"),grayBorder=(0,chakra_ui_color_mode_esm.ff)("gray.300","gray.600"),titleEl=(0,useTitle.Z)(title.includes(conference.shortName)?title:title+" - "+conference.shortName);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDir:"column",w:{base:"100%",xl:"80%"},px:[2,2,4],children:[titleEl,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{position:stickyHeader?"sticky":void 0,top:0,left:0,zIndex:1e5,bgColor:grayBg,pt:4,borderBottom:"1px solid",borderBottomColor:grayBorder,children:[(0,jsx_runtime.jsx)(Breadcrumbs,{}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{id:"page-heading",as:"h1",size:"xl",textAlign:"left",mt:4,mb:4,children:title}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.LZ,{}),(0,jsx_runtime.jsx)(SubconferenceSelector.B,{})]}),(0,jsx_runtime.jsx)(DashboardHeaderControls,{children:controls})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{flexDir:"column",mt:4,w:"100%",overflow:autoOverflow?"auto":void 0,children})]})}DashboardPage.displayName="DashboardPage";try{DashboardPage.displayName="DashboardPage",DashboardPage.__docgenInfo={description:"",displayName:"DashboardPage",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},stickyHeader:{defaultValue:{value:"true"},description:"",name:"stickyHeader",required:!1,type:{name:"boolean"}},autoOverflow:{defaultValue:{value:"true"},description:"",name:"autoOverflow",required:!1,type:{name:"boolean"}},controls:{defaultValue:null,description:"",name:"controls",required:!1,type:{name:"ReactChild[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/DashboardPage.tsx#DashboardPage"]={docgenInfo:DashboardPage.__docgenInfo,name:"DashboardPage",path:"src/aspects/Conference/Manage/DashboardPage.tsx#DashboardPage"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Conference/Manage/Export/ManageExport.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ManageExport});var react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),DashboardPage=__webpack_require__("./src/aspects/Conference/Manage/DashboardPage.tsx"),RestrictedDashboardButton=__webpack_require__("./src/aspects/Conference/Manage/RestrictedDashboardButton.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function Dashboard(){return(0,jsx_runtime.jsx)(DashboardPage.Y,{title:"Export",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDirection:"row",flexWrap:"wrap",gridGap:["0.3rem","0.3rem","1rem"],alignItems:"stretch",justifyContent:"left",maxW:1100,children:[(0,jsx_runtime.jsx)(RestrictedDashboardButton.Z,{to:"export/youtube",name:"Upload to YouTube",icon:"youtube",iconStyle:"b",description:"Export videos to YouTube.",organizerRole:!0,colorScheme:"purple"}),(0,jsx_runtime.jsx)(RestrictedDashboardButton.Z,{to:"export/download-videos",name:"Download videos",icon:"download",description:"Export videos to your computer.",organizerRole:!0,colorScheme:"purple"})]})})}Dashboard.displayName="Dashboard";var PageNotFound=__webpack_require__("./src/aspects/Errors/PageNotFound.tsx"),RequireRole=__webpack_require__("./src/aspects/Conference/RequireRole.tsx"),chakra_ui_spinner_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.flat-map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.unscopables.flat-map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.from-entries.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.join.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js")),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),auth=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),content=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),urql_core=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),amazon_s3_uri=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri_default=__webpack_require__.n(amazon_s3_uri),es=__webpack_require__("../node_modules/.pnpm/ramda@0.28.0/node_modules/ramda/es/index.js"),graphql=__webpack_require__("./src/generated/graphql.tsx"),FAIcon=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),AuthParameters=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),make_context=__webpack_require__("./src/aspects/GQL/make-context.ts"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx"),useRestorableState=__webpack_require__("./src/aspects/Hooks/useRestorableState.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var VideoDownloadContext=(0,react.createContext)({});function VideoDownloadProvider(props){return(0,jsx_runtime.jsx)(VideoDownloadContext.Provider,{value:(_useRestorableState2=_slicedToArray((0,useRestorableState.aX)("MIDSPACE_DOWNLOADED_ELEMENT_IDS",[],JSON.stringify,JSON.parse),2),downloadedElementIds=_useRestorableState2[0],setDownloadedElementIds=_useRestorableState2[1],addDownloadedElementId=(0,react.useCallback)((function(id){setDownloadedElementIds((function(ids){return es.G0j(ids,[id])}))}),[setDownloadedElementIds]),reset=(0,react.useCallback)((function(){return setDownloadedElementIds([])}),[setDownloadedElementIds]),{downloadedElementIds,setDownloadedElementIds,addDownloadedElementId,reset}),children:props.children});var _useRestorableState2,downloadedElementIds,setDownloadedElementIds,addDownloadedElementId,reset}VideoDownloadProvider.displayName="VideoDownloadProvider";try{VideoDownloadProvider.displayName="VideoDownloadProvider",VideoDownloadProvider.__docgenInfo={description:"",displayName:"VideoDownloadProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/Download/VideoDownloadContext.tsx#VideoDownloadProvider"]={docgenInfo:VideoDownloadProvider.__docgenInfo,name:"VideoDownloadProvider",path:"src/aspects/Conference/Manage/Export/Download/VideoDownloadContext.tsx#VideoDownloadProvider"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.split.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.exec.js");var _templateObject,chakra_ui_tooltip_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+tooltip@1.4.6_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/tooltip/dist/chakra-ui-tooltip.esm.js"),LinkButton=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx");function VideoDownloadLink(_ref){var itemTitle=_ref.itemTitle,elementName=_ref.elementName,elementId=_ref.elementId,data=_ref.data,extractVideoUrl=_ref.extractVideoUrl,_useContext=(0,react.useContext)(VideoDownloadContext),downloadedElementIds=_useContext.downloadedElementIds,addDownloadedElementId=_useContext.addDownloadedElementId,downloaded=(0,react.useMemo)((function(){return downloadedElementIds.includes(elementId)}),[downloadedElementIds,elementId]),videoURL=extractVideoUrl(data),fileName=(0,react.useMemo)((function(){return videoURL?elementId+"."+es.Z$Q(videoURL.split(".")):void 0}),[elementId,videoURL]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[downloaded?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Downloaded",children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"check-circle",iconStyle:"s","aria-label":"completed",color:"green.500"})}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Not yet downloaded",children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"dot-circle",iconStyle:"s","aria-label":"error",color:"blue.500"})}),(0,jsx_runtime.jsxs)(LinkButton.o6,{size:"sm",to:null!=videoURL?videoURL:"#",isDisabled:!videoURL,linkProps:{onClick:function onClick(){return videoURL&&addDownloadedElementId(elementId)},onContextMenu:function onContextMenu(){return videoURL&&addDownloadedElementId(elementId)}},colorScheme:downloaded?"gray":"SecondaryActionButton",fileName,children:[itemTitle," (",elementName,")"]})]})}VideoDownloadLink.displayName="VideoDownloadLink";try{VideoDownloadLink.displayName="VideoDownloadLink",VideoDownloadLink.__docgenInfo={description:"",displayName:"VideoDownloadLink",props:{itemTitle:{defaultValue:null,description:"",name:"itemTitle",required:!0,type:{name:"string"}},elementName:{defaultValue:null,description:"",name:"elementName",required:!0,type:{name:"string"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ElementDataBlob"}},extractVideoUrl:{defaultValue:null,description:"",name:"extractVideoUrl",required:!0,type:{name:"(data: ElementDataBlob) => string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/Download/VideoDownloadLink.tsx#VideoDownloadLink"]={docgenInfo:VideoDownloadLink.__docgenInfo,name:"VideoDownloadLink",path:"src/aspects/Conference/Manage/Export/Download/VideoDownloadLink.tsx#VideoDownloadLink"})}catch(__react_docgen_typescript_loader_error){}function AllVideoElements_slicedToArray(arr,i){return function AllVideoElements_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AllVideoElements_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AllVideoElements_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AllVideoElements_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AllVideoElements_arrayLikeToArray(o,minLen)}(arr,i)||function AllVideoElements_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AllVideoElements_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function elementDataToMaybeText(elementData){var _latest$data;if(!(0,content.Cp)(elementData))return null;var latest=es.Z$Q(elementData);return(null==latest||null===(_latest$data=latest.data)||void 0===_latest$data?void 0:_latest$data.baseType)===content.bN.Text?latest.data.text:null}function toS3Url(s3Url){try{var _AmazonS3URI=new(amazon_s3_uri_default())(s3Url),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key;return"https://s3."+(void 0).VITE_AWS_REGION+".amazonaws.com/"+bucket+"/"+key}catch(err){return}}function AllVideoElements(){var _result$data2,_videoElements$sort$m,_videoElements$sort,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,reset=(0,react.useContext)(VideoDownloadContext).reset,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),result=AllVideoElements_slicedToArray((0,graphql.zdJ)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],videoElements=(0,react.useMemo)((function(){var _result$data;return null===(_result$data=result.data)||void 0===_result$data?void 0:_result$data.content_Item.flatMap((function(item){return item.elements.filter((function(e){return[content.bK.VideoFile,content.bK.VideoBroadcast,content.bK.VideoPrepublish].includes(e.typeName)&&(0,content.Cp)(e.data)})).map((function(element){return{item,element,text:es.Pen(item.elements.filter((function(e){return e.typeName===content.bK.Text})).map((function(e){return[e.name,elementDataToMaybeText(e.data)]})))}}))}))}),[null===(_result$data2=result.data)||void 0===_result$data2?void 0:_result$data2.content_Item]),extractVideoUrl=(0,react.useCallback)((function(data){var _R$last,_elementData$transcod,elementData=null===(_R$last=es.Z$Q(data))||void 0===_R$last?void 0:_R$last.data;if(elementData&&elementData.baseType===content.bN.Video){var s3Url="transcode"in elementData?null===(_elementData$transcod=elementData.transcode)||void 0===_elementData$transcod?void 0:_elementData$transcod.s3Url:void 0;if(!s3Url&&elementData.s3Url&&(s3Url=elementData.s3Url),s3Url)return toS3Url(s3Url)}}),[]),extractCaptionUrls=(0,react.useCallback)((function(data){var _R$last2,elementData=null===(_R$last2=es.Z$Q(data))||void 0===_R$last2?void 0:_R$last2.data;if(elementData&&elementData.baseType===content.bN.Video){var entries=Object.entries(elementData.subtitles).filter((function(_ref){return AllVideoElements_slicedToArray(_ref,2)[1].status===content.RR.Completed})).map((function(_ref3){var _toS3Url,_ref4=AllVideoElements_slicedToArray(_ref3,2);return[_ref4[0],null!==(_toS3Url=toS3Url(_ref4[1].s3Url))&&void 0!==_toS3Url?_toS3Url:""]})).filter((function(_ref5){var v=AllVideoElements_slicedToArray(_ref5,2)[1];return Boolean(v.length)}));return Object.fromEntries(entries)}}),[]),downloadManifest=(0,react.useCallback)((function(){var manifest=null==videoElements?void 0:videoElements.map((function(_ref7){var element=_ref7.element,item=_ref7.item,text=_ref7.text;return{elementId:element.id,itemId:item.id,itemTitle:item.title,elementName:element.name,fileName:extractVideoUrl(element.data),captionUrls:extractCaptionUrls(element.data),text}})),blob=new Blob([JSON.stringify(manifest,null,2)],{type:"text/json"}),link=document.createElement("a");link.download="manifest.json",link.href=window.URL.createObjectURL(blob),link.dataset.downloadurl=["text/json",link.download,link.href].join(":");var evt=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});link.dispatchEvent(evt),link.remove()}),[extractCaptionUrls,extractVideoUrl,videoElements]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[result.fetching&&(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}),result.data?(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{mb:4,children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"download",iconStyle:"s"}),size:"sm",w:"max-content",onClick:downloadManifest,colorScheme:"PrimaryActionButton",children:"Download manifest"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"redo",iconStyle:"s"}),size:"sm",w:"max-content",onClick:reset,children:"Reset"})]}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{spacing:1,children:null!==(_videoElements$sort$m=null==videoElements||null===(_videoElements$sort=videoElements.sort((function(a,b){return a.item.title.localeCompare(b.item.title)})))||void 0===_videoElements$sort?void 0:_videoElements$sort.map((function(_ref8){var item=_ref8.item,element=_ref8.element;return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:(0,jsx_runtime.jsx)(VideoDownloadLink,{itemTitle:item.title,elementName:element.name,data:element.data,elementId:element.id,extractVideoUrl})},element.id)})))&&void 0!==_videoElements$sort$m?_videoElements$sort$m:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"No videos available to download."})})]})}function DownloadVideosPage(){return(0,jsx_runtime.jsx)(RequireRole.Z,{organizerRole:!0,componentIfDenied:(0,jsx_runtime.jsx)(PageNotFound.default,{}),children:(0,jsx_runtime.jsx)(VideoDownloadProvider,{children:(0,jsx_runtime.jsx)(DashboardPage.Y,{title:"Download videos",children:(0,jsx_runtime.jsx)(AllVideoElements,{})})})})}(0,urql_core.Ps)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query DownloadVideos_GetAllVideos($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        content_Item(where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }) {\n            id\n            conferenceId\n            subconferenceId\n            elements(where: { typeName: { _in: [TEXT, VIDEO_FILE, VIDEO_BROADCAST, VIDEO_PREPUBLISH] } }) {\n                name\n                id\n                data\n                typeName\n                itemId\n            }\n            typeName\n            title\n        }\n    }\n"]))),DownloadVideosPage.displayName="DownloadVideosPage";__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js");var chakra_ui_toast_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+toast@1.5.4_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/toast/dist/chakra-ui-toast.esm.js"),chakra_ui_hooks_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+hooks@1.8.2_react@17.0.2/node_modules/@chakra-ui/hooks/dist/chakra-ui-hooks.esm.js"),useGoogleOAuthRedirectUrl=__webpack_require__("./src/aspects/Google/useGoogleOAuthRedirectUrl.tsx"),QueryWrapper=__webpack_require__("./src/aspects/GQL/QueryWrapper.tsx"),useCurrentRegistrant=__webpack_require__("./src/aspects/Conference/useCurrentRegistrant.tsx");__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.some.js");function YouTubeExportContext_slicedToArray(arr,i){return function YouTubeExportContext_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function YouTubeExportContext_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function YouTubeExportContext_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return YouTubeExportContext_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YouTubeExportContext_arrayLikeToArray(o,minLen)}(arr,i)||function YouTubeExportContext_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YouTubeExportContext_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ConnectYouTubeAccount_templateObject,YouTubeExportContext=(0,react.createContext)({});function YouTubeExportProvider(props){return(0,jsx_runtime.jsx)(YouTubeExportContext.Provider,{value:(registrant=(0,useCurrentRegistrant.ZP)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),googleAccounts=(0,graphql.LnB)({variables:{registrantId:null==registrant?void 0:registrant.id},context}),_useState2=YouTubeExportContext_slicedToArray((0,react.useState)(null),2),selectedGoogleAccountId=_useState2[0],setSelectedGoogleAccountId=_useState2[1],_useState4=YouTubeExportContext_slicedToArray((0,react.useState)(!1),2),finished=_useState4[0],setFinished=_useState4[1],reset=(0,react.useCallback)((function(){setSelectedGoogleAccountId(null),setFinished(!1)}),[]),(0,react.useEffect)((function(){var _googleAccounts$0$dat;!selectedGoogleAccountId||null!==(_googleAccounts$0$dat=googleAccounts[0].data)&&void 0!==_googleAccounts$0$dat&&_googleAccounts$0$dat.registrant_GoogleAccount.some((function(account){return account.id===selectedGoogleAccountId}))||setSelectedGoogleAccountId(null)}),[googleAccounts,selectedGoogleAccountId]),{selectedGoogleAccountId,setSelectedGoogleAccountId,googleAccounts,finished,setFinished,reset}),children:props.children});var registrant,subconferenceId,context,googleAccounts,_useState2,selectedGoogleAccountId,setSelectedGoogleAccountId,_useState4,finished,setFinished,reset}YouTubeExportProvider.displayName="YouTubeExportProvider";try{YouTubeExportProvider.displayName="YouTubeExportProvider",YouTubeExportProvider.__docgenInfo={description:"",displayName:"YouTubeExportProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/YouTube/YouTubeExportContext.tsx#YouTubeExportProvider"]={docgenInfo:YouTubeExportProvider.__docgenInfo,name:"YouTubeExportProvider",path:"src/aspects/Conference/Manage/Export/YouTube/YouTubeExportContext.tsx#YouTubeExportProvider"})}catch(__react_docgen_typescript_loader_error){}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return ConnectYouTubeAccount_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ConnectYouTubeAccount_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ConnectYouTubeAccount_slicedToArray(arr,i){return function ConnectYouTubeAccount_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ConnectYouTubeAccount_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ConnectYouTubeAccount_unsupportedIterableToArray(arr,i)||function ConnectYouTubeAccount_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ConnectYouTubeAccount_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ConnectYouTubeAccount_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ConnectYouTubeAccount_arrayLikeToArray(o,minLen):void 0}}function ConnectYouTubeAccount_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ConnectYouTubeAccount(props){var _googleAccounts$0$dat,_googleAccounts$0$dat2,_googleAccounts$0$dat3,toast=(0,chakra_ui_toast_esm.pm)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,mutation=ConnectYouTubeAccount_slicedToArray((0,graphql.Zq6)(),2)[1],registrant=(0,useCurrentRegistrant.ZP)(),_useContext=(0,react.useContext)(YouTubeExportContext),googleAccounts=_useContext.googleAccounts,selectedGoogleAccountId=_useContext.selectedGoogleAccountId,setSelectedGoogleAccountId=_useContext.setSelectedGoogleAccountId,finished=_useContext.finished,deleteAccount=ConnectYouTubeAccount_slicedToArray((0,graphql.XZO)(),2)[1],_useState2=ConnectYouTubeAccount_slicedToArray((0,react.useState)({}),2),deleting=_useState2[0],setDeleting=_useState2[1],history=(0,react_router.k6)(),setGoogleOAuthRedirectUrl=ConnectYouTubeAccount_slicedToArray((0,useGoogleOAuthRedirectUrl.N)(),2)[1],optionIdSuffix=(0,chakra_ui_hooks_esm.Me)(),optionIds=chakra_ui_hooks_esm.ZS.apply(void 0,[optionIdSuffix].concat(_toConsumableArray(null!==(_googleAccounts$0$dat=null===(_googleAccounts$0$dat2=googleAccounts[0].data)||void 0===_googleAccounts$0$dat2||null===(_googleAccounts$0$dat3=_googleAccounts$0$dat2.registrant_GoogleAccount)||void 0===_googleAccounts$0$dat3?void 0:_googleAccounts$0$dat3.map((function(x){return x.id})))&&void 0!==_googleAccounts$0$dat?_googleAccounts$0$dat:[]))),disconnectAccount=(0,react.useCallback)(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(accountId){var _headers;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setDeleting((function(x){return es.t8m(es.CKt(accountId),!0,x)})),_context.prev=1,_context.next=4,deleteAccount({registrantGoogleAccountId:accountId},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 4:return _context.next=6,googleAccounts[1]();case 6:toast({status:"success",title:"Unlinked YouTube account."}),_context.next=12;break;case 9:_context.prev=9,_context.t0=_context.catch(1),toast({status:"error",title:"Failed to unlink YouTube account. Try again later."});case 12:return _context.prev=12,setDeleting((function(x){return es.t8m(es.CKt(accountId),!1,x)})),_context.finish(12);case 15:case"end":return _context.stop()}}),_callee,null,[[1,9,12,15]])})));return function(_x){return _ref.apply(this,arguments)}}(),[deleteAccount,googleAccounts,subconferenceId,toast]),addAccount=(0,react.useCallback)(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _headers2,_urlResult$data,_urlResult$data2,_urlResult$data2$getG,urlResult;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,mutation({registrantId:registrant.id,scopes:["https://www.googleapis.com/auth/youtube.upload","https://www.googleapis.com/auth/youtube.readonly","https://www.googleapis.com/auth/youtube.force-ssl"]},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}});case 3:if(urlResult=_context2.sent,null!==(_urlResult$data=urlResult.data)&&void 0!==_urlResult$data&&_urlResult$data.getGoogleOAuthUrl){_context2.next=6;break}throw new Error("Could not retrieve Google OAuth URL");case 6:setGoogleOAuthRedirectUrl(history.location.pathname),window.location.href=null===(_urlResult$data2=urlResult.data)||void 0===_urlResult$data2||null===(_urlResult$data2$getG=_urlResult$data2.getGoogleOAuthUrl)||void 0===_urlResult$data2$getG?void 0:_urlResult$data2$getG.url,_context2.next=14;break;case 10:_context2.prev=10,_context2.t0=_context2.catch(0),console.error("Failed to connect to YouTube",_context2.t0),toast({title:"Failed to connect to YouTube",status:"error"});case 14:case"end":return _context2.stop()}}),_callee2,null,[[0,10]])}))),[history.location.pathname,mutation,registrant.id,setGoogleOAuthRedirectUrl,subconferenceId,toast]);return finished?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,Object.assign({},props,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{justifyContent:"space-between",mb:2,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",size:"md",textAlign:"left",mb:2,children:"Choose a connected account"}),(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{display:"block",colorScheme:"PrimaryActionButton",onClick:addAccount,mt:2,ml:"auto",size:"sm",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"plus",iconStyle:"s",mr:2}),"Add a YouTube account"]})]}),(0,jsx_runtime.jsx)(QueryWrapper.Z,{getter:function getter(data){return data.registrant_GoogleAccount},queryResult:googleAccounts[0],children:function children(accounts){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{role:"listbox","aria-activedescendant":selectedGoogleAccountId?selectedGoogleAccountId+"-"+optionIdSuffix:void 0,spacing:2,children:accounts.map((function(account,idx){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{gridColumnGap:2,flex:1,borderRadius:"sm",overflow:"hidden",children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{id:optionIds[idx],"aria-selected":selectedGoogleAccountId===account.id,isActive:selectedGoogleAccountId===account.id,isDisabled:Boolean(selectedGoogleAccountId),colorScheme:"SecondaryActionButton",role:"option",onClick:function onClick(){return setSelectedGoogleAccountId(account.id)},leftIcon:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"youtube",iconStyle:"b"}),textAlign:"left",children:account.googleAccountEmail}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{"aria-label":"disconnect account",style:{marginLeft:"auto"},isDisabled:Boolean(selectedGoogleAccountId),colorScheme:"red",size:"sm",isLoading:!!deleting[account.id],onClick:function onClick(){return disconnectAccount(account.id)},children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"unlink",iconStyle:"s"})})]})},account.id)}))})}}),selectedGoogleAccountId&&(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{display:"block",colorScheme:"SecondaryActionButton",onClick:function onClick(){return setSelectedGoogleAccountId(null)},mt:2,ml:"auto",size:"sm",children:"Cancel"})]}))}(0,urql_core.Ps)(ConnectYouTubeAccount_templateObject||(ConnectYouTubeAccount_templateObject=function ConnectYouTubeAccount_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation ManageExport_GetGoogleOAuthUrl($registrantId: uuid!, $scopes: [String!]!) {\n        getGoogleOAuthUrl(registrantId: $registrantId, scopes: $scopes) {\n            url\n        }\n    }\n\n    query ManageExport_GetRegistrantGoogleAccounts($registrantId: uuid!) {\n        registrant_GoogleAccount(where: { registrantId: { _eq: $registrantId } }) {\n            ...ManageExport_RegistrantGoogleAccount\n        }\n    }\n\n    fragment ManageExport_RegistrantGoogleAccount on registrant_GoogleAccount {\n        id\n        registrantId\n        googleAccountEmail\n        youTubeData\n    }\n\n    mutation ManageExport_DeleteRegistrantGoogleAccount($registrantGoogleAccountId: uuid!) {\n        delete_registrant_GoogleAccount_by_pk(id: $registrantGoogleAccountId) {\n            id\n        }\n    }\n"])));try{ConnectYouTubeAccount.displayName="ConnectYouTubeAccount",ConnectYouTubeAccount.__docgenInfo={description:"",displayName:"ConnectYouTubeAccount",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"As<any>"}},_hover:{defaultValue:null,description:"Styles for CSS selector `&:hover`",name:"_hover",required:!1,type:{name:"CSSObject"}},_active:{defaultValue:null,description:"Styles for CSS Selector `&:active`",name:"_active",required:!1,type:{name:"CSSObject"}},_focus:{defaultValue:null,description:"Styles for CSS selector `&:focus`",name:"_focus",required:!1,type:{name:"CSSObject"}},_highlighted:{defaultValue:null,description:"Styles for the highlighted state.",name:"_highlighted",required:!1,type:{name:"CSSObject"}},_focusWithin:{defaultValue:null,description:"Styles to apply when a child of this element has received focus\n- CSS Selector `&:focus-within`",name:"_focusWithin",required:!1,type:{name:"CSSObject"}},_focusVisible:{defaultValue:null,description:"Styles to apply when this element has received focus via tabbing\n- CSS Selector `&:focus-visible`",name:"_focusVisible",required:!1,type:{name:"CSSObject"}},_disabled:{defaultValue:null,description:"Styles to apply when this element is disabled. The passed styles are applied to these CSS selectors:\n- `&[aria-disabled=true]`\n- `&:disabled`\n- `&[data-disabled]`",name:"_disabled",required:!1,type:{name:"CSSObject"}},_readOnly:{defaultValue:null,description:"Styles for CSS Selector `&:readonly`",name:"_readOnly",required:!1,type:{name:"CSSObject"}},_before:{defaultValue:null,description:'Styles for CSS selector `&::before`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _before={{content:`""` }}/>\n```',name:"_before",required:!1,type:{name:"CSSObject"}},_after:{defaultValue:null,description:'Styles for CSS selector `&::after`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _after={{content:`""` }}/>\n```',name:"_after",required:!1,type:{name:"CSSObject"}},_empty:{defaultValue:null,description:"Styles for CSS selector `&:empty`",name:"_empty",required:!1,type:{name:"CSSObject"}},_expanded:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-expanded` is `true`\n- CSS selector `&[aria-expanded=true]`",name:"_expanded",required:!1,type:{name:"CSSObject"}},_checked:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `true`\n- CSS selector `&[aria-checked=true]`",name:"_checked",required:!1,type:{name:"CSSObject"}},_grabbed:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-grabbed` is `true`\n- CSS selector `&[aria-grabbed=true]`",name:"_grabbed",required:!1,type:{name:"CSSObject"}},_pressed:{defaultValue:null,description:'Styles for CSS Selector `&[aria-pressed=true]`\nTypically used to style the current "pressed" state of toggle buttons',name:"_pressed",required:!1,type:{name:"CSSObject"}},_invalid:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-invalid` is `true`\n- CSS selector `&[aria-invalid=true]`",name:"_invalid",required:!1,type:{name:"CSSObject"}},_valid:{defaultValue:null,description:"Styles for the valid state\n- CSS selector `&[data-valid], &[data-state=valid]`",name:"_valid",required:!1,type:{name:"CSSObject"}},_loading:{defaultValue:null,description:"Styles for CSS Selector `&[aria-busy=true]` or `&[data-loading=true]`.\nUseful for styling loading states",name:"_loading",required:!1,type:{name:"CSSObject"}},_selected:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-selected` is `true`\n\n- CSS selector `&[aria-selected=true]`",name:"_selected",required:!1,type:{name:"CSSObject"}},_hidden:{defaultValue:null,description:"Styles for CSS Selector `[hidden=true]`",name:"_hidden",required:!1,type:{name:"CSSObject"}},_autofill:{defaultValue:null,description:"Styles for CSS Selector `&:-webkit-autofill`",name:"_autofill",required:!1,type:{name:"CSSObject"}},_even:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(even)`",name:"_even",required:!1,type:{name:"CSSObject"}},_odd:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(odd)`",name:"_odd",required:!1,type:{name:"CSSObject"}},_first:{defaultValue:null,description:"Styles for CSS Selector `&:first-of-type`",name:"_first",required:!1,type:{name:"CSSObject"}},_last:{defaultValue:null,description:"Styles for CSS Selector `&:last-of-type`",name:"_last",required:!1,type:{name:"CSSObject"}},_notFirst:{defaultValue:null,description:"Styles for CSS Selector `&:not(:first-of-type)`",name:"_notFirst",required:!1,type:{name:"CSSObject"}},_notLast:{defaultValue:null,description:"Styles for CSS Selector `&:not(:last-of-type)`",name:"_notLast",required:!1,type:{name:"CSSObject"}},_visited:{defaultValue:null,description:"Styles for CSS Selector `&:visited`",name:"_visited",required:!1,type:{name:"CSSObject"}},_activeLink:{defaultValue:null,description:"Used to style the active link in a navigation\nStyles for CSS Selector `&[aria-current=page]`",name:"_activeLink",required:!1,type:{name:"CSSObject"}},_activeStep:{defaultValue:null,description:"Used to style the current step within a process\nStyles for CSS Selector `&[aria-current=step]`",name:"_activeStep",required:!1,type:{name:"CSSObject"}},_indeterminate:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `mixed`\n- CSS selector `&[aria-checked=mixed]`",name:"_indeterminate",required:!1,type:{name:"CSSObject"}},_groupHover:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is hovered",name:"_groupHover",required:!1,type:{name:"CSSObject"}},_peerHover:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is hovered",name:"_peerHover",required:!1,type:{name:"CSSObject"}},_groupFocus:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is focused",name:"_groupFocus",required:!1,type:{name:"CSSObject"}},_peerFocus:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is focused",name:"_peerFocus",required:!1,type:{name:"CSSObject"}},_groupFocusVisible:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has visible focus",name:"_groupFocusVisible",required:!1,type:{name:"CSSObject"}},_peerFocusVisible:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer`or `data-peer` has visible focus",name:"_peerFocusVisible",required:!1,type:{name:"CSSObject"}},_groupActive:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is active",name:"_groupActive",required:!1,type:{name:"CSSObject"}},_peerActive:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is active",name:"_peerActive",required:!1,type:{name:"CSSObject"}},_groupDisabled:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is disabled",name:"_groupDisabled",required:!1,type:{name:"CSSObject"}},_peerDisabled:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is disabled",name:"_peerDisabled",required:!1,type:{name:"CSSObject"}},_groupInvalid:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is invalid",name:"_groupInvalid",required:!1,type:{name:"CSSObject"}},_peerInvalid:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is invalid",name:"_peerInvalid",required:!1,type:{name:"CSSObject"}},_groupChecked:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is checked",name:"_groupChecked",required:!1,type:{name:"CSSObject"}},_peerChecked:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is checked",name:"_peerChecked",required:!1,type:{name:"CSSObject"}},_groupFocusWithin:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has focus within",name:"_groupFocusWithin",required:!1,type:{name:"CSSObject"}},_peerFocusWithin:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has focus within",name:"_peerFocusWithin",required:!1,type:{name:"CSSObject"}},_peerPlaceholderShown:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has placeholder shown",name:"_peerPlaceholderShown",required:!1,type:{name:"CSSObject"}},_placeholder:{defaultValue:null,description:"Styles for CSS Selector `&::placeholder`.",name:"_placeholder",required:!1,type:{name:"CSSObject"}},_placeholderShown:{defaultValue:null,description:"Styles for CSS Selector `&:placeholder-shown`.",name:"_placeholderShown",required:!1,type:{name:"CSSObject"}},_fullScreen:{defaultValue:null,description:"Styles for CSS Selector `&:fullscreen`.",name:"_fullScreen",required:!1,type:{name:"CSSObject"}},_selection:{defaultValue:null,description:"Styles for CSS Selector `&::selection`",name:"_selection",required:!1,type:{name:"CSSObject"}},_rtl:{defaultValue:null,description:'Styles for CSS Selector `[dir=rtl] &`\nIt is applied when a parent element or this element has `dir="rtl"`',name:"_rtl",required:!1,type:{name:"CSSObject"}},_ltr:{defaultValue:null,description:'Styles for CSS Selector `[dir=ltr] &`\nIt is applied when a parent element or this element has `dir="ltr"`',name:"_ltr",required:!1,type:{name:"CSSObject"}},_mediaDark:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-color-scheme: dark)`\nIt is used when the user has requested the system use a light or dark color theme.",name:"_mediaDark",required:!1,type:{name:"CSSObject"}},_mediaReduceMotion:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-reduced-motion: reduce)`\nIt is used when the user has requested the system to reduce the amount of animations.",name:"_mediaReduceMotion",required:!1,type:{name:"CSSObject"}},_dark:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_dark",required:!1,type:{name:"CSSObject"}},_light:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_light",required:!1,type:{name:"CSSObject"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/YouTube/ConnectYouTubeAccount.tsx#ConnectYouTubeAccount"]={docgenInfo:ConnectYouTubeAccount.__docgenInfo,name:"ConnectYouTubeAccount",path:"src/aspects/Conference/Manage/Export/YouTube/ConnectYouTubeAccount.tsx#ConnectYouTubeAccount"})}catch(__react_docgen_typescript_loader_error){}var chakra_ui_alert_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+alert@1.3.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/alert/dist/chakra-ui-alert.esm.js"),chakra_ui_close_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+close-button@1.2.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/close-button/dist/chakra-ui-close-button.esm.js");function Finished(){var conferencePath=(0,AuthParameters.h)().conferencePath,_useContext=(0,react.useContext)(YouTubeExportContext),finished=_useContext.finished,reset=_useContext.reset;return finished?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px",mt:4,children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{boxSize:"40px",mr:0}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{mt:4,mb:2,fontSize:"xl",children:"Your videos are now being exported to YouTube"}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.X,{maxWidth:"sm",children:"This will take a few minutes."}),(0,jsx_runtime.jsx)(LinkButton.Qj,{to:conferencePath+"/manage/export/youtube/uploads",colorScheme:"ConfirmButton",mt:4,size:"lg",children:"View progress"}),(0,jsx_runtime.jsx)(chakra_ui_close_button_esm.P,{position:"absolute",right:"8px",top:"8px",onClick:function onClick(){return reset()}})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}var UploadedPage_templateObject,chakra_ui_icons_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js"),chakra_ui_table_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+table@1.3.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/table/dist/chakra-ui-table.esm.js"),lib=__webpack_require__("../node_modules/.pnpm/react-player@2.9.0_react@17.0.2/node_modules/react-player/lib/index.js"),usePolling=__webpack_require__("./src/aspects/Hooks/usePolling.ts");function UploadedPage_slicedToArray(arr,i){return function UploadedPage_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadedPage_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UploadedPage_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UploadedPage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UploadedPage_arrayLikeToArray(o,minLen)}(arr,i)||function UploadedPage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadedPage_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UploadedPage(){var conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),_useUploadYouTubeVide2=UploadedPage_slicedToArray((0,graphql.C3K)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},requestPolicy:"network-only",context}),2),existingJobsResult=_useUploadYouTubeVide2[0],refetchExistingJobsResult=_useUploadYouTubeVide2[1];(0,usePolling.Z)(refetchExistingJobsResult,2e4);var jobStatus=(0,react.useCallback)((function(jobStatusName){switch(jobStatusName){case graphql.FLV.Completed:return(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Upload completed",children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"check-circle",iconStyle:"s","aria-label":"completed",color:"green.500"})});case graphql.FLV.Expired:case graphql.FLV.Failed:return(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Upload failed",children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"exclamation-circle",iconStyle:"s","aria-label":"error",color:"red.500"})});case graphql.FLV.InProgress:case graphql.FLV.New:return(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{size:"sm","aria-label":"in progress"})}}),[]);return(0,jsx_runtime.jsx)(DashboardPage.Y,{title:"Uploads",children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.gC,{alignItems:"stretch",w:"100%",children:(0,jsx_runtime.jsx)(QueryWrapper.Z,{queryResult:existingJobsResult,getter:function getter(result){return result.job_queues_UploadYouTubeVideoJob.flatMap((function(job){return job.youTubeUploads.length?job.youTubeUploads.map((function(upload){return{job,upload}})):{job,upload:null}}))},children:function children(uploads){return(0,jsx_runtime.jsxs)(chakra_ui_table_esm.iA,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.hr,{children:(0,jsx_runtime.jsxs)(chakra_ui_table_esm.Tr,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Video"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Status"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Privacy"}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Th,{children:"Preview"})]})}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.p3,{children:uploads.map((function(_ref){var _job$element,job=_ref.job,upload=_ref.upload;return(0,jsx_runtime.jsxs)(chakra_ui_table_esm.Tr,{children:[(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:upload?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.rU,{as:"a",isExternal:!0,href:"https://youtube.com/watch?v="+upload.videoId,children:[upload.videoTitle," ",(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ExternalLinkIcon,{mx:"2px"})]}):null===(_job$element=job.element)||void 0===_job$element?void 0:_job$element.name}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:jobStatus(job.jobStatusName)}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:null==upload?void 0:upload.videoPrivacyStatus}),(0,jsx_runtime.jsx)(chakra_ui_table_esm.Td,{children:upload?"private"===(null==upload?void 0:upload.videoPrivacyStatus)?"No preview for private video.":(0,jsx_runtime.jsx)(lib.Z,{url:"https://youtube.com/watch?v="+upload.videoId,width:"300px",height:"auto"}):job.message})]},job.id+"-"+(null==upload?void 0:upload.id))}))})]})}})})})}(0,urql_core.Ps)(UploadedPage_templateObject||(UploadedPage_templateObject=function UploadedPage_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query UploadYouTubeVideos_GetUploadYouTubeVideoJobs(\n        $conferenceId: uuid!\n        $subconferenceCond: uuid_comparison_exp!\n    ) {\n        job_queues_UploadYouTubeVideoJob(\n            where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }\n            order_by: { createdAt: desc }\n            limit: 100\n        ) {\n            ...UploadYouTubeVideos_UploadYouTubeVideoJob\n        }\n    }\n\n    fragment UploadYouTubeVideos_YouTubeUpload on video_YouTubeUpload {\n        id\n        videoId\n        videoPrivacyStatus\n        videoStatus\n        videoTitle\n        conferenceId\n        subconferenceId\n        createdAt\n    }\n\n    fragment UploadYouTubeVideos_UploadYouTubeVideoJob on job_queues_UploadYouTubeVideoJob {\n        id\n        conferenceId\n        subconferenceId\n        createdAt\n        jobStatusName\n        message\n        element {\n            id\n            name\n        }\n        youTubeUploads {\n            ...UploadYouTubeVideos_YouTubeUpload\n        }\n    }\n"]))),UploadedPage.displayName="UploadedPage";__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.keys.js");var chakra_ui_form_control_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+form-control@1.5.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js"),chakra_ui_popover_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+popover@1.11.4_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/popover/dist/chakra-ui-popover.esm.js"),chakra_ui_select_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+select@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/select/dist/chakra-ui-select.esm.js"),chakra_ui_input_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+input@1.4.1_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/input/dist/chakra-ui-input.esm.js"),chakra_ui_textarea_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+textarea@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/textarea/dist/chakra-ui-textarea.esm.js"),typescript_is=__webpack_require__("../node_modules/.pnpm/typescript-is@0.19.0_typescript@4.5.5/node_modules/typescript-is/index.js");function isYouTubeDataBlob(data){return(0,typescript_is.is)(data,(function(object){function _string(object){return"string"!=typeof object?{}:null}function _4(object){return"object"!=typeof object||null===object||Array.isArray(object)?{}:"id"in object?(error=_string(object.id))?error:"title"in object?(error=_string(object.title))?error:"description"in object?(error=_string(object.description))?error:null:{}:{}:{};var error}function _3(object){if("object"!=typeof object||null===object||Array.isArray(object))return{};if(!("id"in object))return{};if(error=_string(object.id))return error;if(!("title"in object))return{};if(error=_string(object.title))return error;if(!("description"in object))return{};if(error=_string(object.description))return error;if(!("playlists"in object))return{};var error=function sa__4_ea_4(object){if(!Array.isArray(object))return{};for(var i=0;i<object.length;i++){var error=_4(object[i]);if(error)return error}return null}(object.playlists);return error||null}return function _0(object){if("object"!=typeof object||null===object||Array.isArray(object))return{};if(!("channels"in object))return{};var error=function sa__3_ea_3(object){if(!Array.isArray(object))return{};for(var i=0;i<object.length;i++){var error=_3(object[i]);if(error)return error}return null}(object.channels);return error||null}(object)}))}var ChooseElementByTagModal_templateObject,ChooseElementModal_templateObject,mustache=__webpack_require__("../node_modules/.pnpm/mustache@4.2.0/node_modules/mustache/mustache.mjs"),index_esm=__webpack_require__("../node_modules/.pnpm/react-hook-form@7.29.0_react@17.0.2/node_modules/react-hook-form/dist/index.esm.mjs"),urql_es=__webpack_require__("../node_modules/.pnpm/urql@2.1.3_graphql@15.7.2+react@17.0.2/node_modules/urql/dist/urql.es.js"),chakra_ui_modal_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+modal@1.10.7_d24435ba52f1f88b08cc54a1f1d4e56f/node_modules/@chakra-ui/modal/dist/chakra-ui-modal.esm.js"),formik_esm=__webpack_require__("../node_modules/.pnpm/formik@2.2.9_react@17.0.2/node_modules/formik/dist/formik.esm.js");function ChooseElementByTagModal_slicedToArray(arr,i){return function ChooseElementByTagModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ChooseElementByTagModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ChooseElementByTagModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ChooseElementByTagModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChooseElementByTagModal_arrayLikeToArray(o,minLen)}(arr,i)||function ChooseElementByTagModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChooseElementByTagModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ChooseElementByTagModal(_ref){var _tagsResult$data2,isOpen=_ref.isOpen,onClose=_ref.onClose,chooseItems=_ref.chooseItems,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),tagsResult=ChooseElementByTagModal_slicedToArray((0,graphql.lRW)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],_useState2=ChooseElementByTagModal_slicedToArray((0,react.useState)(null),2),tagId=_useState2[0],setTagId=_useState2[1],tagOptions=(0,react.useMemo)((function(){var _tagsResult$data;return null===(_tagsResult$data=tagsResult.data)||void 0===_tagsResult$data?void 0:_tagsResult$data.collection_Tag.map((function(tag){return(0,jsx_runtime.jsx)("option",{value:tag.id,children:tag.name},tag.id)}))}),[null===(_tagsResult$data2=tagsResult.data)||void 0===_tagsResult$data2?void 0:_tagsResult$data2.collection_Tag]),_useState4=ChooseElementByTagModal_slicedToArray((0,react.useState)(null),2),searchString=_useState4[0],setSearchString=_useState4[1],elementsResult=ChooseElementByTagModal_slicedToArray((0,graphql.Eyz)({variables:{tagId,name:null!=searchString?searchString:"%%"},context}),1)[0],elements=(0,react.useMemo)((function(){var _elementsResult$data;return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{mt:4,children:[elementsResult.fetching?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):elementsResult.error?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Could not retrieve list of files."}):elementsResult.data&&0===elementsResult.data.content_Element.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"No matching files."}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{spacing:2,maxH:"40vh",overflowY:"auto",children:null===(_elementsResult$data=elementsResult.data)||void 0===_elementsResult$data?void 0:_elementsResult$data.content_Element.map((function(element){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"video",iconStyle:"s",mr:2,fontSize:"sm"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{alignItems:"flex-start",spacing:0,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"sm",fontWeight:"bold",children:element.name}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"sm",mt:0,children:element.item.title})]})]})},element.id)}))})]})}),[elementsResult]);return(0,jsx_runtime.jsx)(chakra_ui_modal_esm.u_,{isOpen,onClose,size:"lg",children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{tagId:null,searchString:null},onSubmit:function onSubmit(_values,actions){elementsResult.data?(chooseItems(elementsResult.data.content_Element.map((function(item){return item.id}))),actions.resetForm(),onClose()):(actions.setFieldError("elementIds","Must pick at least one video"),actions.setSubmitting(!1))},children:function children(_ref2){var isSubmitting=_ref2.isSubmitting,isValid=_ref2.isValid;return(0,jsx_runtime.jsxs)(formik_esm.l0,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Choose a tag"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.fe,{children:[(0,jsx_runtime.jsx)(formik_esm.gN,{name:"tagId",children:function children(_ref3){var field=_ref3.field,form=_ref3.form;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.tagId&&!!form.touched.tagId,isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"tagId",mt:2,children:"Content Item"}),(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,Object.assign({},field,{id:"tagId",placeholder:"Choose tag",mt:2,onChange:function onChange(event){return setTagId(event.target.value)},children:tagOptions})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.tagId})]})}}),(0,jsx_runtime.jsx)(formik_esm.gN,{name:"searchString",children:function children(_ref4){var field=_ref4.field,form=_ref4.form;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.searchString&&!!form.touched.searchString,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"searchString",mt:2,children:"File name"}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Use a search string to narrow down the files you want. You can use % as a wildcard."}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},field,{id:"searchString",placeholder:"%file name%",mt:2,onChange:function onChange(event){return setSearchString(event.target.value)}})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.searchString}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.elementIds})]})}}),elements]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{type:"submit",isLoading:isSubmitting,isDisabled:!isValid||elementsResult.fetching||elementsResult.data&&0===elementsResult.data.content_Element.length,mt:4,colorScheme:"purple",children:"Add videos"})})]})]})}})})}(0,urql_core.Ps)(ChooseElementByTagModal_templateObject||(ChooseElementByTagModal_templateObject=function ChooseElementByTagModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query ChooseElementByTagModal_GetTags($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        collection_Tag(\n            where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }\n            order_by: { name: asc }\n        ) {\n            id\n            name\n            conferenceId\n            subconferenceId\n        }\n    }\n\n    query ChooseElementByTagModal_GetVideoElements($tagId: uuid!, $name: String!) {\n        content_Element(\n            where: {\n                typeName: { _in: [VIDEO_FILE, VIDEO_BROADCAST, VIDEO_PREPUBLISH] }\n                item: { itemTags: { tag: { id: { _eq: $tagId } } } }\n                name: { _ilike: $name }\n            }\n            order_by: [{ item: { title: asc } }, { name: asc }]\n        ) {\n            id\n            name\n            typeName\n            itemId\n            item {\n                id\n                title\n            }\n        }\n    }\n"]))),ChooseElementByTagModal.displayName="ChooseElementByTagModal";try{ChooseElementByTagModal.displayName="ChooseElementByTagModal",ChooseElementByTagModal.__docgenInfo={description:"",displayName:"ChooseElementByTagModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},chooseItems:{defaultValue:null,description:"",name:"chooseItems",required:!0,type:{name:"(elementIds: string[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/YouTube/ChooseElementByTagModal.tsx#ChooseElementByTagModal"]={docgenInfo:ChooseElementByTagModal.__docgenInfo,name:"ChooseElementByTagModal",path:"src/aspects/Conference/Manage/Export/YouTube/ChooseElementByTagModal.tsx#ChooseElementByTagModal"})}catch(__react_docgen_typescript_loader_error){}function ChooseElementModal_slicedToArray(arr,i){return function ChooseElementModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ChooseElementModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function ChooseElementModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ChooseElementModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ChooseElementModal_arrayLikeToArray(o,minLen)}(arr,i)||function ChooseElementModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ChooseElementModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ChooseElementModal(_ref){var _itemsResult$data2,_elementsResult$data2,isOpen=_ref.isOpen,onClose=_ref.onClose,chooseItem=_ref.chooseItem,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),itemsResult=ChooseElementModal_slicedToArray((0,graphql.Vki)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],_useState2=ChooseElementModal_slicedToArray((0,react.useState)(null),2),itemId=_useState2[0],setItemId=_useState2[1],itemOptions=(0,react.useMemo)((function(){var _itemsResult$data;return null===(_itemsResult$data=itemsResult.data)||void 0===_itemsResult$data?void 0:_itemsResult$data.content_Item.map((function(item){return(0,jsx_runtime.jsx)("option",{value:item.id,children:item.title},item.id)}))}),[null===(_itemsResult$data2=itemsResult.data)||void 0===_itemsResult$data2?void 0:_itemsResult$data2.content_Item]),elementsResult=ChooseElementModal_slicedToArray((0,graphql.e4B)({variables:{itemId},context}),1)[0],elementOptions=(0,react.useMemo)((function(){var _elementsResult$data;return null===(_elementsResult$data=elementsResult.data)||void 0===_elementsResult$data?void 0:_elementsResult$data.content_Element.map((function(element){return(0,jsx_runtime.jsx)("option",{value:element.id,children:element.name},element.id)}))}),[null===(_elementsResult$data2=elementsResult.data)||void 0===_elementsResult$data2?void 0:_elementsResult$data2.content_Element]);return(0,jsx_runtime.jsx)(chakra_ui_modal_esm.u_,{isOpen,onClose,children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{elementId:null,registrantGoogleAccountId:null},onSubmit:function onSubmit(values,actions){values.elementId?(chooseItem(values.elementId),actions.resetForm(),onClose()):actions.setFieldError("elementId","Must pick a video")},children:function children(_ref2){var isSubmitting=_ref2.isSubmitting;return(0,jsx_runtime.jsxs)(formik_esm.l0,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Choose a video"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsx)(formik_esm.gN,{name:"elementId",children:function children(_ref3){var field=_ref3.field,form=_ref3.form;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!!form.errors.elementId&&!!form.touched.elementId,isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"elementId",mt:2,children:"Content Item"}),(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,{placeholder:"Choose item",onChange:function onChange(event){return setItemId(event.target.value)},children:itemOptions}),(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,Object.assign({},field,{id:"elementId",placeholder:"Choose file",mt:2,children:elementOptions})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.elementId})]})}})}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{type:"submit",isLoading:isSubmitting,mt:4,colorScheme:"purple",children:"Choose video"})})]})]})}})})}(0,urql_core.Ps)(ChooseElementModal_templateObject||(ChooseElementModal_templateObject=function ChooseElementModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query ChooseElementModal_GetItems($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        content_Item(\n            where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }\n            order_by: { title: asc }\n        ) {\n            id\n            title\n            conferenceId\n            subconferenceId\n        }\n    }\n\n    query ChooseElementModal_GetVideoElements($itemId: uuid) {\n        content_Element(\n            where: { itemId: { _eq: $itemId }, typeName: { _in: [VIDEO_FILE, VIDEO_BROADCAST, VIDEO_PREPUBLISH] } }\n            order_by: { name: asc }\n        ) {\n            id\n            name\n            typeName\n            itemId\n        }\n    }\n"]))),ChooseElementModal.displayName="ChooseElementModal";try{ChooseElementModal.displayName="ChooseElementModal",ChooseElementModal.__docgenInfo={description:"",displayName:"ChooseElementModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},chooseItem:{defaultValue:null,description:"",name:"chooseItem",required:!0,type:{name:"(elementId: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/YouTube/ChooseElementModal.tsx#ChooseElementModal"]={docgenInfo:ChooseElementModal.__docgenInfo,name:"ChooseElementModal",path:"src/aspects/Conference/Manage/Export/YouTube/ChooseElementModal.tsx#ChooseElementModal"})}catch(__react_docgen_typescript_loader_error){}var UploadYouTubeVideos_templateObject,react_async_hook_esm=__webpack_require__("../node_modules/.pnpm/react-async-hook@4.0.0_react@17.0.2/node_modules/react-async-hook/dist/react-async-hook.esm.js");function MetadataPreview_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function MetadataPreview_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){MetadataPreview_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){MetadataPreview_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function MetadataPreview(_ref){var compileTemplate=_ref.compileTemplate,elementId=_ref.elementId,titleTemplate=_ref.titleTemplate,descriptionTemplate=_ref.descriptionTemplate,_useAsync=(0,react_async_hook_esm.r5)(MetadataPreview_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _result$elementId$tit,_result$elementId,_result$elementId$des,_result$elementId2,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,compileTemplate([elementId],null!=titleTemplate?titleTemplate:"No title template found.",null!=descriptionTemplate?descriptionTemplate:"No description template found.");case 2:return result=_context.sent,_context.abrupt("return",{title:null!==(_result$elementId$tit=null===(_result$elementId=result[elementId])||void 0===_result$elementId?void 0:_result$elementId.title)&&void 0!==_result$elementId$tit?_result$elementId$tit:"Title could not be previewed",description:null!==(_result$elementId$des=null===(_result$elementId2=result[elementId])||void 0===_result$elementId2?void 0:_result$elementId2.description)&&void 0!==_result$elementId$des?_result$elementId$des:"Description could not be previewed"});case 4:case"end":return _context.stop()}}),_callee)}))),[elementId]),result=_useAsync.result,loading=_useAsync.loading,error=_useAsync.error;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.QH,{}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.us,{}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.Yt,{children:"Preview"}),(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.b,{children:[loading?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):void 0,error?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["An error occurred while loading the preview. (",error.name,": ",error.message,")"]}):void 0,result?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",size:"sm",textAlign:"left",children:result.title}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{whiteSpace:"pre-wrap",children:result.description})]}):void 0]})]})}try{MetadataPreview.displayName="MetadataPreview",MetadataPreview.__docgenInfo={description:"",displayName:"MetadataPreview",props:{compileTemplate:{defaultValue:null,description:"",name:"compileTemplate",required:!0,type:{name:"(elementIds: string[], titleTemplateString: string, descriptionTemplateString: string) => Promise<{ [elementId: string]: { title: string; description: string; }; }>"}},elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},titleTemplate:{defaultValue:null,description:"",name:"titleTemplate",required:!0,type:{name:"string"}},descriptionTemplate:{defaultValue:null,description:"",name:"descriptionTemplate",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Export/YouTube/MetadataPreview.tsx#MetadataPreview"]={docgenInfo:MetadataPreview.__docgenInfo,name:"MetadataPreview",path:"src/aspects/Conference/Manage/Export/YouTube/MetadataPreview.tsx#MetadataPreview"})}catch(__react_docgen_typescript_loader_error){}function TemplateInstructions(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{mb:2,children:["Titles and descriptions for uploaded YouTube videos are defined using"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{href:"https://mustache.github.io/",children:"Mustache"})," templates. The following fields are available:"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.aV,{fontSize:"sm",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"elementName"}),": name of the element (i.e. the name given to the video itself)"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"itemTitle"}),": title of the item this video element belongs to"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"itemShortTitle"}),": short title of the item this video element belongs to"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"abstract"}),": the abstract text for the item"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"paperUrls"}),": list of URLs to papers"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"paperLinks"}),": list of links to papers. Properties are ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"url"}),", ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"text"}),"."]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"authors"}),": list of authors. Sorted in priority order. Properties are ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"name"}),","," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"affiliation"}),"."]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"presenters"}),": list of presenters. Sorted in priority order. Properties are"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"name"}),", ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"affiliation"}),"."]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"youTubeUploads"}),": list of previously uploaded YouTube videos for this content item. Properties are ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"url"}),", ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"title"}),"."]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"elementId"}),": unique ID of the element"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{children:"itemId"}),": unique ID of the item that contains this file"]})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{mt:2,children:"Example:"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{display:"block",whiteSpace:"pre",children:"{{{abstract}}}\n{{#youTubeUploads}}\n* {{{title}}}: {{{url}}}\n{{/youTubeUploads}}"})]})}function UploadYouTubeVideos_toConsumableArray(arr){return function UploadYouTubeVideos_arrayWithoutHoles(arr){if(Array.isArray(arr))return UploadYouTubeVideos_arrayLikeToArray(arr)}(arr)||function UploadYouTubeVideos_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||UploadYouTubeVideos_unsupportedIterableToArray(arr)||function UploadYouTubeVideos_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadYouTubeVideos_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadYouTubeVideos_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadYouTubeVideos_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadYouTubeVideos_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function UploadYouTubeVideos_slicedToArray(arr,i){return function UploadYouTubeVideos_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadYouTubeVideos_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||UploadYouTubeVideos_unsupportedIterableToArray(arr,i)||function UploadYouTubeVideos_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadYouTubeVideos_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return UploadYouTubeVideos_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UploadYouTubeVideos_arrayLikeToArray(o,minLen):void 0}}function UploadYouTubeVideos_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function VideoIcon(){return(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"video",iconStyle:"s"})}function UploadYouTubeVideos(){var _errors$videoPrivacyS,_errors$titleTemplate,_errors$descriptionTe,_errors$channelId,_errors$playlistId,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,toast=(0,chakra_ui_toast_esm.pm)(),registrant=(0,useCurrentRegistrant.ZP)(),_useContext=(0,react.useContext)(YouTubeExportContext),selectedGoogleAccountId=_useContext.selectedGoogleAccountId,googleAccounts=_useContext.googleAccounts,finished=_useContext.finished,setFinished=_useContext.setFinished,refreshYouTubeData=UploadYouTubeVideos_slicedToArray((0,graphql.aKD)(),2)[1];(0,react.useEffect)((function(){function _fn(){return(_fn=UploadYouTubeVideos_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers,_result$data,_result$data$refreshY,result,_result$data$refreshY2,_result$data2,_result$data2$refresh;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!selectedGoogleAccountId){_context.next=8;break}return _context.next=3,refreshYouTubeData({registrantId:registrant.id,registrantGoogleAccountId:selectedGoogleAccountId},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 3:if(result=_context.sent,null!==(_result$data=result.data)&&void 0!==_result$data&&null!==(_result$data$refreshY=_result$data.refreshYouTubeData)&&void 0!==_result$data$refreshY&&_result$data$refreshY.success){_context.next=6;break}throw new Error(null!==(_result$data$refreshY2=null===(_result$data2=result.data)||void 0===_result$data2||null===(_result$data2$refresh=_result$data2.refreshYouTubeData)||void 0===_result$data2$refresh?void 0:_result$data2$refresh.message)&&void 0!==_result$data$refreshY2?_result$data$refreshY2:"Unknown reason");case 6:return _context.next=8,googleAccounts[1]();case 8:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}!function fn(){return _fn.apply(this,arguments)}()}),[googleAccounts,refreshYouTubeData,registrant.id,selectedGoogleAccountId,subconferenceId]);var _useRestorableState2=UploadYouTubeVideos_slicedToArray((0,useRestorableState.aX)("clowdr-youTubeTitleTemplate","{{{itemTitle}}} ({{{fileName}}})",(function(x){return x}),(function(x){return x})),2),youTubeTitleTemplate=_useRestorableState2[0],setYouTubeTitleTemplate=_useRestorableState2[1],_useRestorableState4=UploadYouTubeVideos_slicedToArray((0,useRestorableState.aX)("clowdr-youTubeDescriptionTemplate-v2","{{#abstract}}{{{abstract}}}\n\n{{/abstract}}\n{{#authors.length}}\n{{#authors}}{{{name}}}{{#affiliation}} ({{{affiliation}}}){{/affiliation}}, {{/authors}}\n\n{{/authors.length}}\n{{#paperLinks.length}}\n{{#paperLinks}}{{#url}}\n* {{{text}}}: {{{url}}}\n{{/url}}{{/paperLinks}}\n\n{{/paperLinks.length}}\n{{#paperUrls.length}}\n{{#paperUrls}}{{#.}}* {{{.}}}\n{{/.}}{{/paperUrls}}\n\n{{/paperUrls.length}}\n",(function(x){return x}),(function(x){return x})),2),youTubeDescriptionTemplate=_useRestorableState4[0],setYouTubeDescriptionTemplate=_useRestorableState4[1],_useForm=(0,index_esm.cI)({defaultValues:{elementIds:[],titleTemplate:youTubeTitleTemplate,descriptionTemplate:youTubeDescriptionTemplate,channelId:"",playlistId:"",videoPrivacyStatus:"unlisted",titleCorrections:[],descriptionCorrections:[]},mode:"all"}),_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,touchedFields=_useForm$formState.touchedFields,isSubmitting=_useForm$formState.isSubmitting,isValid=_useForm$formState.isValid,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,trigger=_useForm.trigger,register=_useForm.register,reset=_useForm.reset,watch=_useForm.watch,control=_useForm.control,titleCorrectionsFields=(0,index_esm.Dq)({control,name:"titleCorrections"}),descriptionCorrectionsFields=(0,index_esm.Dq)({control,name:"descriptionCorrections"}),elementIds=watch("elementIds"),channelId=watch("channelId"),titleTemplate=watch("titleTemplate"),descriptionTemplate=watch("descriptionTemplate");(0,react.useEffect)((function(){return setYouTubeTitleTemplate(titleTemplate)}),[setYouTubeTitleTemplate,titleTemplate]),(0,react.useEffect)((function(){return setYouTubeDescriptionTemplate(descriptionTemplate)}),[setYouTubeDescriptionTemplate,descriptionTemplate]);var channelOptions=(0,react.useMemo)((function(){var _googleAccounts$0$dat,_youTubeData$channels,registrantGoogleAccount=null===(_googleAccounts$0$dat=googleAccounts[0].data)||void 0===_googleAccounts$0$dat?void 0:_googleAccounts$0$dat.registrant_GoogleAccount.find((function(a){return a.id===selectedGoogleAccountId}));return isYouTubeDataBlob(null==registrantGoogleAccount?void 0:registrantGoogleAccount.youTubeData)&&null!==(_youTubeData$channels=(null==registrantGoogleAccount?void 0:registrantGoogleAccount.youTubeData).channels.map((function(channel){return(0,jsx_runtime.jsx)("option",{value:channel.id,children:channel.title},channel.id)})))&&void 0!==_youTubeData$channels?_youTubeData$channels:[]}),[selectedGoogleAccountId,googleAccounts]),playlistOptions=(0,react.useMemo)((function(){var _googleAccounts$0$dat2,_youTubeData$channels2,_youTubeData$channels3,registrantGoogleAccount=null===(_googleAccounts$0$dat2=googleAccounts[0].data)||void 0===_googleAccounts$0$dat2?void 0:_googleAccounts$0$dat2.registrant_GoogleAccount.find((function(a){return a.id===selectedGoogleAccountId}));return isYouTubeDataBlob(null==registrantGoogleAccount?void 0:registrantGoogleAccount.youTubeData)&&null!==(_youTubeData$channels2=null===(_youTubeData$channels3=(null==registrantGoogleAccount?void 0:registrantGoogleAccount.youTubeData).channels.find((function(c){return c.id===channelId})))||void 0===_youTubeData$channels3?void 0:_youTubeData$channels3.playlists.map((function(playlist){return(0,jsx_runtime.jsx)("option",{value:playlist.id,children:playlist.title},playlist.id)})))&&void 0!==_youTubeData$channels2?_youTubeData$channels2:[]}),[selectedGoogleAccountId,channelId,googleAccounts]),createJobs=UploadYouTubeVideos_slicedToArray((0,graphql.Sbt)(),2)[1],chooseVideoDisclosure=(0,chakra_ui_hooks_esm.qY)(),chooseByTagDisclosure=(0,chakra_ui_hooks_esm.qY)(),context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),data=UploadYouTubeVideos_slicedToArray((0,graphql.gAD)({variables:{elementIds},context}),1)[0].data,elements=(0,react.useMemo)((function(){var _data$content_Element,pairs=null!==(_data$content_Element=null==data?void 0:data.content_Element.map((function(element){return[element.id,{name:element.name,itemTitle:element.item.title}]})))&&void 0!==_data$content_Element?_data$content_Element:[];return es.Pen(pairs)}),[data]),client=(0,urql_es.m8)(),compileTemplates=(0,react.useCallback)(function(){var _ref=UploadYouTubeVideos_asyncToGenerator(regeneratorRuntime.mark((function _callee2(elementIds,titleTemplateString,descriptionTemplateString){var _headers2,result,pairs;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,client.query(graphql.esN,{elementIds},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}}).toPromise();case 2:return result=_context2.sent,pairs=elementIds.map((function(elementId){if(!result||!result.data)throw console.error("Could not retrieve data for content item templates",result.error),new Error("Could not retrieve data for content item templates");var element=result.data.content_Element.find((function(x){return x.id===elementId}));if(!element)return[elementId,{title:titleTemplateString,description:descriptionTemplateString}];var elementName=element.name,itemTitle=element.item.title,itemShortTitle=element.item.shortTitle,abstractElement=element.item.abstractElements.length?element.item.abstractElements[0]:void 0,abstractElementData=(0,content.Cp)(null==abstractElement?void 0:abstractElement.data)?null==abstractElement?void 0:abstractElement.data:void 0,abstractElementDataLatest=abstractElementData?es.Z$Q(abstractElementData):void 0,_abstract=(null==abstractElementDataLatest?void 0:abstractElementDataLatest.data.baseType)===content.bN.Text?abstractElementDataLatest.data.text:"",paperUrls=es.xHg(element.item.paperUrlElements.map((function(item){if(!(0,content.Cp)(item.data))return[];var dataBlob=item.data,latest=es.Z$Q(dataBlob);return latest&&latest.data.baseType===content.bN.URL?[latest.data.url]:[]}))),paperLinks=es.xHg(element.item.paperLinkElements.map((function(item){if(!(0,content.Cp)(item.data))return[];var dataBlob=item.data,latest=es.Z$Q(dataBlob);return latest&&latest.data.baseType===content.bN.Link?[{url:latest.data.url,text:latest.data.text}]:[]}))),youTubeUploads=es.xHg(element.item.elements.map((function(item){return item.youTubeUploads.map((function(upload){return{title:upload.videoTitle,url:"https://www.youtube.com/watch?v="+upload.videoId}}))}))),authors=element.item.authors.map((function(author){var _author$person$affili;return{name:author.person.name,affiliation:null!==(_author$person$affili=author.person.affiliation)&&void 0!==_author$person$affili?_author$person$affili:""}})),presenters=element.item.presenters.map((function(presenter){var _presenter$person$aff;return{name:presenter.person.name,affiliation:null!==(_presenter$person$aff=presenter.person.affiliation)&&void 0!==_presenter$person$aff?_presenter$person$aff:""}})),view={fileId:elementId,elementId,fileName:elementName,elementName,itemId:element.item.id,itemTitle,abstract:_abstract,itemShortTitle,paperUrls,paperLinks,youTubeUploads,authors,presenters};return[elementId,{title:mustache.Z.render(titleTemplateString,view),description:mustache.Z.render(descriptionTemplateString,view)}]})),_context2.abrupt("return",es.Pen(pairs));case 5:case"end":return _context2.stop()}}),_callee2)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),[client,subconferenceId]),getDescriptionError=(0,react.useCallback)((function(description){var length=(new TextEncoder).encode(description).length,invalid=description.includes("<")||description.includes(">");return[].concat(UploadYouTubeVideos_toConsumableArray(length>4950?["Description is too long."]:[]),UploadYouTubeVideos_toConsumableArray(invalid?["Description cannot contain '<' or '>'."]:[])).join(" ")}),[]),onSubmit=(0,react.useCallback)(function(){var _ref2=UploadYouTubeVideos_asyncToGenerator(regeneratorRuntime.mark((function _callee3(data){var _headers3,details,updatedPairs,invalidTitles,invalidDescriptions;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,trigger(void 0),_context3.next=4,compileTemplates(data.elementIds,data.titleTemplate,data.descriptionTemplate);case 4:if(details=_context3.sent,console.log(data),updatedPairs=es.IDH((function(x,key){var _data$titleCorrection,_data$titleCorrection2,_data$descriptionCorr,_data$descriptionCorr2;return{title:null!==(_data$titleCorrection=null===(_data$titleCorrection2=data.titleCorrections.find((function(x){return x.id===key})))||void 0===_data$titleCorrection2?void 0:_data$titleCorrection2.value)&&void 0!==_data$titleCorrection?_data$titleCorrection:x.title,description:null!==(_data$descriptionCorr=null===(_data$descriptionCorr2=data.descriptionCorrections.find((function(x){return x.id===key})))||void 0===_data$descriptionCorr2?void 0:_data$descriptionCorr2.value)&&void 0!==_data$descriptionCorr?_data$descriptionCorr:x.description}}),details),invalidTitles=es.hXT((function(_ref3){return UploadYouTubeVideos_slicedToArray(_ref3,2)[1].title.length>100}),es.Zpf(updatedPairs)),console.log(invalidTitles),titleCorrectionsFields.replace(invalidTitles.map((function(_ref5){var _data$titleCorrection3,_ref6=UploadYouTubeVideos_slicedToArray(_ref5,2),elementId=_ref6[0],values=_ref6[1];return null!==(_data$titleCorrection3=data.titleCorrections.find((function(x){return x.id===elementId})))&&void 0!==_data$titleCorrection3?_data$titleCorrection3:{id:elementId,value:values.title}}))),invalidTitles.forEach((function(_ref7,idx){var elementId=UploadYouTubeVideos_slicedToArray(_ref7,1)[0];return setValue("titleCorrections."+idx+".id",elementId)})),invalidDescriptions=es.hXT((function(_ref9){var x=UploadYouTubeVideos_slicedToArray(_ref9,2)[1];return Boolean(getDescriptionError(x.description))}),es.Zpf(updatedPairs)),console.log(invalidDescriptions),descriptionCorrectionsFields.replace(invalidDescriptions.map((function(_ref11){var _data$descriptionCorr3,_ref12=UploadYouTubeVideos_slicedToArray(_ref11,2),elementId=_ref12[0],values=_ref12[1];return null!==(_data$descriptionCorr3=data.descriptionCorrections.find((function(x){return x.id===elementId})))&&void 0!==_data$descriptionCorr3?_data$descriptionCorr3:{id:elementId,value:values.description}}))),invalidDescriptions.forEach((function(_ref13,idx){var elementId=UploadYouTubeVideos_slicedToArray(_ref13,1)[0];return setValue("descriptionCorrections."+idx+".id",elementId)})),!Object.keys(invalidTitles).length&&!Object.keys(invalidDescriptions).length){_context3.next=19;break}return toast({status:"info",title:"You need to make some corrections before starting the upload"}),trigger(void 0,{shouldFocus:!0}),_context3.abrupt("return");case 19:return _context3.next=21,createJobs({objects:data.elementIds.map((function(id){var _updatedPairs$id$titl,_updatedPairs$id,_updatedPairs$id$desc,_updatedPairs$id2;return{elementId:id,registrantGoogleAccountId:selectedGoogleAccountId,conferenceId:conference.id,videoTitle:null!==(_updatedPairs$id$titl=null===(_updatedPairs$id=updatedPairs[id])||void 0===_updatedPairs$id?void 0:_updatedPairs$id.title)&&void 0!==_updatedPairs$id$titl?_updatedPairs$id$titl:id,videoDescription:null!==(_updatedPairs$id$desc=null===(_updatedPairs$id2=updatedPairs[id])||void 0===_updatedPairs$id2?void 0:_updatedPairs$id2.description)&&void 0!==_updatedPairs$id$desc?_updatedPairs$id$desc:"",videoPrivacyStatus:data.videoPrivacyStatus,playlistId:data.playlistId}}))},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)}});case 21:toast({status:"success",title:"Starting upload to YouTube"}),reset(),setValue("titleTemplate",youTubeTitleTemplate),setValue("descriptionTemplate",youTubeDescriptionTemplate),setFinished(!0),_context3.next=32;break;case 28:_context3.prev=28,_context3.t0=_context3.catch(0),console.error("Error while creating YouTube upload jobs",_context3.t0),toast({status:"error",title:"Failed to create YouTube upload job",description:_context3.t0.message});case 32:case"end":return _context3.stop()}}),_callee3,null,[[0,28]])})));return function(_x4){return _ref2.apply(this,arguments)}}(),[compileTemplates,conference.id,createJobs,descriptionCorrectionsFields,getDescriptionError,reset,selectedGoogleAccountId,setFinished,setValue,subconferenceId,titleCorrectionsFields,toast,trigger,youTubeDescriptionTemplate,youTubeTitleTemplate]);return!finished&&selectedGoogleAccountId?(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit(onSubmit),children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",textAlign:"left",my:4,children:"Choose videos to upload"}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(errors.elementIds)&&Boolean(touchedFields.elementIds),isRequired:!0,children:[(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{"aria-label":"add a single video",size:"sm",onClick:function onClick(){return chooseVideoDisclosure.onOpen()},children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"plus-square",iconStyle:"s",mr:2}),"Add a video"]}),(0,jsx_runtime.jsx)(ChooseElementModal,{chooseItem:function chooseItem(elementId){return setValue("elementIds",es.G0j(elementIds,[elementId]))},isOpen:chooseVideoDisclosure.isOpen,onClose:chooseVideoDisclosure.onClose}),(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{"aria-label":"add a videos by tag",size:"sm",ml:4,onClick:function onClick(){return chooseByTagDisclosure.onOpen()},children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"plus-square",iconStyle:"s",mr:2}),"Add videos by tag"]}),(0,jsx_runtime.jsx)(ChooseElementByTagModal,{chooseItems:function chooseItems(newElementIds){return setValue("elementIds",es.G0j(elementIds,newElementIds))},isOpen:chooseByTagDisclosure.isOpen,onClose:chooseByTagDisclosure.onClose}),(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{"aria-label":"clear all videos",size:"sm",ml:4,onClick:function onClick(){return setValue("elementIds",[])},isDisabled:0===elementIds.length,children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"trash-alt",iconStyle:"r",mr:2}),"Clear all"]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.aV,{mt:4,spacing:2,children:[elementIds.map((function(id){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.DE,{as:VideoIcon}),elements[id]?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{pr:4,children:[elements[id].name," (",elements[id].itemTitle,")"]}):(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}),(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{isLazy:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs","aria-label":"preview title and description",title:"Preview title and description",colorScheme:"pink",style:{marginLeft:"auto"},children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"file-alt",iconStyle:"r",fontSize:"xs"})})}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.yk,{children:(0,jsx_runtime.jsx)(MetadataPreview,{elementId:id,compileTemplate:compileTemplates,titleTemplate:youTubeTitleTemplate,descriptionTemplate:youTubeDescriptionTemplate})})]}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs","aria-label":"remove video",colorScheme:"red",style:{marginLeft:"5px"},onClick:function onClick(){setValue("elementIds",es.zud([id],elementIds))},children:(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"trash-alt",iconStyle:"r",fontSize:"xs"})})]})},id)})),0===elementIds.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontStyle:"italic",children:"No videos selected."}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontStyle:"italic",children:[elementIds.length," video",elementIds.length>1?"s":""," selected"]})]})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",textAlign:"left",my:4,children:"Set video privacy"}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(errors.videoPrivacyStatus)&&Boolean(touchedFields.videoPrivacyStatus),isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"videoPrivacyStatus",mt:2,children:"Video privacy"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,Object.assign({},register("videoPrivacyStatus"),{id:"videoPrivacyStatus",mt:2,children:[(0,jsx_runtime.jsx)("option",{value:"private",children:"Private"}),(0,jsx_runtime.jsx)("option",{value:"public",children:"Public"}),(0,jsx_runtime.jsx)("option",{value:"unlisted",children:"Unlisted"})]})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:null===(_errors$videoPrivacyS=errors.videoPrivacyStatus)||void 0===_errors$videoPrivacyS?void 0:_errors$videoPrivacyS.message})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",textAlign:"left",my:4,children:"Set video titles and descriptions"}),(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{children:[(0,jsx_runtime.jsx)(FAIcon.Z,{icon:"question-circle",iconStyle:"s",mr:2}),"Help"]})}),(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.yk,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.QH,{}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.us,{}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.Yt,{children:"Title and description templates"}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.b,{children:(0,jsx_runtime.jsx)(TemplateInstructions,{})})]})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(errors.titleTemplate)&&Boolean(touchedFields.titleTemplate),isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{mt:2,children:"Video title template"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},register("titleTemplate"),{placeholder:"{{fileName}}",mt:2})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:null===(_errors$titleTemplate=errors.titleTemplate)||void 0===_errors$titleTemplate?void 0:_errors$titleTemplate.message})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(errors.descriptionTemplate)&&Boolean(touchedFields.descriptionTemplate),isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{mt:2,children:"Video description template"}),(0,jsx_runtime.jsx)(chakra_ui_textarea_esm.g,Object.assign({},register("descriptionTemplate"),{placeholder:"{{abstract}}",mt:2})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:null===(_errors$descriptionTe=errors.descriptionTemplate)||void 0===_errors$descriptionTe?void 0:_errors$descriptionTe.message})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",textAlign:"left",my:4,children:"Choose upload location"}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(errors.channelId)&&Boolean(touchedFields.channelId),isRequired:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{mt:2,children:"Channel"}),(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,Object.assign({},register("channelId"),{placeholder:"Choose channel",mt:2,isDisabled:!selectedGoogleAccountId,children:channelOptions})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:null===(_errors$channelId=errors.channelId)||void 0===_errors$channelId?void 0:_errors$channelId.message})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(errors.playlistId)&&Boolean(touchedFields.playlistId),children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{htmlFor:"playlistId",mt:2,children:"Playlist"}),(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,Object.assign({},register("playlistId"),{id:"playlistId",placeholder:"Choose playlist",isDisabled:!selectedGoogleAccountId,mt:2,children:playlistOptions})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:null===(_errors$playlistId=errors.playlistId)||void 0===_errors$playlistId?void 0:_errors$playlistId.message})]}),Boolean(titleCorrectionsFields.fields.length)&&(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",textAlign:"left",my:4,children:"Corrected video titles"}),titleCorrectionsFields.fields.map((function(field,idx){var _errors$titleCorrecti,_errors$titleCorrecti2,_elements$field$id,_elements$field$id2,_errors$titleCorrecti3,_errors$titleCorrecti4,_errors$titleCorrecti5;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(null===(_errors$titleCorrecti=errors.titleCorrections)||void 0===_errors$titleCorrecti||null===(_errors$titleCorrecti2=_errors$titleCorrecti[idx])||void 0===_errors$titleCorrecti2?void 0:_errors$titleCorrecti2.value),isRequired:!0,children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.lX,{mt:2,children:["Title for ",null==elements||null===(_elements$field$id=elements[field.id])||void 0===_elements$field$id?void 0:_elements$field$id.name," (",null==elements||null===(_elements$field$id2=elements[field.id])||void 0===_elements$field$id2?void 0:_elements$field$id2.itemTitle,")"]}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({},register("titleCorrections."+idx+".value",{maxLength:100}),{placeholder:"Replacement title"})),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:"maxLength"===(null===(_errors$titleCorrecti3=errors.titleCorrections)||void 0===_errors$titleCorrecti3||null===(_errors$titleCorrecti4=_errors$titleCorrecti3[idx])||void 0===_errors$titleCorrecti4||null===(_errors$titleCorrecti5=_errors$titleCorrecti4.value)||void 0===_errors$titleCorrecti5?void 0:_errors$titleCorrecti5.type)&&"Title must not exceed 100 characters."})]},field.id)})),Boolean(descriptionCorrectionsFields.fields.length)&&(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h2",size:"md",textAlign:"left",my:4,children:"Corrected video descriptions"}),descriptionCorrectionsFields.fields.map((function(field,idx){var _errors$descriptionCo,_errors$descriptionCo2,_elements$field$id3,_elements$field$id4,_errors$descriptionCo3,_errors$descriptionCo4,_errors$descriptionCo5,_errors$descriptionCo6,_errors$descriptionCo7,_errors$descriptionCo8;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:Boolean(null===(_errors$descriptionCo=errors.descriptionCorrections)||void 0===_errors$descriptionCo||null===(_errors$descriptionCo2=_errors$descriptionCo[idx])||void 0===_errors$descriptionCo2?void 0:_errors$descriptionCo2.value),isRequired:!0,children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.lX,{mt:2,children:["Description for ",null==elements||null===(_elements$field$id3=elements[field.id])||void 0===_elements$field$id3?void 0:_elements$field$id3.name," (",null==elements||null===(_elements$field$id4=elements[field.id])||void 0===_elements$field$id4?void 0:_elements$field$id4.itemTitle,")"]}),(0,jsx_runtime.jsx)(chakra_ui_textarea_esm.g,Object.assign({},register("descriptionCorrections."+idx+".value",{maxLength:4950,validate:{angleBrackets:function angleBrackets(x){return!(null!=x&&x.includes("<")||null!=x&&x.includes(">"))}}}),{placeholder:"Replacement description"})),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.J1,{children:["maxLength"===(null===(_errors$descriptionCo3=errors.descriptionCorrections)||void 0===_errors$descriptionCo3||null===(_errors$descriptionCo4=_errors$descriptionCo3[idx])||void 0===_errors$descriptionCo4||null===(_errors$descriptionCo5=_errors$descriptionCo4.value)||void 0===_errors$descriptionCo5?void 0:_errors$descriptionCo5.type)&&"Description must not exceed 4950 characters. ","angleBrackets"===(null===(_errors$descriptionCo6=errors.descriptionCorrections)||void 0===_errors$descriptionCo6||null===(_errors$descriptionCo7=_errors$descriptionCo6[idx])||void 0===_errors$descriptionCo7||null===(_errors$descriptionCo8=_errors$descriptionCo7.value)||void 0===_errors$descriptionCo8?void 0:_errors$descriptionCo8.type)&&"Description must not contain '<' or '>' characters. "]})]},field.id)})),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{type:"submit",isLoading:isSubmitting,isDisabled:!isValid||!elementIds.length,mt:4,colorScheme:"purple",children:"Upload videos"})]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}function YouTubeExportPage(){var conferencePath=(0,AuthParameters.h)().conferencePath,path=(0,react_router.$B)().path;return(0,jsx_runtime.jsx)(RequireRole.Z,{organizerRole:!0,componentIfDenied:(0,jsx_runtime.jsx)(PageNotFound.default,{}),children:(0,jsx_runtime.jsxs)(react_router.rs,{children:[(0,jsx_runtime.jsx)(react_router.AW,{path:path+"/uploads",children:(0,jsx_runtime.jsx)(UploadedPage,{})}),(0,jsx_runtime.jsx)(react_router.AW,{path:path+"/",children:(0,jsx_runtime.jsxs)(DashboardPage.Y,{title:"Export to YouTube",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["By using Midspace to export videos to YouTube, you agree to"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{isExternal:!0,href:"https://www.youtube.com/t/terms",children:"YouTube's Terms of Service"}),"."]}),(0,jsx_runtime.jsx)(LinkButton.Qj,{to:conferencePath+"/manage/export/youtube/uploads",colorScheme:"PrimaryActionButton",mt:4,size:"md",children:"Previous exports"}),(0,jsx_runtime.jsxs)(YouTubeExportProvider,{children:[(0,jsx_runtime.jsx)(ConnectYouTubeAccount,{my:4}),(0,jsx_runtime.jsx)(UploadYouTubeVideos,{}),(0,jsx_runtime.jsx)(Finished,{})]})]})})]})})}function ManageExport(){var path=(0,react_router.$B)().path;return(0,jsx_runtime.jsxs)(react_router.rs,{children:[(0,jsx_runtime.jsx)(react_router.AW,{path:path+"/youtube",children:(0,jsx_runtime.jsx)(YouTubeExportPage,{})}),(0,jsx_runtime.jsx)(react_router.AW,{path:path+"/download-videos",children:(0,jsx_runtime.jsx)(DownloadVideosPage,{})}),(0,jsx_runtime.jsx)(react_router.AW,{path:"/",children:(0,jsx_runtime.jsx)(Dashboard,{})})]})}(0,urql_core.Ps)(UploadYouTubeVideos_templateObject||(UploadYouTubeVideos_templateObject=function UploadYouTubeVideos_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(['\n    query UploadYouTubeVideos_GetRegistrantGoogleAccounts($registrantId: uuid!) {\n        registrant_GoogleAccount(where: { registrantId: { _eq: $registrantId } }) {\n            id\n            registrantId\n            googleAccountEmail\n            youTubeData\n        }\n    }\n\n    mutation UploadYouTubeVideos_CreateUploadYouTubeVideoJobs(\n        $objects: [job_queues_UploadYouTubeVideoJob_insert_input!]!\n    ) {\n        insert_job_queues_UploadYouTubeVideoJob(objects: $objects) {\n            returning {\n                id\n            }\n        }\n    }\n\n    query UploadYouTubeVideos_GetElements($elementIds: [uuid!]!) {\n        content_Element(where: { id: { _in: $elementIds } }) {\n            id\n            name\n            itemId\n            item {\n                id\n                title\n            }\n        }\n    }\n\n    query UploadYouTubeVideos_GetTemplateData($elementIds: [uuid!]!) {\n        content_Element(where: { id: { _in: $elementIds } }) {\n            id\n            name\n            itemId\n            item {\n                id\n                shortTitle\n                title\n                elements {\n                    id\n                    itemId\n                    youTubeUploads {\n                        id\n                        videoTitle\n                        videoId\n                        elementId\n                    }\n                }\n                abstractElements: elements(\n                    where: { typeName: { _eq: ABSTRACT } }\n                    order_by: { updatedAt: desc }\n                    limit: 1\n                ) {\n                    ...UploadYouTubeVideos_Element\n                }\n                paperLinkElements: elements(where: { typeName: { _eq: PAPER_LINK } }) {\n                    ...UploadYouTubeVideos_Element\n                }\n                paperUrlElements: elements(where: { typeName: { _eq: PAPER_URL } }) {\n                    ...UploadYouTubeVideos_Element\n                }\n                authors: itemPeople(where: { roleName: { _eq: "AUTHOR" } }, order_by: { priority: asc }) {\n                    id\n                    itemId\n                    personId\n                    roleName\n                    priority\n                    person {\n                        id\n                        name\n                        affiliation\n                    }\n                }\n                presenters: itemPeople(where: { roleName: { _eq: "PRESENTER" } }, order_by: { priority: asc }) {\n                    id\n                    itemId\n                    personId\n                    roleName\n                    priority\n                    person {\n                        id\n                        name\n                        affiliation\n                    }\n                }\n            }\n        }\n    }\n\n    fragment UploadYouTubeVideos_Element on content_Element {\n        id\n        data\n        itemId\n        typeName\n    }\n\n    mutation UploadYouTubeVideos_RefreshYouTubeData($registrantId: uuid!, $registrantGoogleAccountId: uuid!) {\n        refreshYouTubeData(registrantId: $registrantId, registrantGoogleAccountId: $registrantGoogleAccountId) {\n            message\n            success\n        }\n    }\n']))),VideoIcon.displayName="VideoIcon",YouTubeExportPage.displayName="YouTubeExportPage",ManageExport.displayName="ManageExport"},"./src/aspects/Conference/Manage/RestrictedDashboardButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>RestrictedDashboardButton});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js");var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),__webpack_require__("./src/aspects/Chakra/FAIcon.tsx")),_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),_RequireRole__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/aspects/Conference/RequireRole.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js"),_excluded=["to","name","icon","iconStyle","description","organizerRole","moderatorRole","attendeeRole","colorScheme"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function RestrictedDashboardButton(_ref){var to=_ref.to,name=_ref.name,icon=_ref.icon,iconStyle=_ref.iconStyle,description=_ref.description,organizerRole=_ref.organizerRole,moderatorRole=_ref.moderatorRole,attendeeRole=_ref.attendeeRole,colorScheme=_ref.colorScheme,rest=_objectWithoutProperties(_ref,_excluded),conferencePath=(0,_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_9__.h)().conferencePath;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_RequireRole__WEBPACK_IMPORTED_MODULE_10__.Z,{organizerRole,moderatorRole,attendeeRole,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.Qj,Object.assign({to:conferencePath+"/manage/"+to,padding:4,overflow:"hidden",whiteSpace:"normal",linkProps:{maxWidth:"290px",width:"100%"},colorScheme:null!=colorScheme?colorScheme:"dark-purple",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",display:"inline-flex",width:"100%",height:"100%",shadow:"lg",borderRadius:"xl",margin:0},rest,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_12__.X6,{as:"h2",fontSize:"2xl",marginBottom:"0.5rem",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:null!=iconStyle?iconStyle:"s",icon}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("br",{}),name]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_12__.xv,{fontSize:"sm",children:description})]}))})}RestrictedDashboardButton.displayName="RestrictedDashboardButton";try{RestrictedDashboardButton.displayName="RestrictedDashboardButton",RestrictedDashboardButton.__docgenInfo={description:"",displayName:"RestrictedDashboardButton",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"As<any>"}},_hover:{defaultValue:null,description:"Styles for CSS selector `&:hover`",name:"_hover",required:!1,type:{name:"CSSObject"}},_active:{defaultValue:null,description:"Styles for CSS Selector `&:active`",name:"_active",required:!1,type:{name:"CSSObject"}},_focus:{defaultValue:null,description:"Styles for CSS selector `&:focus`",name:"_focus",required:!1,type:{name:"CSSObject"}},_highlighted:{defaultValue:null,description:"Styles for the highlighted state.",name:"_highlighted",required:!1,type:{name:"CSSObject"}},_focusWithin:{defaultValue:null,description:"Styles to apply when a child of this element has received focus\n- CSS Selector `&:focus-within`",name:"_focusWithin",required:!1,type:{name:"CSSObject"}},_focusVisible:{defaultValue:null,description:"Styles to apply when this element has received focus via tabbing\n- CSS Selector `&:focus-visible`",name:"_focusVisible",required:!1,type:{name:"CSSObject"}},_disabled:{defaultValue:null,description:"Styles to apply when this element is disabled. The passed styles are applied to these CSS selectors:\n- `&[aria-disabled=true]`\n- `&:disabled`\n- `&[data-disabled]`",name:"_disabled",required:!1,type:{name:"CSSObject"}},_readOnly:{defaultValue:null,description:"Styles for CSS Selector `&:readonly`",name:"_readOnly",required:!1,type:{name:"CSSObject"}},_before:{defaultValue:null,description:'Styles for CSS selector `&::before`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _before={{content:`""` }}/>\n```',name:"_before",required:!1,type:{name:"CSSObject"}},_after:{defaultValue:null,description:'Styles for CSS selector `&::after`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _after={{content:`""` }}/>\n```',name:"_after",required:!1,type:{name:"CSSObject"}},_empty:{defaultValue:null,description:"Styles for CSS selector `&:empty`",name:"_empty",required:!1,type:{name:"CSSObject"}},_expanded:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-expanded` is `true`\n- CSS selector `&[aria-expanded=true]`",name:"_expanded",required:!1,type:{name:"CSSObject"}},_checked:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `true`\n- CSS selector `&[aria-checked=true]`",name:"_checked",required:!1,type:{name:"CSSObject"}},_grabbed:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-grabbed` is `true`\n- CSS selector `&[aria-grabbed=true]`",name:"_grabbed",required:!1,type:{name:"CSSObject"}},_pressed:{defaultValue:null,description:'Styles for CSS Selector `&[aria-pressed=true]`\nTypically used to style the current "pressed" state of toggle buttons',name:"_pressed",required:!1,type:{name:"CSSObject"}},_invalid:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-invalid` is `true`\n- CSS selector `&[aria-invalid=true]`",name:"_invalid",required:!1,type:{name:"CSSObject"}},_valid:{defaultValue:null,description:"Styles for the valid state\n- CSS selector `&[data-valid], &[data-state=valid]`",name:"_valid",required:!1,type:{name:"CSSObject"}},_loading:{defaultValue:null,description:"Styles for CSS Selector `&[aria-busy=true]` or `&[data-loading=true]`.\nUseful for styling loading states",name:"_loading",required:!1,type:{name:"CSSObject"}},_selected:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-selected` is `true`\n\n- CSS selector `&[aria-selected=true]`",name:"_selected",required:!1,type:{name:"CSSObject"}},_hidden:{defaultValue:null,description:"Styles for CSS Selector `[hidden=true]`",name:"_hidden",required:!1,type:{name:"CSSObject"}},_autofill:{defaultValue:null,description:"Styles for CSS Selector `&:-webkit-autofill`",name:"_autofill",required:!1,type:{name:"CSSObject"}},_even:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(even)`",name:"_even",required:!1,type:{name:"CSSObject"}},_odd:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(odd)`",name:"_odd",required:!1,type:{name:"CSSObject"}},_first:{defaultValue:null,description:"Styles for CSS Selector `&:first-of-type`",name:"_first",required:!1,type:{name:"CSSObject"}},_last:{defaultValue:null,description:"Styles for CSS Selector `&:last-of-type`",name:"_last",required:!1,type:{name:"CSSObject"}},_notFirst:{defaultValue:null,description:"Styles for CSS Selector `&:not(:first-of-type)`",name:"_notFirst",required:!1,type:{name:"CSSObject"}},_notLast:{defaultValue:null,description:"Styles for CSS Selector `&:not(:last-of-type)`",name:"_notLast",required:!1,type:{name:"CSSObject"}},_visited:{defaultValue:null,description:"Styles for CSS Selector `&:visited`",name:"_visited",required:!1,type:{name:"CSSObject"}},_activeLink:{defaultValue:null,description:"Used to style the active link in a navigation\nStyles for CSS Selector `&[aria-current=page]`",name:"_activeLink",required:!1,type:{name:"CSSObject"}},_activeStep:{defaultValue:null,description:"Used to style the current step within a process\nStyles for CSS Selector `&[aria-current=step]`",name:"_activeStep",required:!1,type:{name:"CSSObject"}},_indeterminate:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `mixed`\n- CSS selector `&[aria-checked=mixed]`",name:"_indeterminate",required:!1,type:{name:"CSSObject"}},_groupHover:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is hovered",name:"_groupHover",required:!1,type:{name:"CSSObject"}},_peerHover:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is hovered",name:"_peerHover",required:!1,type:{name:"CSSObject"}},_groupFocus:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is focused",name:"_groupFocus",required:!1,type:{name:"CSSObject"}},_peerFocus:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is focused",name:"_peerFocus",required:!1,type:{name:"CSSObject"}},_groupFocusVisible:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has visible focus",name:"_groupFocusVisible",required:!1,type:{name:"CSSObject"}},_peerFocusVisible:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer`or `data-peer` has visible focus",name:"_peerFocusVisible",required:!1,type:{name:"CSSObject"}},_groupActive:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is active",name:"_groupActive",required:!1,type:{name:"CSSObject"}},_peerActive:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is active",name:"_peerActive",required:!1,type:{name:"CSSObject"}},_groupDisabled:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is disabled",name:"_groupDisabled",required:!1,type:{name:"CSSObject"}},_peerDisabled:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is disabled",name:"_peerDisabled",required:!1,type:{name:"CSSObject"}},_groupInvalid:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is invalid",name:"_groupInvalid",required:!1,type:{name:"CSSObject"}},_peerInvalid:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is invalid",name:"_peerInvalid",required:!1,type:{name:"CSSObject"}},_groupChecked:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is checked",name:"_groupChecked",required:!1,type:{name:"CSSObject"}},_peerChecked:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is checked",name:"_peerChecked",required:!1,type:{name:"CSSObject"}},_groupFocusWithin:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has focus within",name:"_groupFocusWithin",required:!1,type:{name:"CSSObject"}},_peerFocusWithin:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has focus within",name:"_peerFocusWithin",required:!1,type:{name:"CSSObject"}},_peerPlaceholderShown:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has placeholder shown",name:"_peerPlaceholderShown",required:!1,type:{name:"CSSObject"}},_placeholder:{defaultValue:null,description:"Styles for CSS Selector `&::placeholder`.",name:"_placeholder",required:!1,type:{name:"CSSObject"}},_placeholderShown:{defaultValue:null,description:"Styles for CSS Selector `&:placeholder-shown`.",name:"_placeholderShown",required:!1,type:{name:"CSSObject"}},_fullScreen:{defaultValue:null,description:"Styles for CSS Selector `&:fullscreen`.",name:"_fullScreen",required:!1,type:{name:"CSSObject"}},_selection:{defaultValue:null,description:"Styles for CSS Selector `&::selection`",name:"_selection",required:!1,type:{name:"CSSObject"}},_rtl:{defaultValue:null,description:'Styles for CSS Selector `[dir=rtl] &`\nIt is applied when a parent element or this element has `dir="rtl"`',name:"_rtl",required:!1,type:{name:"CSSObject"}},_ltr:{defaultValue:null,description:'Styles for CSS Selector `[dir=ltr] &`\nIt is applied when a parent element or this element has `dir="ltr"`',name:"_ltr",required:!1,type:{name:"CSSObject"}},_mediaDark:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-color-scheme: dark)`\nIt is used when the user has requested the system use a light or dark color theme.",name:"_mediaDark",required:!1,type:{name:"CSSObject"}},_mediaReduceMotion:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-reduced-motion: reduce)`\nIt is used when the user has requested the system to reduce the amount of animations.",name:"_mediaReduceMotion",required:!1,type:{name:"CSSObject"}},_dark:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_dark",required:!1,type:{name:"CSSObject"}},_light:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_light",required:!1,type:{name:"CSSObject"}},to:{defaultValue:null,description:"",name:"to",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},iconStyle:{defaultValue:null,description:"",name:"iconStyle",required:!1,type:{name:"enum",value:[{value:'"b"'},{value:'"s"'},{value:'"r"'}]}},description:{defaultValue:null,description:"",name:"description",required:!0,type:{name:"string"}},organizerRole:{defaultValue:null,description:"",name:"organizerRole",required:!1,type:{name:"boolean"}},moderatorRole:{defaultValue:null,description:"",name:"moderatorRole",required:!1,type:{name:"boolean"}},attendeeRole:{defaultValue:null,description:"",name:"attendeeRole",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/RestrictedDashboardButton.tsx#RestrictedDashboardButton"]={docgenInfo:RestrictedDashboardButton.__docgenInfo,name:"RestrictedDashboardButton",path:"src/aspects/Conference/Manage/RestrictedDashboardButton.tsx#RestrictedDashboardButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/GQL/QueryWrapper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>QueryWrapper});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/aspects/Chakra/CenteredSpinner.tsx"),_useQueryErrorToast__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function QueryWrapper(_ref){var queryResult=_ref.queryResult,getter=_ref.getter,children=_ref.children,childrenNoData=_ref.childrenNoData,_ref$noSpinner=_ref.noSpinner,noSpinner=void 0!==_ref$noSpinner&&_ref$noSpinner,innerData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return"data"in queryResult&&queryResult.data?getter(queryResult.data):void 0}),[getter,queryResult]);return(0,_useQueryErrorToast__WEBPACK_IMPORTED_MODULE_2__.Z)("error"in queryResult?null==queryResult?void 0:queryResult.error:void 0,!1,"QueryWrapper"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[queryResult.fetching||queryResult.stale&&!innerData?noSpinner?void 0:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_1__.Z,{caller:"QueryWrapper:35"}):queryResult&&"error"in queryResult&&queryResult.error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"An error occurred loading in data - please see further information in notifications."}):void 0,queryResult.fetching||queryResult.stale&&!innerData?void 0:innerData?children(innerData):childrenNoData?childrenNoData():(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"No data found"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"(You might not have permission to access this. Please contact your conference organisers if you think this is a mistake.)"})]})]})}try{QueryWrapper.displayName="QueryWrapper",QueryWrapper.__docgenInfo={description:"",displayName:"QueryWrapper",props:{queryResult:{defaultValue:null,description:"",name:"queryResult",required:!0,type:{name:"UseQueryState<TData, TVariables> | (OperationResult<TData, TVariables> & { fetching: boolean; stale: boolean; }) | { ...; }"}},getter:{defaultValue:null,description:"",name:"getter",required:!0,type:{name:"(data: TData) => TInnerData | null | undefined"}},childrenNoData:{defaultValue:null,description:"",name:"childrenNoData",required:!1,type:{name:"(() => ReactNode | ReactNode[])"}},noSpinner:{defaultValue:{value:"false"},description:"",name:"noSpinner",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/GQL/QueryWrapper.tsx#QueryWrapper"]={docgenInfo:QueryWrapper.__docgenInfo,name:"QueryWrapper",path:"src/aspects/GQL/QueryWrapper.tsx#QueryWrapper"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Google/useGoogleOAuthRedirectUrl.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>useGoogleOAuthRedirectPath});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js");var react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js"),_Hooks_useRestorableState__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/aspects/Hooks/useRestorableState.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useGoogleOAuthRedirectPath(){var _useRestorableState2=_slicedToArray((0,_Hooks_useRestorableState__WEBPACK_IMPORTED_MODULE_12__.aX)("clowdr-googleOAuthRedirectPath",null,(function(x){return JSON.stringify(x)}),(function(x){return JSON.parse(x)})),2),url=_useRestorableState2[0],setUrl=_useRestorableState2[1],_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_11__.useState)(null),2),followUrl=_useState2[0],setFollowUrl=_useState2[1],history=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_13__.k6)();(0,react__WEBPACK_IMPORTED_MODULE_11__.useEffect)((function(){!url&&followUrl&&history.push(followUrl)}),[url,followUrl,history]);var follow=(0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)((function(){setFollowUrl(url),setUrl(null)}),[setUrl,url]);return[url,setUrl,follow]}}}]);