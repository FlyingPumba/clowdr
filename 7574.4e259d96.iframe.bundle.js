"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[7574],{"./src/aspects/PushNotifications/PushNotificationSettings.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>PushNotificationSettings});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js");var _templateObject,chakra_ui_icons_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),chakra_ui_spinner_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js"),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),chakra_ui_alert_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+alert@1.3.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/alert/dist/chakra-ui-alert.esm.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),urql_es=__webpack_require__("../node_modules/.pnpm/urql@2.1.3_graphql@15.7.2+react@17.0.2/node_modules/urql/dist/urql.es.js"),esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.repeat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.uint8-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.copy-within.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.every.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.fill.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.find-index.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.join.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.last-index-of.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.reduce.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.reduce-right.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.reverse.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.set.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.some.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.sort.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.subarray.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.to-locale-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.typed-array.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array-buffer.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-json.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.to-json.js"),__webpack_require__("../packages/shared/assert/build/esm/index.js")),urql_core=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),graphql=__webpack_require__("./src/generated/graphql.tsx");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function urlB64ToUint8Array(base64String){for(var base64=(base64String+"=".repeat((4-base64String.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),rawData=window.atob(base64),outputArray=new Uint8Array(rawData.length),i=0;i<rawData.length;++i)outputArray[i]=rawData.charCodeAt(i);return outputArray}(0,urql_core.Ps)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query GetVAPIDPublicKey @cached {\n        vapidPublicKey {\n            key\n        }\n    }\n\n    mutation UpsertPushNotificationSubscription($object: PushNotificationSubscription_insert_input!) {\n        insert_PushNotificationSubscription_one(\n            object: $object\n            on_conflict: { constraint: PushNotificationSubscription_pkey, update_columns: [auth, endpoint, p256dh] }\n        ) {\n            endpoint\n        }\n    }\n\n    mutation DeletePushNotificationSubscription($endpoint: String!) {\n        delete_PushNotificationSubscription(where: { endpoint: { _eq: $endpoint } }) {\n            affected_rows\n        }\n    }\n"])));var pushNotificationsState=new(function(){function PushNotificationsState(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PushNotificationsState),this._pushSubscription=void 0,this._onIsSubscribed=new Map,this._onIsSubscribedGen=1,this.init()}var _unsubscribe,_subscribe,_init;return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PushNotificationsState,[{key:"pushSubscription",get:function get(){return this._pushSubscription},set:function set(value){this._pushSubscription=value;var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(this._onIsSubscribed);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=_slicedToArray(_step.value,2);_ref2[0];(0,_ref2[1])(!(!this.pushSubscription||"string"==typeof this.pushSubscription)||(this.pushSubscription&&"string"==typeof this.pushSubscription?this.pushSubscription:null!==this.pushSubscription&&null))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"onIsSubscribed",value:function onIsSubscribed(handler){var _this=this,id=this._onIsSubscribedGen++;return this._onIsSubscribed.set(id,handler),handler(!(!this.pushSubscription||"string"==typeof this.pushSubscription)||(this.pushSubscription&&"string"==typeof this.pushSubscription?this.pushSubscription:null!==this.pushSubscription&&null)),function(){_this._onIsSubscribed.delete(id)}}},{key:"init",value:(_init=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var swRegistration;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!("serviceWorker"in navigator)){_context.next=15;break}return console.info("Push notifications: Attempting to register service worker"),navigator.serviceWorker.register("/pushNotificationsServiceWorker.js"),_context.next=6,navigator.serviceWorker.ready;case 6:return"pushManager"in(swRegistration=_context.sent)||(console.info("Push manager not available - push notifications may not be supported by your browser: https://caniuse.com/push-api"),this.pushSubscription="Push manager not available - push notifications may not be supported by your browser: https://caniuse.com/push-api"),console.info("Push notifications: Service worker ready"),_context.next=11,swRegistration.pushManager.getSubscription();case 11:this.pushSubscription=_context.sent,this.pushSubscription?console.info("Push notifications: Found an existing subscription"):(console.info("Push notifications: No existing subscription"),this.pushSubscription=null),_context.next=17;break;case 15:console.info("Push notifications: Service workers not available. Have you enabled service workers for localhost in the developer tools settings?"),this.pushSubscription="Service workers not available (perhaps you're in private browsing mode?)";case 17:_context.next=22;break;case 19:_context.prev=19,_context.t0=_context.catch(0),this.pushSubscription="Unexpected error: "+_context.t0.toString();case 22:case"end":return _context.stop()}}),_callee,this,[[0,19]])}))),function init(){return _init.apply(this,arguments)})},{key:"subscribe",value:(_subscribe=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(client){var swRegistration,_keyResponse$data,_keyResponse$data$vap,keyResponse,subJSON;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,this.pushSubscription=void 0,!("serviceWorker"in navigator)){_context2.next=51;break}return _context2.next=5,navigator.serviceWorker.ready;case 5:return"pushManager"in(swRegistration=_context2.sent)||(console.info("Push manager not available - push notifications may not be supported by your browser: https://caniuse.com/push-api"),this.pushSubscription="Push manager not available - push notifications may not be supported by your browser: https://caniuse.com/push-api"),_context2.prev=7,_context2.next=10,client.query(graphql.poj).toPromise();case 10:if(keyResponse=_context2.sent,null===(_keyResponse$data=keyResponse.data)||void 0===_keyResponse$data||null===(_keyResponse$data$vap=_keyResponse$data.vapidPublicKey)||void 0===_keyResponse$data$vap||!_keyResponse$data$vap.key){_context2.next=41;break}return console.info("Push notifications: Attempting to subscribe..."),_context2.prev=13,_context2.next=16,swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlB64ToUint8Array(keyResponse.data.vapidPublicKey.key)});case 16:return this.pushSubscription=_context2.sent,esm.h.truthy(this.pushSubscription,"Push subscription was not defined."),console.info("Push notifications: Subscribed. Saving to server..."),_context2.prev=19,subJSON=this.pushSubscription.toJSON(),esm.h.truthy(subJSON.endpoint,"Subscription JSON did not have an endpoint"),esm.h.truthy(subJSON.keys,"Subscription JSON did not have any keys"),esm.h.truthy(subJSON.keys.auth,"Subscription JSON keys did not have auth information"),esm.h.truthy(subJSON.keys.p256dh,"Subscription JSON keys did not have p256dh information"),_context2.next=27,client.mutation(graphql.V$5,{object:{auth:subJSON.keys.auth,endpoint:subJSON.endpoint,p256dh:subJSON.keys.p256dh}}).toPromise();case 27:_context2.next=33;break;case 29:_context2.prev=29,_context2.t0=_context2.catch(19),console.error("Error saving subscription information to the server",_context2.t0),this.pushSubscription="Could not save subscription to the server!\n"+_context2.t0.toString();case 33:_context2.next=39;break;case 35:_context2.prev=35,_context2.t1=_context2.catch(13),console.error("Browser denied the push subscription",_context2.t1),this.pushSubscription="Browser denied the push subscription!\n"+_context2.t1.toString();case 39:_context2.next=43;break;case 41:console.warn("Push notifications: Server responded with blank key."),this.pushSubscription="Server responded with blank key.";case 43:_context2.next=49;break;case 45:_context2.prev=45,_context2.t2=_context2.catch(7),console.error("Push notifications: Error fetching VAPID public key.",_context2.t2),this.pushSubscription="Could not obtain VAPID public key!\n"+_context2.t2.toString();case 49:_context2.next=53;break;case 51:console.info("Push notifications: Service workers not available. Have you enabled service workers for localhost in the developer tools settings?"),this.pushSubscription="Service workers not available (perhaps you're in private browsing mode?)";case 53:_context2.next=58;break;case 55:_context2.prev=55,_context2.t3=_context2.catch(0),this.pushSubscription="Unexpected error: "+_context2.t3.toString();case 58:case"end":return _context2.stop()}}),_callee2,this,[[0,55],[7,45],[13,35],[19,29]])}))),function subscribe(_x){return _subscribe.apply(this,arguments)})},{key:"unsubscribe",value:(_unsubscribe=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(client){var swRegistration,sub;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,this.pushSubscription=void 0,!("serviceWorker"in navigator)){_context3.next=26;break}return _context3.next=5,navigator.serviceWorker.ready;case 5:return"pushManager"in(swRegistration=_context3.sent)||(console.info("Push manager not available - push notifications may not be supported by your browser: https://caniuse.com/push-api"),this.pushSubscription="Push manager not available - push notifications may not be supported by your browser: https://caniuse.com/push-api"),_context3.next=9,swRegistration.pushManager.getSubscription();case 9:if(sub=_context3.sent,this.pushSubscription=null,!sub){_context3.next=24;break}return _context3.next=14,sub.unsubscribe();case 14:return console.info("Push notifications: Unsubscribed. Deleting from server..."),_context3.prev=15,_context3.next=18,client.mutation(graphql.dQh,{endpoint:sub.endpoint}).toPromise();case 18:_context3.next=24;break;case 20:_context3.prev=20,_context3.t0=_context3.catch(15),console.error("Error deleting subscription information from the server",_context3.t0),this.pushSubscription="Could not delete subscription from the server!\n"+_context3.t0.toString();case 24:_context3.next=28;break;case 26:console.info("Push notifications: Service workers not available. Have you enabled service workers for localhost in the developer tools settings?"),this.pushSubscription="Service workers not available (perhaps you're in private browsing mode?)";case 28:_context3.next=33;break;case 30:_context3.prev=30,_context3.t1=_context3.catch(0),this.pushSubscription="Unexpected error: "+_context3.t1.toString();case 33:case"end":return _context3.stop()}}),_callee3,this,[[0,30],[15,20]])}))),function unsubscribe(_x2){return _unsubscribe.apply(this,arguments)})}]),PushNotificationsState}()),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function PushNotificationSettings_slicedToArray(arr,i){return function PushNotificationSettings_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function PushNotificationSettings_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function PushNotificationSettings_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PushNotificationSettings_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PushNotificationSettings_arrayLikeToArray(o,minLen)}(arr,i)||function PushNotificationSettings_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PushNotificationSettings_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function PushNotificationSettings(){var _useState2=PushNotificationSettings_slicedToArray((0,react.useState)(null),2),isSubscribed=_useState2[0],setIsSubscribed=_useState2[1],client=(0,urql_es.m8)();return(0,react.useEffect)((function(){var unsub=pushNotificationsState.onIsSubscribed((function(isSub){setIsSubscribed(isSub)}));return function(){unsub()}}),[]),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.M5,{as:chakra_ui_layout_esm.gC,flexDir:"column",spacing:8,maxW:600,py:8,children:[null===isSubscribed?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Determining subscription state for this browser..."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{})})]}):isSubscribed&&"string"==typeof isSubscribed?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Error handling subscription"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:isSubscribed})]}):isSubscribed?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"You are subscribed to push notifications in this browser."}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){pushNotificationsState.unsubscribe(client)},children:"Unsubscribe"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"You are not currently subscribed to push notifications in this browser."}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){pushNotificationsState.subscribe(client)},children:"Subscribe"})]}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{variant:"subtle",status:"warning",alignItems:"flex-start",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{as:chakra_ui_icons_esm.WarningTwoIcon,mt:1}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{flex:"1",children:[(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.Cd,{mb:2,children:[(0,jsx_runtime.jsx)("em",{children:"Mac users:"})," Remember to allow “Alerts” in your System Preferences"]}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{as:chakra_ui_layout_esm.gC,children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["Instructions for enabling alerts:"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{isExternal:!0,href:"https://support.apple.com/en-us/HT204079",children:"https://support.apple.com/en-us/HT204079"})]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["Mac users will need to"," ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.rU,{isExternal:!0,href:"https://support.apple.com/en-us/HT204079",children:"allow their browser to show notifications via the operating system's Control Center settings."})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Please also remember that if you have Do Not Disturb mode on (which is often automatically enabled when you have a second screen plugged in), notifications will be suppressed by the operating system."})]})]})]}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{variant:"subtle",status:"info",alignItems:"flex-start",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{mt:1}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{flex:"1",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{mb:2,children:"Please note, push notifications are only supported in Firefox, Chrome, Edge and Opera on desktop, laptop and Android devices."}),(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.X,{as:chakra_ui_layout_esm.gC,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Apple's decision to obstruct open web standards, by refusing to implement the Push API, prevents Midspace from supporting push notifications in Safari and all browsers on iOS."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontStyle:"italic",children:"(Don't be fooled: all iOS browser apps have to use Apple's web engine, including Firefox and Chrome. Your browser may not be what you think it is.)"})]})]})]})]})}PushNotificationSettings.displayName="PushNotificationSettings"},"../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-json.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/export.js"),fails=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/fails.js"),toObject=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/to-object.js"),toPrimitive=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/to-primitive.js");$({target:"Date",proto:!0,forced:fails((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function toJSON(key){var O=toObject(this),pv=toPrimitive(O,"number");return"number"!=typeof pv||isFinite(pv)?O.toISOString():null}})},"../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.to-json.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/export.js"),call=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/function-call.js");$({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return call(URL.prototype.toString,this)}})}}]);