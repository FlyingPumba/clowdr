/*! For license information please see 9712.3fdb12db.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[9712],{"./src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionRequestsModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cq:()=>SendSubmissionRequestsModal,VD:()=>roleOptions});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.split.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.values.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.set.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.some.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js");var _templateObject,_templateObject2,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+modal@1.10.7_d24435ba52f1f88b08cc54a1f1d4e56f/node_modules/@chakra-ui/modal/dist/chakra-ui-modal.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+toast@1.5.4_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/toast/dist/chakra-ui-toast.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+form-control@1.5.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+system@1.10.3_922a85da57e3646a57465b7970b0de85/node_modules/@chakra-ui/system/dist/chakra-ui-system.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+switch@1.3.5_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/switch/dist/chakra-ui-switch.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+select@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/select/dist/chakra-ui-select.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+input@1.4.1_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/input/dist/chakra-ui-input.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+textarea@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/textarea/dist/chakra-ui-textarea.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),_midspace_shared_types_conferenceConfiguration__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("../packages/shared/shared-types/build/esm/conferenceConfiguration.js"),_midspace_shared_types_email__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("../packages/shared/shared-types/build/esm/email.js"),_urql_core__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),formik__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("../node_modules/.pnpm/formik@2.2.9_react@17.0.2/node_modules/formik/dist/formik.esm.js"),react__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),_generated_graphql__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("./src/generated/graphql.tsx"),_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),_Chakra_MultiSelect__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("./src/aspects/Chakra/MultiSelect.tsx"),_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),_GQL_make_context__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("./src/aspects/GQL/make-context.ts"),_GQL_QueryWrapper__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("./src/aspects/GQL/QueryWrapper.tsx"),_useConference__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("./src/aspects/Conference/useConference.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}function generateItemTypeFriendlyName(type){return type.split("_").map((function(x){return x[0]+x.substr(1).toLowerCase()})).reduce((function(acc,x){return acc+" "+x}))}function SendSubmissionRequestsModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,itemIds=_ref.itemIds,personIds=_ref.personIds;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.u_,{isOpen,onClose,size:"lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.ZA,{}),isOpen?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(SendSubmissionRequestsModalLazyInner,{onClose,itemIds,personIds}):void 0]})}function SendSubmissionRequestsModalLazyInner(_ref2){var onClose=_ref2.onClose,itemIds=_ref2.itemIds,personIds=_ref2.personIds,conference=(0,_useConference__WEBPACK_IMPORTED_MODULE_36__.fk)(),subconferenceId=(0,_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_34__.h)().subconferenceId,context=(0,react__WEBPACK_IMPORTED_MODULE_30__.useMemo)((function(){var _makeContext;return(0,_GQL_make_context__WEBPACK_IMPORTED_MODULE_40__.f)(((_makeContext={})[_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__.k.Role]=subconferenceId?_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__.Z.SubconferenceOrganizer:_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__.Z.ConferenceOrganizer,_makeContext),["content_ItemProgramPerson"])}),[subconferenceId]),result=_slicedToArray((0,_generated_graphql__WEBPACK_IMPORTED_MODULE_31__.dB8)({variables:{conferenceId:conference.id,itemIds},requestPolicy:"network-only",context}),1)[0];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_GQL_QueryWrapper__WEBPACK_IMPORTED_MODULE_35__.Z,{queryResult:result,getter:function getter(result){return result},children:function children(_ref3){var _conference_Configura,conference_Configuration=_ref3.conference_Configuration,content_Item=_ref3.content_Item,conferenceConfiguration=null!==(_conference_Configura=conference_Configuration.find((function(c){return c.key===_generated_graphql__WEBPACK_IMPORTED_MODULE_31__.jbg.EmailTemplateSubmissionRequest})))&&void 0!==_conference_Configura?_conference_Configura:null,existingTemplate={htmlBodyTemplate:null,subjectTemplate:null};return null!=conferenceConfiguration&&conferenceConfiguration.value&&(0,_midspace_shared_types_conferenceConfiguration__WEBPACK_IMPORTED_MODULE_27__.Zu)(conferenceConfiguration.value)&&(existingTemplate=conferenceConfiguration.value),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(SendSubmissionRequestsModalInner,{onClose,items:content_Item,existingTemplate,personIds})}})}(0,_urql_core__WEBPACK_IMPORTED_MODULE_38__.Ps)(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n    mutation InsertSubmissionRequestEmailJobs($objs: [job_queues_SubmissionRequestEmailJob_insert_input!]!) {\n        insert_job_queues_SubmissionRequestEmailJob(objects: $objs) {\n            affected_rows\n        }\n    }\n"]))),(0,_urql_core__WEBPACK_IMPORTED_MODULE_38__.Ps)(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n    query SubmissionRequestsModalData($conferenceId: uuid!, $itemIds: [uuid!]!) {\n        conference_Configuration(where: { conferenceId: { _eq: $conferenceId } }) {\n            ...ConfigureEmailTemplates_ConferenceConfiguration\n        }\n        content_Item(where: { id: { _in: $itemIds } }) {\n            ...SubmissionRequestsModal_Item\n        }\n    }\n\n    fragment SubmissionRequestsModal_ConferenceConfiguration on conference_Configuration {\n        conferenceId\n        key\n        value\n    }\n\n    fragment SubmissionRequestsModal_Item on content_Item {\n        id\n        title\n        typeName\n        hasUnsubmittedElements\n        itemPeople {\n            id\n            itemId\n            personId\n            roleName\n            hasSubmissionRequestBeenSent\n        }\n    }\n"]))),SendSubmissionRequestsModal.displayName="SendSubmissionRequestsModal",SendSubmissionRequestsModalLazyInner.displayName="SendSubmissionRequestsModalLazyInner";var roleOptions=[{label:"Presenter",value:"PRESENTER"},{label:"Author",value:"AUTHOR"},{label:"Chair",value:"CHAIR"},{label:"Session Organizer",value:"SESSION ORGANIZER"},{label:"Discussant",value:"DISCUSSANT"},{label:"Reviewer",value:"REVIEWER"}];function SendSubmissionRequestsModalInner(_ref4){var _existingTemplate$htm,_existingTemplate$sub,onClose=_ref4.onClose,items=_ref4.items,existingTemplate=_ref4.existingTemplate,filterToPersonIds=_ref4.personIds,subconferenceId=(0,_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_34__.h)().subconferenceId,types=(0,react__WEBPACK_IMPORTED_MODULE_30__.useMemo)((function(){return Object.values(_generated_graphql__WEBPACK_IMPORTED_MODULE_31__.gqi)}),[]),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_30__.useState)(),2),selectedType=_useState2[0],setSelectedType=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_30__.useState)(!0),2),onlyUnsubmitted=_useState4[0],setOnlyUnsubmitted=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_30__.useState)(!1),2),onlyFirsts=_useState6[0],setOnlyFirsts=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_30__.useState)([{label:"Author",value:"AUTHOR"},{label:"Presenter",value:"PRESENTER"},{label:"Discussant",value:"DISCUSSANT"}]),2),roles=_useState8[0],setRoles=_useState8[1],_useMemo=(0,react__WEBPACK_IMPORTED_MODULE_30__.useMemo)((function(){var _step,itemEls=[],personIds=new Set,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(items);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,includedPeople=null===filterToPersonIds?item.itemPeople:item.itemPeople.filter((function(x){return filterToPersonIds.includes(x.personId)})),filteredPeople=(onlyFirsts?includedPeople.filter((function(x){return!x.hasSubmissionRequestBeenSent})):includedPeople).filter((function(x){return roles.some((function(role){return role.value===x.roleName.toUpperCase()}))}));selectedType&&item.typeName!==selectedType||onlyUnsubmitted&&!item.hasUnsubmittedElements||!(filteredPeople.length>0)||(itemEls.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.HC,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.Ug,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_32__.Z,{icon:"file",iconStyle:"r",mr:2}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.gC,{alignItems:"flex-start",spacing:0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.xv,{fontWeight:"bold",fontSize:"sm",children:item.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.xv,{fontSize:"sm",children:[filteredPeople.length,filteredPeople.length>1?" people":" person"]})]})]})},item.id)),filteredPeople.forEach((function(itemPerson){return personIds.add(itemPerson.personId)})))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return{itemEls,personIds:_toConsumableArray(personIds)}}),[items,filterToPersonIds,onlyFirsts,selectedType,onlyUnsubmitted,roles]),itemEls=_useMemo.itemEls,personIds=_useMemo.personIds,itemsEl=(0,react__WEBPACK_IMPORTED_MODULE_30__.useMemo)((function(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.xu,{mt:4,children:0===itemEls.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.xv,{children:"No matching items."}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.aV,{spacing:2,maxH:"40vh",overflowY:"auto",children:itemEls})})}),[itemEls]),toast=(0,_chakra_ui_react__WEBPACK_IMPORTED_MODULE_42__.pm)(),sendSubmissionRequests=_slicedToArray((0,_generated_graphql__WEBPACK_IMPORTED_MODULE_31__.awO)(),2)[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.hz,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(formik__WEBPACK_IMPORTED_MODULE_29__.J9,{initialValues:{htmlBodyTemplate:null!==(_existingTemplate$htm=existingTemplate.htmlBodyTemplate)&&void 0!==_existingTemplate$htm?_existingTemplate$htm:_midspace_shared_types_email__WEBPACK_IMPORTED_MODULE_28__.S.htmlBodyTemplate,subjectTemplate:null!==(_existingTemplate$sub=existingTemplate.subjectTemplate)&&void 0!==_existingTemplate$sub?_existingTemplate$sub:_midspace_shared_types_email__WEBPACK_IMPORTED_MODULE_28__.S.subjectTemplate},onSubmit:function(){var _ref5=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values,actions){var _headers,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,sendSubmissionRequests({objs:personIds.map((function(id){return{personId:id,emailTemplate:{htmlBodyTemplate:values.htmlBodyTemplate,subjectTemplate:values.subjectTemplate}}}))},{fetchOptions:{headers:(_headers={},_headers[_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__.k.Role]=subconferenceId?_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__.Z.SubconferenceOrganizer:_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_26__.Z.ConferenceOrganizer,_headers)}});case 3:if(null==(result=_context.sent)||!result.error){_context.next=7;break}throw console.error("Failed to insert SubmissionRequestEmailJob",result.error),new Error("Error submitting query");case 7:actions.resetForm(),onClose(),toast({title:"Requests on their way",duration:3e3,isClosable:!0,status:"success"}),_context.next=15;break;case 12:_context.prev=12,_context.t0=_context.catch(0),toast({status:"error",title:"Could not send emails",description:_context.t0.message});case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])})));return function(_x,_x2){return _ref5.apply(this,arguments)}}(),children:function children(_ref6){var isSubmitting=_ref6.isSubmitting,isValid=_ref6.isValid;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(formik__WEBPACK_IMPORTED_MODULE_29__.l0,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.xB,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.xv,{children:"Send submission requests"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.ol,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.fe,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.NI,{mb:4,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.lX,{children:"Unsubmitted only?"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.Ug,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_44__.m$.span,{children:"No"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_45__.r,{isChecked:onlyUnsubmitted,onChange:function onChange(ev){return setOnlyUnsubmitted(ev.target.checked)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_44__.m$.span,{children:"Yes"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.Q6,{children:"Send emails only for items which have unsubmitted elements."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.NI,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.lX,{children:"First requests only?"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.Ug,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_44__.m$.span,{children:"No"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_45__.r,{isChecked:onlyFirsts,onChange:function onChange(ev){return setOnlyFirsts(ev.target.checked)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_44__.m$.span,{children:"Yes"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.Q6,{children:"Send emails only to people who have not already received one."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.NI,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.lX,{children:"Roles"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Chakra_MultiSelect__WEBPACK_IMPORTED_MODULE_33__.ZP,{placeholder:"Only email people with roles",options:roleOptions,value:roles,isMulti:!0,onChange:function onChange(options){return setRoles(options)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.Q6,{children:"Leave unselected to include all items."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.iz,{my:5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.NI,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.lX,{children:"Item Label"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_46__.Ph,{placeholder:"Choose items with label",onChange:function onChange(event){return setSelectedType(event.target.value)},children:types.map((function(type){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)("option",{value:type,children:generateItemTypeFriendlyName(type)},type)}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.Q6,{children:"Leave unselected to include all items."})]}),itemsEl,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.iz,{my:5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_41__.X6,{as:"h4",textAlign:"left",size:"sm",mt:4,children:"Email template"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(formik__WEBPACK_IMPORTED_MODULE_29__.gN,{name:"subjectTemplate",children:function children(_ref7){var field=_ref7.field,form=_ref7.form;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.NI,{isInvalid:!!form.errors.subjectTemplate&&!!form.touched.subjectTemplate,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.lX,{htmlFor:"subjectTemplate",mt:2,children:"Subject line"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.Q6,{children:"The template for the submission request email subject line."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_47__.II,Object.assign({},field,{id:"subjectTemplate",mt:2})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.J1,{children:form.errors.subjectTemplate})]})}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(formik__WEBPACK_IMPORTED_MODULE_29__.gN,{name:"htmlBodyTemplate",children:function children(_ref8){var field=_ref8.field,form=_ref8.form;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.NI,{isInvalid:!!form.errors.htmlBodyTemplate&&!!form.touched.htmlBodyTemplate,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.lX,{htmlFor:"htmlBodyTemplate",mt:2,children:"Email body"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.Q6,{children:"The template for the submission request email body."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_48__.g,Object.assign({fontFamily:"monospace",lineHeight:"lg",minH:"xs"},field,{id:"htmlBodyTemplate",mt:2})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_43__.J1,{children:form.errors.htmlBodyTemplate})]})}})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_39__.mz,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_49__.zx,{type:"submit",isLoading:isSubmitting,isDisabled:!isValid||0===personIds.length,mt:4,colorScheme:"purple",children:["Send ",personIds.length," emails (",itemEls.length," items)"]})})]})}})})}SendSubmissionRequestsModalInner.displayName="SendSubmissionRequestsModalInner";try{SendSubmissionRequestsModal.displayName="SendSubmissionRequestsModal",SendSubmissionRequestsModal.__docgenInfo={description:"",displayName:"SendSubmissionRequestsModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},itemIds:{defaultValue:null,description:"",name:"itemIds",required:!0,type:{name:"string[]"}},personIds:{defaultValue:null,description:"",name:"personIds",required:!0,type:{name:"string[] | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionRequestsModal.tsx#SendSubmissionRequestsModal"]={docgenInfo:SendSubmissionRequestsModal.__docgenInfo,name:"SendSubmissionRequestsModal",path:"src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionRequestsModal.tsx#SendSubmissionRequestsModal"})}catch(__react_docgen_typescript_loader_error){}try{SendSubmissionRequestsModalInner.displayName="SendSubmissionRequestsModalInner",SendSubmissionRequestsModalInner.__docgenInfo={description:"",displayName:"SendSubmissionRequestsModalInner",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"readonly SubmissionRequestsModal_ItemFragment[]"}},existingTemplate:{defaultValue:null,description:"",name:"existingTemplate",required:!0,type:{name:"EmailTemplate_BaseConfig"}},personIds:{defaultValue:null,description:"",name:"personIds",required:!0,type:{name:"string[] | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionRequestsModal.tsx#SendSubmissionRequestsModalInner"]={docgenInfo:SendSubmissionRequestsModalInner.__docgenInfo,name:"SendSubmissionRequestsModalInner",path:"src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionRequestsModal.tsx#SendSubmissionRequestsModalInner"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Conference/Manage/DashboardPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>DashboardPage});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js");var chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),useTitle=__webpack_require__("./src/aspects/Hooks/useTitle.tsx"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx"),chakra_ui_breadcrumb_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+breadcrumb@1.3.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/breadcrumb/dist/chakra-ui-breadcrumb.esm.js")),react_router_dom=__webpack_require__("../node_modules/.pnpm/react-router-dom@5.3.0_react@17.0.2/node_modules/react-router-dom/esm/react-router-dom.js"),es=__webpack_require__("../node_modules/.pnpm/use-react-router-breadcrumbs@2.0.2_react-router@5.2.1+react@17.0.2/node_modules/use-react-router-breadcrumbs/dist/es/index.js"),AuthParameters=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function Breadcrumbs(){var conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,confTitle=(0,react.useMemo)((function(){var _ref,_conference$subconfer;return null!==(_ref=subconferenceId?null===(_conference$subconfer=conference.subconferences.find((function(x){return x.id===subconferenceId})))||void 0===_conference$subconfer?void 0:_conference$subconfer.shortName:void 0)&&void 0!==_ref?_ref:conference.shortName}),[conference.shortName,conference.subconferences,subconferenceId]),routes=(0,react.useMemo)((function(){return[{path:"/conference/:slug/manage",breadcrumb:"Manage "+confTitle},{path:"/c/:slug/manage",breadcrumb:"Manage "+confTitle},{path:"/conference/:slug/manage/export/youtube",breadcrumb:"YouTube"},{path:"/c/:slug/manage/export/youtube",breadcrumb:"YouTube"},{path:"/conference/:slug/manage/export/download-videos",breadcrumb:"Download videos"},{path:"/c/:slug/manage/export/download-videos",breadcrumb:"Download videos"}]}),[confTitle]),breadcrumbs=(0,es.Z)(routes,{excludePaths:["/","/conference","/c","/conference/:slug","/c/:slug"]});return(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.aG,{separator:">",children:breadcrumbs.map((function(breadcrumb){return(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.gN,{isCurrentPage:breadcrumb.key===breadcrumb.location.key,children:(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.At,{as:react_router_dom.rU,to:breadcrumb.key,children:breadcrumb.breadcrumb})},breadcrumb.key)}))})}function DashboardHeaderControls(_ref){var children=_ref.children;return children?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.Ug,{spacing:4,mb:4,children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}Breadcrumbs.displayName="Breadcrumbs";try{DashboardHeaderControls.displayName="DashboardHeaderControls",DashboardHeaderControls.__docgenInfo={description:"",displayName:"DashboardHeaderControls",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/DashboardHeaderControls.tsx#DashboardHeaderControls"]={docgenInfo:DashboardHeaderControls.__docgenInfo,name:"DashboardHeaderControls",path:"src/aspects/Conference/Manage/DashboardHeaderControls.tsx#DashboardHeaderControls"})}catch(__react_docgen_typescript_loader_error){}var SubconferenceSelector=__webpack_require__("./src/aspects/Conference/Manage/Subconferences/SubconferenceSelector.tsx");function DashboardPage(_ref){var title=_ref.title,children=_ref.children,controls=_ref.controls,_ref$stickyHeader=_ref.stickyHeader,stickyHeader=void 0===_ref$stickyHeader||_ref$stickyHeader,_ref$autoOverflow=_ref.autoOverflow,autoOverflow=void 0===_ref$autoOverflow||_ref$autoOverflow,conference=(0,useConference.fk)(),grayBg=(0,chakra_ui_color_mode_esm.ff)("gray.50","gray.900"),grayBorder=(0,chakra_ui_color_mode_esm.ff)("gray.300","gray.600"),titleEl=(0,useTitle.Z)(title.includes(conference.shortName)?title:title+" - "+conference.shortName);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDir:"column",w:{base:"100%",xl:"80%"},px:[2,2,4],children:[titleEl,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{position:stickyHeader?"sticky":void 0,top:0,left:0,zIndex:1e5,bgColor:grayBg,pt:4,borderBottom:"1px solid",borderBottomColor:grayBorder,children:[(0,jsx_runtime.jsx)(Breadcrumbs,{}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{id:"page-heading",as:"h1",size:"xl",textAlign:"left",mt:4,mb:4,children:title}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.LZ,{}),(0,jsx_runtime.jsx)(SubconferenceSelector.B,{})]}),(0,jsx_runtime.jsx)(DashboardHeaderControls,{children:controls})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{flexDir:"column",mt:4,w:"100%",overflow:autoOverflow?"auto":void 0,children})]})}DashboardPage.displayName="DashboardPage";try{DashboardPage.displayName="DashboardPage",DashboardPage.__docgenInfo={description:"",displayName:"DashboardPage",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},stickyHeader:{defaultValue:{value:"true"},description:"",name:"stickyHeader",required:!1,type:{name:"boolean"}},autoOverflow:{defaultValue:{value:"true"},description:"",name:"autoOverflow",required:!1,type:{name:"boolean"}},controls:{defaultValue:null,description:"",name:"controls",required:!1,type:{name:"ReactChild[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/DashboardPage.tsx#DashboardPage"]={docgenInfo:DashboardPage.__docgenInfo,name:"DashboardPage",path:"src/aspects/Conference/Manage/DashboardPage.tsx#DashboardPage"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/GQL/QueryWrapper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>QueryWrapper});var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/aspects/Chakra/CenteredSpinner.tsx"),_useQueryErrorToast__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function QueryWrapper(_ref){var queryResult=_ref.queryResult,getter=_ref.getter,children=_ref.children,childrenNoData=_ref.childrenNoData,_ref$noSpinner=_ref.noSpinner,noSpinner=void 0!==_ref$noSpinner&&_ref$noSpinner,innerData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return"data"in queryResult&&queryResult.data?getter(queryResult.data):void 0}),[getter,queryResult]);return(0,_useQueryErrorToast__WEBPACK_IMPORTED_MODULE_2__.Z)("error"in queryResult?null==queryResult?void 0:queryResult.error:void 0,!1,"QueryWrapper"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[queryResult.fetching||queryResult.stale&&!innerData?noSpinner?void 0:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Chakra_CenteredSpinner__WEBPACK_IMPORTED_MODULE_1__.Z,{caller:"QueryWrapper:35"}):queryResult&&"error"in queryResult&&queryResult.error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"An error occurred loading in data - please see further information in notifications."}):void 0,queryResult.fetching||queryResult.stale&&!innerData?void 0:innerData?children(innerData):childrenNoData?childrenNoData():(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"No data found"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_4__.xv,{children:"(You might not have permission to access this. Please contact your conference organisers if you think this is a mistake.)"})]})]})}try{QueryWrapper.displayName="QueryWrapper",QueryWrapper.__docgenInfo={description:"",displayName:"QueryWrapper",props:{queryResult:{defaultValue:null,description:"",name:"queryResult",required:!0,type:{name:"UseQueryState<TData, TVariables> | (OperationResult<TData, TVariables> & { fetching: boolean; stale: boolean; }) | { ...; }"}},getter:{defaultValue:null,description:"",name:"getter",required:!0,type:{name:"(data: TData) => TInnerData | null | undefined"}},childrenNoData:{defaultValue:null,description:"",name:"childrenNoData",required:!1,type:{name:"(() => ReactNode | ReactNode[])"}},noSpinner:{defaultValue:{value:"false"},description:"",name:"noSpinner",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/GQL/QueryWrapper.tsx#QueryWrapper"]={docgenInfo:QueryWrapper.__docgenInfo,name:"QueryWrapper",path:"src/aspects/GQL/QueryWrapper.tsx#QueryWrapper"})}catch(__react_docgen_typescript_loader_error){}},"../packages/shared/shared-types/build/esm/conferenceConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Zu:()=>isEmailTemplate_BaseConfig});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.join.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js");var Conference_ConfigurationKey_Enum,typescript_is__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/.pnpm/typescript-is@0.19.0_typescript@4.5.5/node_modules/typescript-is/index.js");function isEmailTemplate_BaseConfig(data){return(0,typescript_is__WEBPACK_IMPORTED_MODULE_3__.is)(data,(function(object){function su__null__string_eu(object){return null===object?null:function _string(object){return"string"!=typeof object?{}:null}(object)}return function _0(object){return"object"!=typeof object||null===object||Array.isArray(object)?{}:"subjectTemplate"in object?(error=su__null__string_eu(object.subjectTemplate))?error:"htmlBodyTemplate"in object?(error=su__null__string_eu(object.htmlBodyTemplate))?error:null:{}:{};var error}(object)}))}!function(Conference_ConfigurationKey_Enum){Conference_ConfigurationKey_Enum.BackgroundVideos="BACKGROUND_VIDEOS",Conference_ConfigurationKey_Enum.ClowdrAppVersion="CLOWDR_APP_VERSION",Conference_ConfigurationKey_Enum.EmailTemplateSubmissionRequest="EMAIL_TEMPLATE_SUBMISSION_REQUEST",Conference_ConfigurationKey_Enum.EmailTemplateSubtitlesGenerated="EMAIL_TEMPLATE_SUBTITLES_GENERATED",Conference_ConfigurationKey_Enum.FillerVideos="FILLER_VIDEOS",Conference_ConfigurationKey_Enum.FrontendHost="FRONTEND_HOST",Conference_ConfigurationKey_Enum.InputLossSlate="INPUT_LOSS_SLATE",Conference_ConfigurationKey_Enum.RegistrationUrl="REGISTRATION_URL",Conference_ConfigurationKey_Enum.SupportAddress="SUPPORT_ADDRESS",Conference_ConfigurationKey_Enum.TechSupportAddress="TECH_SUPPORT_ADDRESS",Conference_ConfigurationKey_Enum.UploadAgreement="UPLOAD_AGREEMENT",Conference_ConfigurationKey_Enum.UploadCutoffTimestamp="UPLOAD_CUTOFF_TIMESTAMP"}(Conference_ConfigurationKey_Enum||(Conference_ConfigurationKey_Enum={}))},"../packages/shared/shared-types/build/esm/email.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>EMAIL_TEMPLATE_SUBTITLES_GENERATED,S:()=>EMAIL_TEMPLATE_SUBMISSION_REQUEST});var EMAIL_TEMPLATE_SUBTITLES_GENERATED={htmlBodyTemplate:'<p>Dear {{person.name}},</p>\n<p>We have automatically generated subtitles for your content <em>{{file.name}}</em> ({{item.title}}) at {{conference.name}}.</p>\n<p>Automated subtitles aren\'t always accurate, so you can <a href="{{uploadLink}}">review and edit them here</a>.</p>',subjectTemplate:"{{{conference.shortName}}}: Subtitles generated for your {{{file.name}}} ({{{item.title}}})"},EMAIL_TEMPLATE_SUBMISSION_REQUEST={htmlBodyTemplate:'<p>Dear {{person.name}},</p>\n<p>\n    The organisers of {{conference.name}} are requesting that you or\n    your co-authors/co-presenters submit your content to Midspace.\n</p>\n<p>\n    Please do not forward or share this email: anyone with the link contained\n    herein can use it to modify your submissions.\n</p>\n<p>\n    Please <a href="{{uploadLink}}">submit your content on this page</a> by 23:59 UTC on DD MMMM.\n</p>\n<p>\n    Please <a href="https://resources.midspace.app/video-subtitles/uploading-videos/">watch this 6 minute instructional video</a> to learn how to use Midspace\'s content upload system. This video also shows how to edit subtitles.\n</p>\n<p>\n    Please do not leave submitting to the last moment - this can be risky! If we are unable to automatically process your upload, it may not be possible to prepare it in time for the conference.\n</p>\n<p>\n    If you are uploading a video, Midspace will process it and auto-generate subtitles. You can then edit these subtitles.\n</p>\n<p>\n    We hope you enjoy your conference!\n<br/>\n</p>',subjectTemplate:"Submissions for {{{conference.shortName}}}"}},"../node_modules/.pnpm/use-react-router-breadcrumbs@2.0.2_react-router@5.2.1+react@17.0.2/node_modules/use-react-router-breadcrumbs/dist/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/.pnpm/@babel+runtime@7.15.4/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js");var DEFAULT_MATCH_OPTIONS={exact:!0},humanize=function humanize(str){return str.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,(function(m){return m.toUpperCase()}))},render=function render(_ref){var Breadcrumb=_ref.breadcrumb,match=_ref.match,location=_ref.location,props=_ref.props,componentProps=Object.assign({match,location,key:match.url},props||{});return Object.assign(Object.assign({},componentProps),{breadcrumb:"string"==typeof Breadcrumb?(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",{key:componentProps.key},Breadcrumb):react__WEBPACK_IMPORTED_MODULE_0__.createElement(Breadcrumb,Object.assign({},componentProps))})},getBreadcrumbMatch=function getBreadcrumbMatch(_ref3){var breadcrumb,currentSection=_ref3.currentSection,disableDefaults=_ref3.disableDefaults,excludePaths=_ref3.excludePaths,location=_ref3.location,pathSection=_ref3.pathSection,routes=_ref3.routes;return excludePaths&&excludePaths.some((function getIsPathExcluded(path){return null!=(0,react_router__WEBPACK_IMPORTED_MODULE_1__.LX)(pathSection,{path,exact:!0,strict:!1})}))?"NO_BREADCRUMB":(routes.some((function(_a){var userProvidedBreadcrumb=_a.breadcrumb,matchOptions=_a.matchOptions,path=_a.path,rest=function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a,["breadcrumb","matchOptions","path"]);if(!path)throw new Error("useBreadcrumbs: `path` must be provided in every route object");var match=(0,react_router__WEBPACK_IMPORTED_MODULE_1__.LX)(pathSection,Object.assign(Object.assign({},matchOptions||DEFAULT_MATCH_OPTIONS),{path}));return match&&null===userProvidedBreadcrumb||!match&&matchOptions?(breadcrumb="NO_BREADCRUMB",!0):!!match&&(!userProvidedBreadcrumb&&disableDefaults?(breadcrumb="NO_BREADCRUMB",!0):(breadcrumb=render(Object.assign({breadcrumb:userProvidedBreadcrumb||humanize(currentSection),match,location},rest)),!0))})),breadcrumb||(disableDefaults?"NO_BREADCRUMB":function getDefaultBreadcrumb(_ref2){var currentSection=_ref2.currentSection,location=_ref2.location,pathSection=_ref2.pathSection,match=(0,react_router__WEBPACK_IMPORTED_MODULE_1__.LX)(pathSection,Object.assign(Object.assign({},DEFAULT_MATCH_OPTIONS),{path:pathSection}))||{url:"not-found"};return render({breadcrumb:humanize(currentSection),match,location})}({pathSection,currentSection:"/"===pathSection?"Home":currentSection,location})))},flattenRoutes=function flattenRoutes(routes){return routes.reduce((function(arr,route){return route.routes?arr.concat([route].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.Z)(flattenRoutes(route.routes)))):arr.concat(route)}),[])};const __WEBPACK_DEFAULT_EXPORT__=function useReactRouterBreadcrumbs(routes,options){return function getBreadcrumbs(_ref4){var routes=_ref4.routes,location=_ref4.location,_ref4$options=_ref4.options,options=void 0===_ref4$options?{}:_ref4$options,matches=[];return location.pathname.split("?")[0].split("/").reduce((function(previousSection,currentSection,index){var pathSection=currentSection?"".concat(previousSection,"/").concat(currentSection):"/";if("/"===pathSection&&0!==index)return"";var breadcrumb=getBreadcrumbMatch(Object.assign({currentSection,location,pathSection,routes},options));return"NO_BREADCRUMB"!==breadcrumb&&matches.push(breadcrumb),"/"===pathSection?"":pathSection}),""),matches}({routes:flattenRoutes(routes||[]),location:(0,react_router__WEBPACK_IMPORTED_MODULE_1__.TH)(),options})}}}]);