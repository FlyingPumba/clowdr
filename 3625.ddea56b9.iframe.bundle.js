/*! For license information please see 3625.ddea56b9.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[3625],{"./src/aspects/Conference/Manage/Analytics/AnalyticsDashboard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>AnalyticsDashboard});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.pad-start.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.set.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js");var _templateObject,_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+stat@1.2.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/stat/dist/chakra-ui-stat.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+table@1.3.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/table/dist/chakra-ui-table.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+menu@1.8.6_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/menu/dist/chakra-ui-menu.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),papaparse__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("../node_modules/.pnpm/papaparse@5.3.1/node_modules/papaparse/papaparse.min.js"),papaparse__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(papaparse__WEBPACK_IMPORTED_MODULE_22__),react__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),urql__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),_generated_graphql__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./src/generated/graphql.tsx"),_GQL_make_context__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./src/aspects/GQL/make-context.ts"),_Utils_MathUtils__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("./src/aspects/Utils/MathUtils.ts"),_useConference__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./src/aspects/Conference/useConference.tsx"),_DashboardPage__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./src/aspects/Conference/Manage/DashboardPage.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function JSDateToExcelDate(inDate){return(25569+(inDate.getTime()-60*inDate.getTimezoneOffset()*1e3)/864e5).toString().substr(0,20)}function AnalyticsDashboard(){var _statsResponse$data2,_statsResponse$data2$,_statsResponse$data4,_statsResponse$data4$,_statsResponse$data6,_statsResponse$data6$,_statsResponse$data8,_statsResponse$data8$,_statsResponse$data10,_statsResponse$data11,_statsResponse$data14,_statsResponse$data15,_statsResponse$data16,_statsResponse$data17,_statsResponse$data18,conference=(0,_useConference__WEBPACK_IMPORTED_MODULE_25__.fk)(),context=(0,react__WEBPACK_IMPORTED_MODULE_23__.useMemo)((function(){var _makeContext;return(0,_GQL_make_context__WEBPACK_IMPORTED_MODULE_29__.f)(((_makeContext={})[_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_21__.k.Role]=_midspace_shared_types_auth__WEBPACK_IMPORTED_MODULE_21__.Z.ConferenceOrganizer,_makeContext))}),[]),statsResponse=_slicedToArray((0,_generated_graphql__WEBPACK_IMPORTED_MODULE_24__.lTi)({variables:{id:conference.id},context}),1)[0],totalItemViews=(0,react__WEBPACK_IMPORTED_MODULE_23__.useMemo)((function(){var _statsResponse$data,_statsResponse$data$c,total=0;if(null!==(_statsResponse$data=statsResponse.data)&&void 0!==_statsResponse$data&&null!==(_statsResponse$data$c=_statsResponse$data.conference_Conference_by_pk)&&void 0!==_statsResponse$data$c&&_statsResponse$data$c.items){var _step,_iterator=_createForOfIteratorHelper(statsResponse.data.conference_Conference_by_pk.items);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step2,_iterator2=_createForOfIteratorHelper(_step.value.stats);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){total+=_step2.value.viewCount}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return total}),[null===(_statsResponse$data2=statsResponse.data)||void 0===_statsResponse$data2||null===(_statsResponse$data2$=_statsResponse$data2.conference_Conference_by_pk)||void 0===_statsResponse$data2$?void 0:_statsResponse$data2$.items]),_useMemo=(0,react__WEBPACK_IMPORTED_MODULE_23__.useMemo)((function(){var _statsResponse$data3,_statsResponse$data3$,total=0,videosByPlaybacks=[];if(null!==(_statsResponse$data3=statsResponse.data)&&void 0!==_statsResponse$data3&&null!==(_statsResponse$data3$=_statsResponse$data3.conference_Conference_by_pk)&&void 0!==_statsResponse$data3$&&_statsResponse$data3$.items){var _step3,_iterator3=_createForOfIteratorHelper(statsResponse.data.conference_Conference_by_pk.items);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step4,item=_step3.value,_iterator4=_createForOfIteratorHelper(item.elements);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step5,element=_step4.value,elementTotal=0,_iterator5=_createForOfIteratorHelper(element.stats);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){elementTotal+=_step5.value.viewCount}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}total+=elementTotal,videosByPlaybacks.push({itemTitle:item.title,elementName:element.name,count:elementTotal})}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}return{totalVideoPlaybacks:total,popularVideosByPlaybacks:videosByPlaybacks.sort((function(x,y){return y.count-x.count})).slice(0,5)}}),[null===(_statsResponse$data4=statsResponse.data)||void 0===_statsResponse$data4||null===(_statsResponse$data4$=_statsResponse$data4.conference_Conference_by_pk)||void 0===_statsResponse$data4$?void 0:_statsResponse$data4$.items]),totalVideoPlaybacks=_useMemo.totalVideoPlaybacks,popularVideosByPlaybacks=_useMemo.popularVideosByPlaybacks,totalStreamPlaybacks=(0,react__WEBPACK_IMPORTED_MODULE_23__.useMemo)((function(){var _statsResponse$data5,_statsResponse$data5$,total=0;if(null!==(_statsResponse$data5=statsResponse.data)&&void 0!==_statsResponse$data5&&null!==(_statsResponse$data5$=_statsResponse$data5.conference_Conference_by_pk)&&void 0!==_statsResponse$data5$&&_statsResponse$data5$.rooms){var _step6,_iterator6=_createForOfIteratorHelper(statsResponse.data.conference_Conference_by_pk.rooms);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step7,_iterator7=_createForOfIteratorHelper(_step6.value.stats);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){total+=_step7.value.hlsViewCount}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}}return total}),[null===(_statsResponse$data6=statsResponse.data)||void 0===_statsResponse$data6||null===(_statsResponse$data6$=_statsResponse$data6.conference_Conference_by_pk)||void 0===_statsResponse$data6$?void 0:_statsResponse$data6$.rooms]),videos_ComputeDownloadableData=(0,react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(boundaryMs){var _statsResponse$data7,_statsResponse$data7$;if(null!==(_statsResponse$data7=statsResponse.data)&&void 0!==_statsResponse$data7&&null!==(_statsResponse$data7$=_statsResponse$data7.conference_Conference_by_pk)&&void 0!==_statsResponse$data7$&&_statsResponse$data7$.items){var _step8,items=statsResponse.data.conference_Conference_by_pk.items,earliestMs=Number.POSITIVE_INFINITY,latestMs=Number.NEGATIVE_INFINITY,itemPointers=[],_iterator8=_createForOfIteratorHelper(items);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var item=_step8.value;itemPointers.push({elementPointers:item.elements.map((function(_element){return{stats:0}}))});var _step9,_iterator9=_createForOfIteratorHelper(item.elements);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step10,_iterator10=_createForOfIteratorHelper(_step9.value.stats);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _stat=_step10.value;if(_stat.updated_at){var _updatedAtMs=Date.parse(_stat.updated_at);earliestMs=Math.min(earliestMs,_updatedAtMs),latestMs=Math.max(latestMs,_updatedAtMs)}}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}for(var output=[],earliestRoundedDownMs=(0,_Utils_MathUtils__WEBPACK_IMPORTED_MODULE_30__.N4)(earliestMs,boundaryMs),latestRoundedUpMs=(0,_Utils_MathUtils__WEBPACK_IMPORTED_MODULE_30__.FG)(latestMs,boundaryMs),currentStartMs=earliestRoundedDownMs;currentStartMs<=latestRoundedUpMs;currentStartMs+=boundaryMs){var data={time:new Date(currentStartMs).toISOString(),count:0};output.push(data);for(var currentEndMs=currentStartMs+boundaryMs,itemIdx=0;itemIdx<items.length;itemIdx++)for(var _item=items[itemIdx],elementIdx=0;elementIdx<_item.elements.length;elementIdx++)for(var element=_item.elements[elementIdx],pointers=itemPointers[itemIdx].elementPointers[elementIdx];pointers.stats<element.stats.length;){var stat=element.stats[pointers.stats];if(stat.updated_at&&void 0!==stat.viewCount){var updatedAtMs=Date.parse(stat.updated_at);if(updatedAtMs>=currentEndMs)break;updatedAtMs>=currentStartMs&&(data.count+=stat.viewCount),pointers.stats++}else pointers.stats++}}return output}return null}),[null===(_statsResponse$data8=statsResponse.data)||void 0===_statsResponse$data8||null===(_statsResponse$data8$=_statsResponse$data8.conference_Conference_by_pk)||void 0===_statsResponse$data8$?void 0:_statsResponse$data8$.items]),videos_DownloadData=(0,react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(kind){var _kind$granularity,videos_DownloadableData=videos_ComputeDownloadableData(null!==(_kind$granularity=kind.granularity)&&void 0!==_kind$granularity?_kind$granularity:3e5);if(videos_DownloadableData)if("csv"===kind.kind){var _csvURL,_step11,remappedData=[],_iterator11=_createForOfIteratorHelper(videos_DownloadableData);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var data=_step11.value,newData={time:JSDateToExcelDate(new Date(data.time)),count:data.count};remappedData.push(newData)}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}var csvURL,csvText=papaparse__WEBPACK_IMPORTED_MODULE_22___default().unparse(remappedData,{columns:["time","count"]}),csvData=new Blob([csvText],{type:"text/csv;charset=utf-8;"}),now=new Date,fileName=now.getFullYear()+"-"+(now.getMonth()+1).toString().padStart(2,"0")+"-"+now.getDate().toString().padStart(2,"0")+"T"+now.getHours().toString().padStart(2,"0")+"-"+now.getMinutes().toString().padStart(2,"0")+" - Video Analytics.csv";csvURL=window.URL.createObjectURL(csvData);var tempLink=document.createElement("a");tempLink.href=null!==(_csvURL=csvURL)&&void 0!==_csvURL?_csvURL:"",tempLink.setAttribute("download",fileName),tempLink.click()}else if("json"===kind.kind){var _jsonURL,jsonURL,jsonText=JSON.stringify(videos_DownloadableData,null,2),jsonData=new Blob([jsonText],{type:"\tapplication/json;charset=utf-8;"}),_now=new Date,_fileName=_now.getFullYear()+"-"+(_now.getMonth()+1).toString().padStart(2,"0")+"-"+_now.getDate().toString().padStart(2,"0")+"T"+_now.getHours().toString().padStart(2,"0")+"-"+_now.getMinutes().toString().padStart(2,"0")+" - Video Analytics.json";jsonURL=window.URL.createObjectURL(jsonData);var _tempLink=document.createElement("a");_tempLink.href=null!==(_jsonURL=jsonURL)&&void 0!==_jsonURL?_jsonURL:"",_tempLink.setAttribute("download",_fileName),_tempLink.click()}}),[videos_ComputeDownloadableData]),presence_ComputeDownloadableData=(0,react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(boundaryMs){var _statsResponse$data9,_statsResponse$data9$;if(null!==(_statsResponse$data9=statsResponse.data)&&void 0!==_statsResponse$data9&&null!==(_statsResponse$data9$=_statsResponse$data9.conference_Conference_by_pk)&&void 0!==_statsResponse$data9$&&_statsResponse$data9$.rooms){var _step12,rooms=statsResponse.data.conference_Conference_by_pk.rooms,earliestMs=Number.POSITIVE_INFINITY,latestMs=Number.NEGATIVE_INFINITY,roomArrayPointers=[],_iterator12=_createForOfIteratorHelper(rooms);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var room=_step12.value;roomArrayPointers.push({event:0,presence:0,hlsViews:0});var _step13,_iterator13=_createForOfIteratorHelper(room.presenceCounts);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _stat3=_step13.value;if(_stat3.created_at){var _createdAtMs2=Date.parse(_stat3.created_at);earliestMs=Math.min(earliestMs,_createdAtMs2),latestMs=Math.max(latestMs,_createdAtMs2)}}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}for(var output=[],earliestRoundedDownMs=(0,_Utils_MathUtils__WEBPACK_IMPORTED_MODULE_30__.N4)(earliestMs,boundaryMs),latestRoundedUpMs=(0,_Utils_MathUtils__WEBPACK_IMPORTED_MODULE_30__.FG)(latestMs,boundaryMs),currentStartMs=earliestRoundedDownMs;currentStartMs<=latestRoundedUpMs;currentStartMs+=boundaryMs){var data={time:new Date(currentStartMs).toISOString()};output.push(data);for(var currentEndMs=currentStartMs+boundaryMs,roomIdx=0;roomIdx<rooms.length;roomIdx++){for(var _room=rooms[roomIdx],pointers=roomArrayPointers[roomIdx],events=[],presenceAverage=0,presenceMax=0,streamViews=0;pointers.event<_room.events.length;){var event=_room.events[pointers.event];if(Date.parse(event.scheduledStartTime)>=currentEndMs)break;if(!(Date.parse(event.scheduledEndTime)<currentStartMs)){events.push(event);break}pointers.event++}for(var presenceCountsIncluded=0;pointers.presence<_room.presenceCounts.length;){var stat=_room.presenceCounts[pointers.presence];if(stat.created_at&&void 0!==stat.count){var createdAtMs=Date.parse(stat.created_at);if(createdAtMs>=currentEndMs)break;createdAtMs>=currentStartMs&&stat.count>0&&(presenceMax=Math.max(presenceMax,stat.count),presenceAverage+=stat.count,presenceCountsIncluded++),pointers.presence++}else pointers.presence++}for(presenceCountsIncluded>0&&(presenceAverage/=presenceCountsIncluded);pointers.hlsViews<_room.stats.length;){var _stat2=_room.stats[pointers.hlsViews];if(_stat2.created_at&&void 0!==_stat2.hlsViewCount){var _createdAtMs=Date.parse(_stat2.created_at);if(_createdAtMs>=currentEndMs)break;_createdAtMs>=currentStartMs&&(streamViews+=_stat2.hlsViewCount),pointers.hlsViews++}else pointers.hlsViews++}if(events.length>0||presenceAverage||presenceMax||streamViews){var datum={events,presenceAverage:Math.round(10*presenceAverage)/10,presenceMax,streamViews};data[_room.name]=datum}}}return output}return null}),[null===(_statsResponse$data10=statsResponse.data)||void 0===_statsResponse$data10||null===(_statsResponse$data11=_statsResponse$data10.conference_Conference_by_pk)||void 0===_statsResponse$data11?void 0:_statsResponse$data11.rooms]),presence_DownloadData=(0,react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(kind){var _kind$granularity2,_statsResponse$data12,_statsResponse$data13,presence_DownloadableData=presence_ComputeDownloadableData(null!==(_kind$granularity2=kind.granularity)&&void 0!==_kind$granularity2?_kind$granularity2:3e5);if(presence_DownloadableData&&null!==(_statsResponse$data12=statsResponse.data)&&void 0!==_statsResponse$data12&&null!==(_statsResponse$data13=_statsResponse$data12.conference_Conference_by_pk)&&void 0!==_statsResponse$data13&&_statsResponse$data13.rooms)if("csv"===kind.kind){var _csvURL2,_step14,remappedData=[],roomNames=new Set,_iterator14=_createForOfIteratorHelper(presence_DownloadableData);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var data=_step14.value,newData={time:JSDateToExcelDate(new Date(data.time))},doPush=!1;for(var roomName in data)"time"!==roomName&&roomName in data&&data[roomName]&&data[roomName][kind.field]&&(newData[roomName]=data[roomName][kind.field],roomNames.add(roomName),doPush=!0);(doPush||"streamViews"!==kind.field)&&remappedData.push(newData)}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}var csvURL,csvText=papaparse__WEBPACK_IMPORTED_MODULE_22___default().unparse(remappedData,{columns:["time"].concat(_toConsumableArray(roomNames))}),csvData=new Blob([csvText],{type:"text/csv;charset=utf-8;"}),now=new Date,fileName=now.getFullYear()+"-"+(now.getMonth()+1).toString().padStart(2,"0")+"-"+now.getDate().toString().padStart(2,"0")+"T"+now.getHours().toString().padStart(2,"0")+"-"+now.getMinutes().toString().padStart(2,"0")+" - Room Analytics - "+kind.field+".csv";csvURL=window.URL.createObjectURL(csvData);var tempLink=document.createElement("a");tempLink.href=null!==(_csvURL2=csvURL)&&void 0!==_csvURL2?_csvURL2:"",tempLink.setAttribute("download",fileName),tempLink.click()}else if("json"===kind.kind){var _jsonURL2,jsonURL,jsonText=JSON.stringify(presence_DownloadableData,null,2),jsonData=new Blob([jsonText],{type:"\tapplication/json;charset=utf-8;"}),_now2=new Date,_fileName2=_now2.getFullYear()+"-"+(_now2.getMonth()+1).toString().padStart(2,"0")+"-"+_now2.getDate().toString().padStart(2,"0")+"T"+_now2.getHours().toString().padStart(2,"0")+"-"+_now2.getMinutes().toString().padStart(2,"0")+" - Room Analytics.json";jsonURL=window.URL.createObjectURL(jsonData);var _tempLink2=document.createElement("a");_tempLink2.href=null!==(_jsonURL2=jsonURL)&&void 0!==_jsonURL2?_jsonURL2:"",_tempLink2.setAttribute("download",_fileName2),_tempLink2.click()}}),[presence_ComputeDownloadableData,null===(_statsResponse$data14=statsResponse.data)||void 0===_statsResponse$data14||null===(_statsResponse$data15=_statsResponse$data14.conference_Conference_by_pk)||void 0===_statsResponse$data15?void 0:_statsResponse$data15.rooms]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_DashboardPage__WEBPACK_IMPORTED_MODULE_26__.Y,{title:"Analytics",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.gC,{alignItems:"left",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.xv,{fontStyle:"italic",children:"Data updates every 24 hours."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.pr,{w:"100%",maxW:"4xl",pt:8,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.kN,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.dw,{fontSize:"xl",children:"Item views"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.Jf,{fontSize:"4xl",children:null!==(_statsResponse$data16=statsResponse.data)&&void 0!==_statsResponse$data16&&_statsResponse$data16.conference_Conference_by_pk?totalItemViews:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_33__.$,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.vh,{children:"(3 seconds or more looking at an item.)"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.kN,{mx:8,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.dw,{fontSize:"xl",children:"Video playbacks"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.Jf,{fontSize:"4xl",children:null!==(_statsResponse$data17=statsResponse.data)&&void 0!==_statsResponse$data17&&_statsResponse$data17.conference_Conference_by_pk?totalVideoPlaybacks:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_33__.$,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.vh,{children:["(15 seconds or more watching a video;",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)("br",{})," excludes live-streams, includes recordings.)"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.kN,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.dw,{fontSize:"xl",children:"Live-stream playbacks"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.Jf,{fontSize:"4xl",children:null!==(_statsResponse$data18=statsResponse.data)&&void 0!==_statsResponse$data18&&_statsResponse$data18.conference_Conference_by_pk?totalStreamPlaybacks:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_33__.$,{})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_32__.vh,{children:"(15 seconds or more watching a live-stream.)"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.xu,{children:"< More information will be coming soon >"}),null!=popularVideosByPlaybacks&&popularVideosByPlaybacks.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.gC,{alignItems:"flex-start",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.xv,{fontWeight:"bold",children:"The top 5 most popular videos are:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.iA,{cellSpacing:"20px",overflowX:"auto",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.hr,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Tr,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Th,{children:"Item"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Th,{children:"Element"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Th,{children:"Playbacks"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.p3,{children:null==popularVideosByPlaybacks?void 0:popularVideosByPlaybacks.map((function(stat){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Tr,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Td,{children:stat.itemTitle}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Td,{children:stat.elementName}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_34__.Td,{children:stat.count})]},stat.itemTitle+": "+stat.elementName)}))})]})]}):void 0,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.gC,{alignItems:"flex-start",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.xv,{fontWeight:"bold",children:"Please note:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.QI,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.HC,{children:"In CSV format, times are provided as Excel-compatible date/time numbers. When opening the CSV in Excel, select the time column and set the cell format to “Custom” with type “dd/mm/yyyy hh:mm”"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.HC,{children:"Aggregating the available raw data via the buttons below can take a lot of time and slow your browser down while the calculation is performed. Please be patient, particularly if you had a long, large or busy conference."})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_31__.Ug,{flexWrap:"wrap",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.v2,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.j2,{as:_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.zx,colorScheme:"purple",children:["Download room statistics ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_37__.ChevronDownIcon,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.qy,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.kS,{title:"CSV: Presence maximums",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"presenceMax",granularity:3e5})},children:"5 min granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"presenceMax",granularity:36e5})},children:"1 hour granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"presenceMax",granularity:864e5})},children:"1 day granularity"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.kS,{title:"CSV: Presence averages",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"presenceAverage",granularity:3e5})},children:"5 min granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"presenceAverage",granularity:36e5})},children:"1 hour granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"presenceAverage",granularity:864e5})},children:"1 day granularity"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.kS,{title:"CSV: Stream playbacks",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"streamViews",granularity:3e5})},children:"5 min granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"streamViews",granularity:36e5})},children:"1 hour granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"csv",field:"streamViews",granularity:864e5})},children:"1 day granularity"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return presence_DownloadData({kind:"json"})},children:"JSON: All structured data"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.v2,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.j2,{as:_chakra_ui_react__WEBPACK_IMPORTED_MODULE_36__.zx,colorScheme:"purple",children:["Download video statistics ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_icons__WEBPACK_IMPORTED_MODULE_37__.ChevronDownIcon,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.qy,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.kS,{title:"CSV: Video playbacks",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return videos_DownloadData({kind:"csv",granularity:3e5})},children:"5 min granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return videos_DownloadData({kind:"csv",granularity:36e5})},children:"1 hour granularity"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return videos_DownloadData({kind:"csv",granularity:864e5})},children:"1 day granularity"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_27__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_35__.sN,{onClick:function onClick(){return videos_DownloadData({kind:"json"})},children:"JSON: All structured data"})]})]})]})]})})}(0,urql__WEBPACK_IMPORTED_MODULE_28__.Ps)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query ConferenceStats($id: uuid!) {\n        conference_Conference_by_pk(id: $id) {\n            id\n            completedRegistrationsStat {\n                count\n                id\n            }\n            items(where: { stats: {} }) {\n                id\n                title\n                conferenceId\n                stats(order_by: [{ updated_at: asc }]) {\n                    id\n                    itemId\n                    viewCount\n                    updated_at\n                }\n                elements(where: { typeName: { _in: [VIDEO_BROADCAST, VIDEO_PREPUBLISH, VIDEO_FILE] }, stats: {} }) {\n                    id\n                    name\n                    typeName\n                    itemId\n                    stats(order_by: [{ updated_at: asc }]) {\n                        id\n                        elementId\n                        viewCount\n                        updated_at\n                    }\n                }\n            }\n            rooms(where: { _or: [{ managementModeName: { _eq: PUBLIC } }, { events: {} }] }) {\n                id\n                name\n                managementModeName\n                presenceCounts(order_by: [{ created_at: asc }]) {\n                    created_at\n                    count\n                }\n                stats(order_by: [{ created_at: asc }]) {\n                    created_at\n                    hlsViewCount\n                    roomId\n                }\n                events(order_by: [{ scheduledStartTime: asc }, { scheduledEndTime: asc }]) {\n                    id\n                    name\n                    roomId\n                    itemId\n                    item {\n                        id\n                        title\n                    }\n                    exhibitionId\n                    exhibition {\n                        id\n                        name\n                    }\n\n                    scheduledStartTime\n                    scheduledEndTime\n\n                    modeName\n                }\n            }\n        }\n    }\n"]))),AnalyticsDashboard.displayName="AnalyticsDashboard"},"./src/aspects/Conference/Manage/DashboardPage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>DashboardPage});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js");var chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),useTitle=__webpack_require__("./src/aspects/Hooks/useTitle.tsx"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx"),chakra_ui_breadcrumb_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+breadcrumb@1.3.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/breadcrumb/dist/chakra-ui-breadcrumb.esm.js")),react_router_dom=__webpack_require__("../node_modules/.pnpm/react-router-dom@5.3.0_react@17.0.2/node_modules/react-router-dom/esm/react-router-dom.js"),es=__webpack_require__("../node_modules/.pnpm/use-react-router-breadcrumbs@2.0.2_react-router@5.2.1+react@17.0.2/node_modules/use-react-router-breadcrumbs/dist/es/index.js"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function Breadcrumbs(){var conference=(0,useConference.fk)(),routes=(0,react.useMemo)((function(){return[{path:"/conference/:slug/manage",breadcrumb:"Manage "+conference.shortName},{path:"/c/:slug/manage",breadcrumb:"Manage "+conference.shortName},{path:"/conference/:slug/manage/export/youtube",breadcrumb:"YouTube"},{path:"/c/:slug/manage/export/youtube",breadcrumb:"YouTube"},{path:"/conference/:slug/manage/export/download-videos",breadcrumb:"Download videos"},{path:"/c/:slug/manage/export/download-videos",breadcrumb:"Download videos"}]}),[conference.shortName]),breadcrumbs=(0,es.Z)(routes,{excludePaths:["/","/conference","/c","/conference/:slug","/c/:slug"]});return(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.aG,{separator:">",children:breadcrumbs.map((function(breadcrumb){return(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.gN,{isCurrentPage:breadcrumb.key===breadcrumb.location.key,children:(0,jsx_runtime.jsx)(chakra_ui_breadcrumb_esm.At,{as:react_router_dom.rU,to:breadcrumb.key,children:breadcrumb.breadcrumb})},breadcrumb.key)}))})}function DashboardHeaderControls(_ref){var children=_ref.children;return children?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.Ug,{spacing:4,mb:4,children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}Breadcrumbs.displayName="Breadcrumbs";try{DashboardHeaderControls.displayName="DashboardHeaderControls",DashboardHeaderControls.__docgenInfo={description:"",displayName:"DashboardHeaderControls",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/DashboardHeaderControls.tsx#DashboardHeaderControls"]={docgenInfo:DashboardHeaderControls.__docgenInfo,name:"DashboardHeaderControls",path:"src/aspects/Conference/Manage/DashboardHeaderControls.tsx#DashboardHeaderControls"})}catch(__react_docgen_typescript_loader_error){}var SubconferenceSelector=__webpack_require__("./src/aspects/Conference/Manage/Subconferences/SubconferenceSelector.tsx");function DashboardPage(_ref){var title=_ref.title,children=_ref.children,controls=_ref.controls,_ref$stickyHeader=_ref.stickyHeader,stickyHeader=void 0===_ref$stickyHeader||_ref$stickyHeader,_ref$autoOverflow=_ref.autoOverflow,autoOverflow=void 0===_ref$autoOverflow||_ref$autoOverflow,conference=(0,useConference.fk)(),grayBg=(0,chakra_ui_color_mode_esm.ff)("gray.50","gray.900"),grayBorder=(0,chakra_ui_color_mode_esm.ff)("gray.300","gray.600"),titleEl=(0,useTitle.Z)(title.includes(conference.shortName)?title:title+" - "+conference.shortName);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDir:"column",w:{base:"100%",xl:"80%"},px:[2,2,4],children:[titleEl,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{position:stickyHeader?"sticky":void 0,top:0,left:0,zIndex:1e5,bgColor:grayBg,pt:4,borderBottom:"1px solid",borderBottomColor:grayBorder,children:[(0,jsx_runtime.jsx)(Breadcrumbs,{}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{id:"page-heading",as:"h1",size:"xl",textAlign:"left",mt:4,mb:4,children:title}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.LZ,{}),(0,jsx_runtime.jsx)(SubconferenceSelector.B,{})]}),(0,jsx_runtime.jsx)(DashboardHeaderControls,{children:controls})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.kC,{flexDir:"column",mt:4,w:"100%",overflow:autoOverflow?"auto":void 0,children})]})}DashboardPage.displayName="DashboardPage";try{DashboardPage.displayName="DashboardPage",DashboardPage.__docgenInfo={description:"",displayName:"DashboardPage",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},stickyHeader:{defaultValue:{value:"true"},description:"",name:"stickyHeader",required:!1,type:{name:"boolean"}},autoOverflow:{defaultValue:{value:"true"},description:"",name:"autoOverflow",required:!1,type:{name:"boolean"}},controls:{defaultValue:null,description:"",name:"controls",required:!1,type:{name:"ReactChild[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/DashboardPage.tsx#DashboardPage"]={docgenInfo:DashboardPage.__docgenInfo,name:"DashboardPage",path:"src/aspects/Conference/Manage/DashboardPage.tsx#DashboardPage"})}catch(__react_docgen_typescript_loader_error){}},"../node_modules/.pnpm/use-react-router-breadcrumbs@2.0.2_react-router@5.2.1+react@17.0.2/node_modules/use-react-router-breadcrumbs/dist/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/.pnpm/@babel+runtime@7.15.4/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js");var DEFAULT_MATCH_OPTIONS={exact:!0},humanize=function humanize(str){return str.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,(function(m){return m.toUpperCase()}))},render=function render(_ref){var Breadcrumb=_ref.breadcrumb,match=_ref.match,location=_ref.location,props=_ref.props,componentProps=Object.assign({match,location,key:match.url},props||{});return Object.assign(Object.assign({},componentProps),{breadcrumb:"string"==typeof Breadcrumb?(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("span",{key:componentProps.key},Breadcrumb):react__WEBPACK_IMPORTED_MODULE_0__.createElement(Breadcrumb,Object.assign({},componentProps))})},getBreadcrumbMatch=function getBreadcrumbMatch(_ref3){var breadcrumb,currentSection=_ref3.currentSection,disableDefaults=_ref3.disableDefaults,excludePaths=_ref3.excludePaths,location=_ref3.location,pathSection=_ref3.pathSection,routes=_ref3.routes;return excludePaths&&excludePaths.some((function getIsPathExcluded(path){return null!=(0,react_router__WEBPACK_IMPORTED_MODULE_1__.LX)(pathSection,{path,exact:!0,strict:!1})}))?"NO_BREADCRUMB":(routes.some((function(_a){var userProvidedBreadcrumb=_a.breadcrumb,matchOptions=_a.matchOptions,path=_a.path,rest=function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}(_a,["breadcrumb","matchOptions","path"]);if(!path)throw new Error("useBreadcrumbs: `path` must be provided in every route object");var match=(0,react_router__WEBPACK_IMPORTED_MODULE_1__.LX)(pathSection,Object.assign(Object.assign({},matchOptions||DEFAULT_MATCH_OPTIONS),{path}));return match&&null===userProvidedBreadcrumb||!match&&matchOptions?(breadcrumb="NO_BREADCRUMB",!0):!!match&&(!userProvidedBreadcrumb&&disableDefaults?(breadcrumb="NO_BREADCRUMB",!0):(breadcrumb=render(Object.assign({breadcrumb:userProvidedBreadcrumb||humanize(currentSection),match,location},rest)),!0))})),breadcrumb||(disableDefaults?"NO_BREADCRUMB":function getDefaultBreadcrumb(_ref2){var currentSection=_ref2.currentSection,location=_ref2.location,pathSection=_ref2.pathSection,match=(0,react_router__WEBPACK_IMPORTED_MODULE_1__.LX)(pathSection,Object.assign(Object.assign({},DEFAULT_MATCH_OPTIONS),{path:pathSection}))||{url:"not-found"};return render({breadcrumb:humanize(currentSection),match,location})}({pathSection,currentSection:"/"===pathSection?"Home":currentSection,location})))},flattenRoutes=function flattenRoutes(routes){return routes.reduce((function(arr,route){return route.routes?arr.concat([route].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.Z)(flattenRoutes(route.routes)))):arr.concat(route)}),[])};const __WEBPACK_DEFAULT_EXPORT__=function useReactRouterBreadcrumbs(routes,options){return function getBreadcrumbs(_ref4){var routes=_ref4.routes,location=_ref4.location,_ref4$options=_ref4.options,options=void 0===_ref4$options?{}:_ref4$options,matches=[];return location.pathname.split("?")[0].split("/").reduce((function(previousSection,currentSection,index){var pathSection=currentSection?"".concat(previousSection,"/").concat(currentSection):"/";if("/"===pathSection&&0!==index)return"";var breadcrumb=getBreadcrumbMatch(Object.assign({currentSection,location,pathSection,routes},options));return"NO_BREADCRUMB"!==breadcrumb&&matches.push(breadcrumb),"/"===pathSection?"":pathSection}),""),matches}({routes:flattenRoutes(routes||[]),location:(0,react_router__WEBPACK_IMPORTED_MODULE_1__.TH)(),options})}},"../node_modules/.pnpm/@babel+runtime@7.15.4/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}__webpack_require__.d(__webpack_exports__,{Z:()=>_toConsumableArray})}}]);